import{r as x,j as d,R as Ri,Q as Er,g as Cr,c as Di}from"./QuestionRenderer-CGTquOB1.js";/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Rn="popstate";function Li(e={}){function t(r,i){let{pathname:s,search:a,hash:o}=r.location;return Gt("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ut(i)}return Mi(t,n,null,e)}function re(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function we(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Oi(){return Math.random().toString(36).substring(2,10)}function Dn(e,t){return{usr:e.state,key:e.key,idx:t}}function Gt(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?We(t):t,state:n,key:t&&t.key||r||Oi()}}function ut({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function We(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Mi(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o="POP",c=null,l=u();l==null&&(l=0,a.replaceState({...a.state,idx:l},""));function u(){return(a.state||{idx:null}).idx}function h(){o="POP";let T=u(),w=T==null?null:T-l;l=T,c&&c({action:o,location:v.location,delta:w})}function f(T,w){o="PUSH";let C=Gt(v.location,T,w);l=u()+1;let A=Dn(C,l),L=v.createHref(C);try{a.pushState(A,"",L)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(L)}s&&c&&c({action:o,location:v.location,delta:1})}function p(T,w){o="REPLACE";let C=Gt(v.location,T,w);l=u();let A=Dn(C,l),L=v.createHref(C);a.replaceState(A,"",L),s&&c&&c({action:o,location:v.location,delta:0})}function S(T){return qi(T)}let v={get action(){return o},get location(){return e(i,a)},listen(T){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Rn,h),c=T,()=>{i.removeEventListener(Rn,h),c=null}},createHref(T){return t(i,T)},createURL:S,encodeLocation(T){let w=S(T);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:p,go(T){return a.go(T)}};return v}function qi(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),re(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:ut(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function _r(e,t,n="/"){return Bi(e,t,n,!1)}function Bi(e,t,n,r){let i=typeof t=="string"?We(t):t,s=Pe(i.pathname||"/",n);if(s==null)return null;let a=Ar(e);Fi(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let l=Ji(s);o=Yi(a[c],l,r)}return o}function Ar(e,t=[],n=[],r="",i=!1){let s=(a,o,c=i,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(r)&&c)return;re(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length)}let h=Ne([r,u.relativePath]),f=n.concat(u);a.children&&a.children.length>0&&(re(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),Ar(a.children,t,f,h,c)),!(a.path==null&&!a.index)&&t.push({path:h,score:Wi(h,a.index),routesMeta:f})};return e.forEach((a,o)=>{if(a.path===""||!a.path?.includes("?"))s(a,o);else for(let c of jr(a.path))s(a,o,!0,c)}),t}function jr(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=jr(r.join("/")),o=[];return o.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&o.push(...a),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function Fi(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Gi(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var zi=/^:[\w-]+$/,$i=3,Ui=2,Hi=1,Vi=10,Qi=-2,Ln=e=>e==="*";function Wi(e,t){let n=e.split("/"),r=n.length;return n.some(Ln)&&(r+=Qi),t&&(r+=Ui),n.filter(i=>!Ln(i)).reduce((i,s)=>i+(zi.test(s)?$i:s===""?Hi:Vi),r)}function Gi(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Yi(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let c=r[o],l=o===r.length-1,u=s==="/"?t:t.slice(s.length)||"/",h=St({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),f=c.route;if(!h&&l&&n&&!r[r.length-1].route.index&&(h=St({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(i,h.params),a.push({params:i,pathname:Ne([s,h.pathname]),pathnameBase:ts(Ne([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Ne([s,h.pathnameBase]))}return a}function St(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Ki(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((l,{paramName:u,isOptional:h},f)=>{if(u==="*"){let S=o[f]||"";a=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const p=o[f];return h&&!p?l[u]=void 0:l[u]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:a,pattern:e}}function Ki(e,t=!1,n=!0){we(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Ji(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return we(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Pe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Xi(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?We(e):e;return{pathname:n?n.startsWith("/")?n:Zi(n,t):t,search:ns(r),hash:rs(i)}}function Zi(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function It(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function es(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function on(e){let t=es(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function ln(e,t,n,r=!1){let i;typeof e=="string"?i=We(e):(i={...e},re(!i.pathname||!i.pathname.includes("?"),It("?","pathname","search",i)),re(!i.pathname||!i.pathname.includes("#"),It("#","pathname","hash",i)),re(!i.search||!i.search.includes("#"),It("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let h=t.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}o=h>=0?t[h]:"/"}let c=Xi(i,o),l=a&&a!=="/"&&a.endsWith("/"),u=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}var Ne=e=>e.join("/").replace(/\/\/+/g,"/"),ts=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ns=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,rs=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function is(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Nr=["POST","PUT","PATCH","DELETE"];new Set(Nr);var ss=["GET",...Nr];new Set(ss);var Ge=x.createContext(null);Ge.displayName="DataRouter";var Ct=x.createContext(null);Ct.displayName="DataRouterState";x.createContext(!1);var Pr=x.createContext({isTransitioning:!1});Pr.displayName="ViewTransition";var as=x.createContext(new Map);as.displayName="Fetchers";var os=x.createContext(null);os.displayName="Await";var ve=x.createContext(null);ve.displayName="Navigation";var ht=x.createContext(null);ht.displayName="Location";var ke=x.createContext({outlet:null,matches:[],isDataRoute:!1});ke.displayName="Route";var cn=x.createContext(null);cn.displayName="RouteError";function ls(e,{relative:t}={}){re(Ye(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=x.useContext(ve),{hash:i,pathname:s,search:a}=pt(e,{relative:t}),o=s;return n!=="/"&&(o=s==="/"?n:Ne([n,s])),r.createHref({pathname:o,search:a,hash:i})}function Ye(){return x.useContext(ht)!=null}function De(){return re(Ye(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(ht).location}var Ir="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Rr(e){x.useContext(ve).static||x.useLayoutEffect(e)}function Le(){let{isDataRoute:e}=x.useContext(ke);return e?Ss():cs()}function cs(){re(Ye(),"useNavigate() may be used only in the context of a <Router> component.");let e=x.useContext(Ge),{basename:t,navigator:n}=x.useContext(ve),{matches:r}=x.useContext(ke),{pathname:i}=De(),s=JSON.stringify(on(r)),a=x.useRef(!1);return Rr(()=>{a.current=!0}),x.useCallback((c,l={})=>{if(we(a.current,Ir),!a.current)return;if(typeof c=="number"){n.go(c);return}let u=ln(c,JSON.parse(s),i,l.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Ne([t,u.pathname])),(l.replace?n.replace:n.push)(u,l.state,l)},[t,n,s,i,e])}var us=x.createContext(null);function ds(e){let t=x.useContext(ke).outlet;return t&&x.createElement(us.Provider,{value:e},t)}function pt(e,{relative:t}={}){let{matches:n}=x.useContext(ke),{pathname:r}=De(),i=JSON.stringify(on(n));return x.useMemo(()=>ln(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function hs(e,t){return Dr(e,t)}function Dr(e,t,n,r,i){re(Ye(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=x.useContext(ve),{matches:a}=x.useContext(ke),o=a[a.length-1],c=o?o.params:{},l=o?o.pathname:"/",u=o?o.pathnameBase:"/",h=o&&o.route;{let C=h&&h.path||"";Lr(l,!h||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let f=De(),p;if(t){let C=typeof t=="string"?We(t):t;re(u==="/"||C.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${C.pathname}" was given in the \`location\` prop.`),p=C}else p=f;let S=p.pathname||"/",v=S;if(u!=="/"){let C=u.replace(/^\//,"").split("/");v="/"+S.replace(/^\//,"").split("/").slice(C.length).join("/")}let T=_r(e,{pathname:v});we(h||T!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),we(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=ys(T&&T.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Ne([u,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:Ne([u,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),a,n,r,i);return t&&w?x.createElement(ht.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},w):w}function ps(){let e=ks(),t=is(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=x.createElement(x.Fragment,null,x.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:s},"ErrorBoundary")," or"," ",x.createElement("code",{style:s},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),n?x.createElement("pre",{style:i},n):null,a)}var fs=x.createElement(ps,null),ms=class extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?x.createElement(ke.Provider,{value:this.props.routeContext},x.createElement(cn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gs({routeContext:e,match:t,children:n}){let r=x.useContext(Ge);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),x.createElement(ke.Provider,{value:e},n)}function ys(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,a=n?.errors;if(a!=null){let l=s.findIndex(u=>u.route.id&&a?.[u.route.id]!==void 0);re(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let o=!1,c=-1;if(n)for(let l=0;l<s.length;l++){let u=s[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=l),u.route.id){let{loaderData:h,errors:f}=n,p=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||p){o=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((l,u,h)=>{let f,p=!1,S=null,v=null;n&&(f=a&&u.route.id?a[u.route.id]:void 0,S=u.route.errorElement||fs,o&&(c<0&&h===0?(Lr("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,v=null):c===h&&(p=!0,v=u.route.hydrateFallbackElement||null)));let T=t.concat(s.slice(0,h+1)),w=()=>{let C;return f?C=S:p?C=v:u.route.Component?C=x.createElement(u.route.Component,null):u.route.element?C=u.route.element:C=l,x.createElement(gs,{match:u,routeContext:{outlet:l,matches:T,isDataRoute:n!=null},children:C})};return n&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?x.createElement(ms,{location:n.location,revalidation:n.revalidation,component:S,error:f,children:w(),routeContext:{outlet:null,matches:T,isDataRoute:!0},unstable_onError:r}):w()},null)}function un(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xs(e){let t=x.useContext(Ge);return re(t,un(e)),t}function bs(e){let t=x.useContext(Ct);return re(t,un(e)),t}function ws(e){let t=x.useContext(ke);return re(t,un(e)),t}function dn(e){let t=ws(e),n=t.matches[t.matches.length-1];return re(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function vs(){return dn("useRouteId")}function ks(){let e=x.useContext(cn),t=bs("useRouteError"),n=dn("useRouteError");return e!==void 0?e:t.errors?.[n]}function Ss(){let{router:e}=xs("useNavigate"),t=dn("useNavigate"),n=x.useRef(!1);return Rr(()=>{n.current=!0}),x.useCallback(async(i,s={})=>{we(n.current,Ir),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var On={};function Lr(e,t,n){!t&&!On[e]&&(On[e]=!0,we(!1,n))}x.memo(Ts);function Ts({routes:e,future:t,state:n,unstable_onError:r}){return Dr(e,void 0,n,r,t)}function Mn({to:e,replace:t,state:n,relative:r}){re(Ye(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=x.useContext(ve);we(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=x.useContext(ke),{pathname:a}=De(),o=Le(),c=ln(e,on(s),a,r==="path"),l=JSON.stringify(c);return x.useEffect(()=>{o(JSON.parse(l),{replace:t,state:n,relative:r})},[o,l,r,t,n]),null}function Es(e){return ds(e.context)}function je(e){re(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Cs({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){re(!Ye(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),o=x.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof n=="string"&&(n=We(n));let{pathname:c="/",search:l="",hash:u="",state:h=null,key:f="default"}=n,p=x.useMemo(()=>{let S=Pe(c,a);return S==null?null:{location:{pathname:S,search:l,hash:u,state:h,key:f},navigationType:r}},[a,c,l,u,h,f,r]);return we(p!=null,`<Router basename="${a}"> is not able to match the URL "${c}${l}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:x.createElement(ve.Provider,{value:o},x.createElement(ht.Provider,{children:t,value:p}))}function _s({children:e,location:t}){return hs(Yt(e),t)}function Yt(e,t=[]){let n=[];return x.Children.forEach(e,(r,i)=>{if(!x.isValidElement(r))return;let s=[...t,i];if(r.type===x.Fragment){n.push.apply(n,Yt(r.props.children,s));return}re(r.type===je,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),re(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Yt(r.props.children,s)),n.push(a)}),n}var wt="get",vt="application/x-www-form-urlencoded";function _t(e){return e!=null&&typeof e.tagName=="string"}function As(e){return _t(e)&&e.tagName.toLowerCase()==="button"}function js(e){return _t(e)&&e.tagName.toLowerCase()==="form"}function Ns(e){return _t(e)&&e.tagName.toLowerCase()==="input"}function Ps(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Is(e,t){return e.button===0&&(!t||t==="_self")&&!Ps(e)}var gt=null;function Rs(){if(gt===null)try{new FormData(document.createElement("form"),0),gt=!1}catch{gt=!0}return gt}var Ds=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rt(e){return e!=null&&!Ds.has(e)?(we(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vt}"`),null):e}function Ls(e,t){let n,r,i,s,a;if(js(e)){let o=e.getAttribute("action");r=o?Pe(o,t):null,n=e.getAttribute("method")||wt,i=Rt(e.getAttribute("enctype"))||vt,s=new FormData(e)}else if(As(e)||Ns(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||o.getAttribute("action");if(r=c?Pe(c,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||wt,i=Rt(e.getAttribute("formenctype"))||Rt(o.getAttribute("enctype"))||vt,s=new FormData(o,e),!Rs()){let{name:l,type:u,value:h}=e;if(u==="image"){let f=l?`${l}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else l&&s.append(l,h)}}else{if(_t(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=wt,r=null,i=vt,a=e}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function hn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Os(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Pe(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Ms(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function qs(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Bs(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let a=await Ms(s,n);return a.links?a.links():[]}return[]}));return Us(r.flat(1).filter(qs).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function qn(e,t,n,r,i,s){let a=(c,l)=>n[l]?c.route.id!==n[l].route.id:!0,o=(c,l)=>n[l].pathname!==c.pathname||n[l].route.path?.endsWith("*")&&n[l].params["*"]!==c.params["*"];return s==="assets"?t.filter((c,l)=>a(c,l)||o(c,l)):s==="data"?t.filter((c,l)=>{let u=r.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(a(c,l)||o(c,l))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Fs(e,t,{includeHydrateFallback:n}={}){return zs(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function zs(e){return[...new Set(e)]}function $s(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Us(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify($s(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function Or(){let e=x.useContext(Ge);return hn(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Hs(){let e=x.useContext(Ct);return hn(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var pn=x.createContext(void 0);pn.displayName="FrameworkContext";function Mr(){let e=x.useContext(pn);return hn(e,"You must render this element inside a <HydratedRouter> element"),e}function Vs(e,t){let n=x.useContext(pn),[r,i]=x.useState(!1),[s,a]=x.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:h}=t,f=x.useRef(null);x.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let v=w=>{w.forEach(C=>{a(C.isIntersecting)})},T=new IntersectionObserver(v,{threshold:.5});return f.current&&T.observe(f.current),()=>{T.disconnect()}}},[e]),x.useEffect(()=>{if(r){let v=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(v)}}},[r]);let p=()=>{i(!0)},S=()=>{i(!1),a(!1)};return n?e!=="intent"?[s,f,{}]:[s,f,{onFocus:tt(o,p),onBlur:tt(c,S),onMouseEnter:tt(l,p),onMouseLeave:tt(u,S),onTouchStart:tt(h,p)}]:[!1,f,{}]}function tt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Qs({page:e,...t}){let{router:n}=Or(),r=x.useMemo(()=>_r(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?x.createElement(Gs,{page:e,matches:r,...t}):null}function Ws(e){let{manifest:t,routeModules:n}=Mr(),[r,i]=x.useState([]);return x.useEffect(()=>{let s=!1;return Bs(e,t,n).then(a=>{s||i(a)}),()=>{s=!0}},[e,t,n]),r}function Gs({page:e,matches:t,...n}){let r=De(),{manifest:i,routeModules:s}=Mr(),{basename:a}=Or(),{loaderData:o,matches:c}=Hs(),l=x.useMemo(()=>qn(e,t,c,i,r,"data"),[e,t,c,i,r]),u=x.useMemo(()=>qn(e,t,c,i,r,"assets"),[e,t,c,i,r]),h=x.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let S=new Set,v=!1;if(t.forEach(w=>{let C=i.routes[w.route.id];!C||!C.hasLoader||(!l.some(A=>A.route.id===w.route.id)&&w.route.id in o&&s[w.route.id]?.shouldRevalidate||C.hasClientLoader?v=!0:S.add(w.route.id))}),S.size===0)return[];let T=Os(e,a,"data");return v&&S.size>0&&T.searchParams.set("_routes",t.filter(w=>S.has(w.route.id)).map(w=>w.route.id).join(",")),[T.pathname+T.search]},[a,o,r,i,l,t,e,s]),f=x.useMemo(()=>Fs(u,i),[u,i]),p=Ws(u);return x.createElement(x.Fragment,null,h.map(S=>x.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),f.map(S=>x.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),p.map(({key:S,link:v})=>x.createElement("link",{key:S,nonce:n.nonce,...v})))}function Ys(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var qr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qr&&(window.__reactRouterVersion="7.9.1")}catch{}function Ks({basename:e,children:t,window:n}){let r=x.useRef();r.current==null&&(r.current=Li({window:n,v5Compat:!0}));let i=r.current,[s,a]=x.useState({action:i.action,location:i.location}),o=x.useCallback(c=>{x.startTransition(()=>a(c))},[a]);return x.useLayoutEffect(()=>i.listen(o),[i,o]),x.createElement(Cs,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var Br=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fr=x.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:o,target:c,to:l,preventScrollReset:u,viewTransition:h,...f},p){let{basename:S}=x.useContext(ve),v=typeof l=="string"&&Br.test(l),T,w=!1;if(typeof l=="string"&&v&&(T=l,qr))try{let k=new URL(window.location.href),N=l.startsWith("//")?new URL(k.protocol+l):new URL(l),j=Pe(N.pathname,S);N.origin===k.origin&&j!=null?l=j+N.search+N.hash:w=!0}catch{we(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=ls(l,{relative:i}),[A,L,M]=Vs(r,f),y=ea(l,{replace:a,state:o,target:c,preventScrollReset:u,relative:i,viewTransition:h});function b(k){t&&t(k),k.defaultPrevented||y(k)}let E=x.createElement("a",{...f,...M,href:T||C,onClick:w||s?t:b,ref:Ys(p,L),target:c,"data-discover":!v&&n==="render"?"true":void 0});return A&&!v?x.createElement(x.Fragment,null,E,x.createElement(Qs,{page:C})):E});Fr.displayName="Link";var Js=x.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:o,children:c,...l},u){let h=pt(a,{relative:l.relative}),f=De(),p=x.useContext(Ct),{navigator:S,basename:v}=x.useContext(ve),T=p!=null&&sa(h)&&o===!0,w=S.encodeLocation?S.encodeLocation(h).pathname:h.pathname,C=f.pathname,A=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(C=C.toLowerCase(),A=A?A.toLowerCase():null,w=w.toLowerCase()),A&&v&&(A=Pe(A,v)||A);const L=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let M=C===w||!i&&C.startsWith(w)&&C.charAt(L)==="/",y=A!=null&&(A===w||!i&&A.startsWith(w)&&A.charAt(w.length)==="/"),b={isActive:M,isPending:y,isTransitioning:T},E=M?t:void 0,k;typeof r=="function"?k=r(b):k=[r,M?"active":null,y?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let N=typeof s=="function"?s(b):s;return x.createElement(Fr,{...l,"aria-current":E,className:k,ref:u,style:N,to:a,viewTransition:o},typeof c=="function"?c(b):c)});Js.displayName="NavLink";var Xs=x.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:a=wt,action:o,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:h,...f},p)=>{let S=ra(),v=ia(o,{relative:l}),T=a.toLowerCase()==="get"?"get":"post",w=typeof o=="string"&&Br.test(o),C=A=>{if(c&&c(A),A.defaultPrevented)return;A.preventDefault();let L=A.nativeEvent.submitter,M=L?.getAttribute("formmethod")||a;S(L||A.currentTarget,{fetcherKey:t,method:M,navigate:n,replace:i,state:s,relative:l,preventScrollReset:u,viewTransition:h})};return x.createElement("form",{ref:p,method:T,action:v,onSubmit:r?c:C,...f,"data-discover":!w&&e==="render"?"true":void 0})});Xs.displayName="Form";function Zs(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zr(e){let t=x.useContext(Ge);return re(t,Zs(e)),t}function ea(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=Le(),c=De(),l=pt(e,{relative:s});return x.useCallback(u=>{if(Is(u,t)){u.preventDefault();let h=n!==void 0?n:ut(c)===ut(l);o(e,{replace:h,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[c,o,l,n,r,t,e,i,s,a])}var ta=0,na=()=>`__${String(++ta)}__`;function ra(){let{router:e}=zr("useSubmit"),{basename:t}=x.useContext(ve),n=vs();return x.useCallback(async(r,i={})=>{let{action:s,method:a,encType:o,formData:c,body:l}=Ls(r,t);if(i.navigate===!1){let u=i.fetcherKey||na();await e.fetch(u,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:l,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function ia(e,{relative:t}={}){let{basename:n}=x.useContext(ve),r=x.useContext(ke);re(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...pt(e||".",{relative:t})},a=De();if(e==null){s.search=a.search;let o=new URLSearchParams(s.search),c=o.getAll("index");if(c.some(u=>u==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let u=o.toString();s.search=u?`?${u}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Ne([n,s.pathname])),ut(s)}function sa(e,{relative:t}={}){let n=x.useContext(Pr);re(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=zr("useViewTransitionState"),i=pt(e,{relative:t});if(!n.isTransitioning)return!1;let s=Pe(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Pe(n.nextLocation.pathname,r)||n.nextLocation.pathname;return St(i.pathname,a)!=null||St(i.pathname,s)!=null}function aa(e,t,n={}){const{expires:r,maxAge:i,path:s="/",domain:a,secure:o=window.location.protocol==="https:",sameSite:c="lax"}=n;let l=`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;r&&(l+=`; expires=${r.toUTCString()}`),i!==void 0&&(l+=`; max-age=${i}`),l+=`; path=${s}`,a&&(l+=`; domain=${a}`),o&&(l+="; secure"),l+=`; samesite=${c}`;try{document.cookie=l}catch(u){console.warn("Failed to set cookie:",u)}}function oa(e){try{const t=encodeURIComponent(e),n=document.cookie.split(";");for(const r of n){const[i,s]=r.trim().split("=");if(i===t)return decodeURIComponent(s)}return null}catch(t){return console.warn("Failed to get cookie:",t),null}}const $r="ikb_theme_preference",la=3600*24*365;function ca(e){aa($r,e,{maxAge:la,path:"/",sameSite:"lax"})}function Dt(){const e=oa($r);return e==="light"||e==="dark"?e:null}const Ur={currentPhase:1,currentStep:1,currentTacticIndex:0,responses:{},selectedTechniques:{},selectedSoftware:{tools:{},malware:{},groups:{}},evidenceResponses:{},evidenceCollection:{},timestamp:Date.now(),theme:"dark"},Bn="incident_knowledge_base_react",ua=(e,t)=>{switch(t.type){case"SET_PHASE":return{...e,currentPhase:t.payload,timestamp:Date.now()};case"SET_STEP":return{...e,currentStep:t.payload,timestamp:Date.now()};case"SET_TACTIC_INDEX":return{...e,currentTacticIndex:t.payload,timestamp:Date.now()};case"SET_RESPONSES":return{...e,responses:t.payload,timestamp:Date.now()};case"UPDATE_RESPONSE":return{...e,responses:{...e.responses,[t.payload.key]:t.payload.value},timestamp:Date.now()};case"SET_SELECTED_TECHNIQUES":return{...e,selectedTechniques:t.payload,timestamp:Date.now()};case"TOGGLE_TECHNIQUE":const{tacticId:n,techniqueId:r}=t.payload,i=e.selectedTechniques[n]||{},s={...i,[r]:!i[r]};return{...e,selectedTechniques:{...e.selectedTechniques,[n]:s},timestamp:Date.now()};case"UPDATE_TECHNIQUE_SELECTION":const{tacticId:a,techniqueId:o,selected:c}=t.payload,u={...e.selectedTechniques[a]||{},[o]:c};return{...e,selectedTechniques:{...e.selectedTechniques,[a]:u},timestamp:Date.now()};case"SET_SELECTED_SOFTWARE":return{...e,selectedSoftware:t.payload,timestamp:Date.now()};case"TOGGLE_SOFTWARE":const{category:h,id:f}=t.payload;return{...e,selectedSoftware:{...e.selectedSoftware,[h]:{...e.selectedSoftware[h],[f]:!e.selectedSoftware[h][f]}},timestamp:Date.now()};case"SET_EVIDENCE_RESPONSES":return{...e,evidenceResponses:t.payload,timestamp:Date.now()};case"UPDATE_EVIDENCE_RESPONSE":return{...e,evidenceResponses:{...e.evidenceResponses,[t.payload.key]:t.payload.value},timestamp:Date.now()};case"SET_EVIDENCE_COLLECTION":return{...e,evidenceCollection:t.payload,timestamp:Date.now()};case"ADD_EVIDENCE_ITEM":const{questionId:p}=t.payload;return{...e,evidenceCollection:{...e.evidenceCollection,[p]:[...e.evidenceCollection[p]||[],t.payload]},timestamp:Date.now()};case"UPDATE_EVIDENCE_ITEM":const{id:S,updates:v}=t.payload,T={...e.evidenceCollection};return Object.keys(T).forEach(A=>{const L=T[A].findIndex(M=>M.id===S);L!==-1&&(T[A]=[...T[A]],T[A][L]={...T[A][L],...v})}),{...e,evidenceCollection:T,timestamp:Date.now()};case"REMOVE_EVIDENCE_ITEM":const{questionId:w,itemId:C}=t.payload;return{...e,evidenceCollection:{...e.evidenceCollection,[w]:(e.evidenceCollection[w]||[]).filter(A=>A.id!==C)},timestamp:Date.now()};case"SET_THEME":return{...e,theme:t.payload,timestamp:Date.now()};case"TOGGLE_THEME":return{...e,theme:e.theme==="dark"?"light":"dark",timestamp:Date.now()};case"RESET_ALL":return{...Ur,timestamp:Date.now()};case"LOAD_STATE":return t.payload;default:return e}},Hr=x.createContext(void 0),Oe=()=>{const e=x.useContext(Hr);if(!e)throw new Error("useAppContext must be used within an AppProvider");return e},da=({children:e})=>{const[t,n]=x.useReducer(ua,Ur);return x.useEffect(()=>{try{const r=localStorage.getItem(Bn);if(console.log("Loading state from localStorage:",r?"Found saved state":"No saved state"),r){const i=JSON.parse(r);console.log("Loaded state:",i);let s=i.theme;s||(s=Dt()||"dark",console.log("Theme not found in localStorage, loaded from cookie or default:",s));const a={...i,theme:s};n({type:"LOAD_STATE",payload:a})}else{const i=Dt();i&&(console.log("No localStorage found, but found theme in cookie:",i),n({type:"SET_THEME",payload:i}))}}catch(r){console.error("Failed to load state from localStorage:",r);try{const i=Dt();i&&(console.log("localStorage failed, but found theme in cookie:",i),n({type:"SET_THEME",payload:i}))}catch(i){console.error("Failed to load theme from cookie:",i)}}},[]),x.useEffect(()=>{try{console.log("Saving state to localStorage:",t),localStorage.setItem(Bn,JSON.stringify(t))}catch(r){console.error("Failed to save state to localStorage:",r)}try{ca(t.theme),console.log("Saved theme to cookie:",t.theme)}catch(r){console.error("Failed to save theme to cookie:",r)}try{console.log("Applying theme:",t.theme),t.theme==="light"?(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light"),console.log("Applied light theme class")):(document.documentElement.classList.remove("light"),document.documentElement.classList.add("dark"),console.log("Applied dark theme class"))}catch(r){console.error("Failed to apply theme:",r)}},[t]),d.jsx(Hr.Provider,{value:{state:t,dispatch:n},children:e})},ha=()=>{const{state:e,dispatch:t}=Oe(),[n,r]=x.useState(!1),[i,s]=x.useState(null),a=()=>{r(!n)},o=()=>{r(!1)};x.useEffect(()=>{try{const f=localStorage.getItem("incident_knowledge_base_react");if(f){const p=Math.round(f.length*2/1024);s({hasData:!0,size:p})}else s({hasData:!1,size:0})}catch(f){console.error("Error checking localStorage:",f),s(null)}},[e]);const c=()=>{confirm("Are you sure you want to reset all progress? This action cannot be undone.")&&(t({type:"RESET_ALL"}),o())},l=()=>{try{const f=JSON.stringify(e,null,2),p=new Blob([f],{type:"application/json"}),S=URL.createObjectURL(p),v=document.createElement("a");v.href=S,v.download=`ikb-data-${new Date().toISOString().split("T")[0]}.json`,v.click(),URL.revokeObjectURL(S),o()}catch(f){console.error("Error exporting data:",f),alert("Failed to export data. Check console for details.")}},u=()=>{console.log("Current state:",e),console.log("localStorage data:",localStorage.getItem("incident_knowledge_base_react")),alert("Storage data logged to console. Check browser developer tools."),o()},h=()=>{console.log("Toggle theme clicked. Current theme:",e.theme),t({type:"TOGGLE_THEME"}),o()};return d.jsxs("div",{className:"header card",children:[d.jsx("h1",{children:"ðŸ›¡ï¸ Incident Knowledge Recorder"}),d.jsxs("div",{className:"header-menu",children:[d.jsx("div",{className:"storage-status",children:i&&d.jsx("span",{className:"storage-indicator",title:"Data persistence status",children:i.hasData?`ðŸ’¾ ${i.size}KB saved`:"ðŸ’¾ No saved data"})}),d.jsx("button",{className:"menu-toggle",onClick:a,children:d.jsx("span",{className:"menu-icon",children:"â‹®"})}),d.jsxs("div",{className:`dropdown-menu ${n?"":"hidden"}`,children:[d.jsx("button",{onClick:h,className:"menu-item",children:e.theme==="dark"?"â˜€ï¸ Light Mode":"ðŸŒ™ Dark Mode"}),d.jsx("div",{className:"menu-divider"}),d.jsx("button",{onClick:u,className:"menu-item",children:"ðŸ” View Storage Data"}),d.jsx("button",{onClick:l,className:"menu-item",children:"ðŸ“¥ Export Data"}),d.jsx("button",{onClick:c,className:"menu-item",children:"ðŸ”„ Reset All"})]})]})]})},pa=()=>{const{state:e}=Oe(),t=[{number:1,label:"Context"},{number:2,label:"Techniques"},{number:3,label:"Software"},{number:4,label:"Evidence"},{number:5,label:"Summary"}];return d.jsx("div",{className:"phase-progress-container",children:d.jsx("div",{className:"phase-steps",children:t.map((n,r)=>d.jsxs(Ri.Fragment,{children:[d.jsxs("div",{className:`phase-step ${e.currentPhase>=n.number?"active":""} ${e.currentPhase===n.number?"current":""}`,children:[d.jsx("div",{className:"phase-number",children:n.number}),d.jsx("div",{className:"phase-label",children:n.label})]}),r<t.length-1&&d.jsx("div",{className:`phase-connector ${e.currentPhase>n.number?"completed":""}`})]},n.number))})})},fa=()=>d.jsxs("div",{className:"container",children:[d.jsx(ha,{}),d.jsx(pa,{}),d.jsx("main",{className:"main-content",children:d.jsx(Es,{})})]});class ze{static getMaxAccessiblePhase(t){return!t.responses||Object.keys(t.responses).length===0||!this.isPhase1Complete(t)?1:this.isPhase2Complete(t)?this.isPhase3Complete(t)?this.isPhase4Complete(t)?5:4:3:2}static canAccessPhase(t,n){const r=this.getMaxAccessiblePhase(t);return n<=r}static getRedirectPhase(t,n){return this.canAccessPhase(t,n)?n:this.getMaxAccessiblePhase(t)}static isPhase1Complete(t){return!t.responses||Object.keys(t.responses).length===0?!1:Object.values(t.responses).filter(i=>typeof i=="string"?i.trim().length>0:i!=null).length>=3}static isPhase2Complete(t){if(!t.selectedTechniques)return!1;const n=Object.keys(t.selectedTechniques);return n.length===0?!1:n.some(r=>{const i=t.selectedTechniques[r]||{};return Object.values(i).some(s=>s)})}static isPhase3Complete(t){return!!(t.selectedSoftware&&Object.keys(t.selectedSoftware).length>0)}static isPhase4Complete(t){return!0}static getAccessDeniedReason(t,n){const r=this.getMaxAccessiblePhase(t);if(n<=r)return"";switch(n){case 2:return"Please answer at least 3 questions in Phase 1 before proceeding to Phase 2.";case 3:return"Please select at least one technique in Phase 2 before proceeding to Phase 3.";case 4:return"Please make your software/group selections in Phase 3 before proceeding to Phase 4.";case 5:return"Please complete Phase 4 (Evidence Collection) before proceeding to Phase 5.";default:return`Please complete the previous phases first. You can currently access up to Phase ${r}.`}}}const nt=({requiredPhase:e,children:t})=>{const{state:n,dispatch:r}=Oe(),i=Le(),[s,a]=x.useState(!1);if(x.useEffect(()=>{if(ze.canAccessPhase(n,e))a(!1),n.currentPhase!==e&&r({type:"SET_PHASE",payload:e});else{const l=ze.getRedirectPhase(n,e);a(!0),r({type:"SET_PHASE",payload:l});const u=setTimeout(()=>{i(`/phase/${l}`,{replace:!0})},100);return console.warn(`Access to Phase ${e} denied. Redirected to Phase ${l}. `+ze.getAccessDeniedReason(n,e)),()=>clearTimeout(u)}},[n.responses,n.selectedTechniques,n.selectedSoftware,n.evidenceResponses,e,r,i]),s){const c=ze.getRedirectPhase(n,e),l=ze.getAccessDeniedReason(n,e);return d.jsx("div",{className:"phase-guard-loading",children:d.jsxs("div",{className:"loading-container",children:[d.jsx("div",{className:"spinner"}),d.jsxs("div",{className:"loading-content",children:[d.jsxs("p",{className:"loading-title",children:["Redirecting to Phase ",c,"..."]}),d.jsx("p",{className:"loading-reason",children:l})]})]})})}return ze.canAccessPhase(n,e)?d.jsx(d.Fragment,{children:t}):null},ma=e=>{if(e.startsWith("/src/data/")){const t="/ikb-demo/";return(t.endsWith("/")?t.slice(0,-1):t)+e}return e.startsWith("/"),e},ga=e=>{const[t,n]=x.useState(null),[r,i]=x.useState(!0),[s,a]=x.useState(null);return x.useEffect(()=>{(async()=>{try{i(!0),a(null);const c=ma(e),l=await fetch(c);if(!l.ok)throw new Error(`Failed to load data from ${c}: ${l.statusText}`);const u=await l.json();n(u)}catch(c){a(c instanceof Error?c.message:"Unknown error occurred")}finally{i(!1)}})()},[e]),{data:t,loading:r,error:s}};class Re{static shouldShowQuestion(t,n){const r=t.show_when||t.conditional;return r?this.evaluateCondition(r,n):!0}static evaluateCondition(t,n){if(t.and&&Array.isArray(t.and))return t.and.every(o=>this.evaluateCondition(o,n));if(t.or&&Array.isArray(t.or))return t.or.some(o=>this.evaluateCondition(o,n));const r=t.question_id||t.question;if(!r)return console.warn("Conditional logic missing question reference:",t),!0;const i=t.operator||t.condition||"equals",s=t.value,a=n[r];return this.evaluateSimpleCondition(a,s,i)}static evaluateSimpleCondition(t,n,r){if(t==null)switch(r){case"not_exists":return!0;case"exists":return!1;case"not_equals":return n!=null;default:return!1}switch(r){case"equals":return Array.isArray(n)?n.includes(t):t===n;case"not_equals":return Array.isArray(n)?!n.includes(t):t!==n;case"contains":return Array.isArray(t)?Array.isArray(n)?n.some(c=>t.includes(c)):t.includes(n):typeof t=="string"&&typeof n=="string"?t.toLowerCase().includes(n.toLowerCase()):!1;case"not_contains":return Array.isArray(t)?Array.isArray(n)?!n.some(c=>t.includes(c)):!t.includes(n):typeof t=="string"&&typeof n=="string"?!t.toLowerCase().includes(n.toLowerCase()):!0;case"greater_than":const i=Number(t),s=Number(n);return isNaN(i)||isNaN(s)?!1:i>s;case"less_than":const a=Number(t),o=Number(n);return isNaN(a)||isNaN(o)?!1:a<o;case"exists":return t!=null&&t!=="";case"not_exists":return t==null||t==="";case"in":return Array.isArray(n)?n.includes(t):t===n;case"not_in":return Array.isArray(n)?!n.includes(t):t!==n;default:return console.warn("Unknown conditional operator:",r),!1}}static getQuestionDependencies(t){const n=t.show_when||t.conditional;return n?this.extractQuestionIds(n):[]}static extractQuestionIds(t){const n=[];t.and&&Array.isArray(t.and)&&t.and.forEach(i=>{n.push(...this.extractQuestionIds(i))}),t.or&&Array.isArray(t.or)&&t.or.forEach(i=>{n.push(...this.extractQuestionIds(i))});const r=t.question_id||t.question;return r&&n.push(r),[...new Set(n)]}static buildDependencyGraph(t){const n=new Map;return t.forEach(r=>{const i=this.getQuestionDependencies(r);n.set(r.id,i)}),n}static detectCircularDependencies(t){const n=this.buildDependencyGraph(t),r=new Set,i=new Set,s=[],a=(o,c)=>{if(i.has(o)){const u=c.indexOf(o);u!==-1&&s.push(c.slice(u).concat(o));return}if(r.has(o))return;r.add(o),i.add(o),(n.get(o)||[]).forEach(u=>{a(u,[...c,o])}),i.delete(o)};return t.forEach(o=>{r.has(o.id)||a(o.id,[])}),s}static getVisibleQuestions(t,n){return t.filter(r=>this.shouldShowQuestion(r,n))}static getVisibleQuestionsForPage(t,n){return this.getVisibleQuestions(t,n)}static validateRequiredQuestions(t,n){const r=this.getVisibleQuestions(t,n),i=[];return r.forEach(s=>{if(s.required){const a=n[s.id];(a==null||a===""||Array.isArray(a)&&a.length===0)&&i.push(s.id)}}),{valid:i.length===0,missingQuestions:i}}static getProgressInfo(t,n){const r=this.getVisibleQuestions(t,n),i=r.filter(c=>c.required),s=r.filter(c=>{const l=n[c.id];return l!=null&&l!==""&&!(Array.isArray(l)&&l.length===0)}),a=i.filter(c=>{const l=n[c.id];return l!=null&&l!==""&&!(Array.isArray(l)&&l.length===0)}),o=r.length>0?Math.round(s.length/r.length*100):0;return{totalQuestions:r.length,answeredQuestions:s.length,requiredQuestions:i.length,answeredRequiredQuestions:a.length,percentage:o}}static getMandatoryProgressInfo(t,n){const i=this.getVisibleQuestions(t,n).filter(o=>o.required),s=i.filter(o=>{const c=n[o.id];return c!=null&&c!==""&&!(Array.isArray(c)&&c.length===0)}),a=i.length>0?Math.round(s.length/i.length*100):100;return{totalQuestions:i.length,answeredQuestions:s.length,percentage:a}}}const ya=({page:e,responses:t,onResponseChange:n,validationResults:r={},disabled:i=!1,className:s="",showSummary:a=!0})=>{const o=Re.getVisibleQuestionsForPage(e.questions,t),c=Re.getProgressInfo(o,t),l=(h,f)=>{n(h,f)},u=h=>{const f=r[h.id];if(!f||f.length===0)return;const p=f.filter(S=>S.severity==="error").map(S=>S.message);return p.length>0?p[0]:void 0};return o.length===0?d.jsxs("div",{className:`question-page empty-page ${s}`,children:[d.jsxs("div",{className:"page-header",children:[d.jsx("h2",{children:e.title}),e.description&&d.jsx("p",{className:"page-description",children:e.description})]}),d.jsx("div",{className:"empty-page-message",children:d.jsx("p",{children:"No questions are currently visible based on your previous responses."})})]}):d.jsxs("div",{className:`question-page ${s}`,children:[d.jsx("div",{className:"page-header",children:d.jsx("h2",{children:e.title})}),d.jsx("div",{className:"questions-container",children:o.map((h,f)=>d.jsx("div",{className:"question-wrapper",children:d.jsx(Er,{question:h,value:t[h.id],onChange:p=>l(h.id,p),error:u(h),disabled:i,showHint:!0,className:`page-question ${h.required?"required-question":""}`,testId:`page-${e.id}-question-${h.id}`})},h.id))}),a&&o.length>0&&d.jsx("div",{className:"page-summary",children:d.jsxs("div",{className:"completion-summary",children:[d.jsx("h3",{children:"Page Summary"}),d.jsxs("ul",{children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Total Questions:"})," ",c.totalQuestions]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Answered:"})," ",c.answeredQuestions]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Required Questions:"})," ",c.requiredQuestions]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Required Completed:"})," ",c.answeredRequiredQuestions]})]})]})})]})};class Fn{static validateQuestion(t,n){const r=[];if(t.required&&this.isEmpty(n))return r.push({field:t.id,message:`${t.question} is required`,code:"REQUIRED",severity:"error"}),r;if(this.isEmpty(n))return r;switch(t.type){case"text":case"text_short":case"textarea":r.push(...this.validateText(t,n));break;case"number":r.push(...this.validateNumber(t,n));break;case"single_select":r.push(...this.validateSingleSelect(t,n));break;case"multi_select":r.push(...this.validateMultiSelect(t,n));break;case"cve":case"cve_input":r.push(...this.validateCVE(t,n));break;case"datetime":case"datetime_range":r.push(...this.validateDateTime(t,n));break;case"internet_asset":r.push(...this.validateInternetAssets(t,n));break;case"boolean":r.push(...this.validateBoolean(t,n));break;case"scale":r.push(...this.validateScale(t,n));break}return t.validation&&r.push(...this.validateCustomRules(t,n)),r}static isEmpty(t){return t==null?!0:typeof t=="string"?t.trim()==="":Array.isArray(t)?t.length===0:typeof t=="object"?Object.keys(t).length===0:!1}static validateText(t,n){const r=[],i=t.validation;if(!i)return r;const s=String(n);if(i.min_length&&s.length<i.min_length&&r.push({field:t.id,message:`Minimum ${i.min_length} characters required`,code:"MIN_LENGTH",severity:"error"}),i.max_length&&s.length>i.max_length&&r.push({field:t.id,message:`Maximum ${i.max_length} characters allowed`,code:"MAX_LENGTH",severity:"error"}),i.pattern)try{new RegExp(i.pattern).test(s)||r.push({field:t.id,message:i.error_message||"Invalid format",code:"PATTERN_MISMATCH",severity:"error"})}catch{console.error("Invalid regex pattern:",i.pattern)}return r}static validateNumber(t,n){const r=[],i=t.validation,s=Number(n);return isNaN(s)?(r.push({field:t.id,message:"Must be a valid number",code:"INVALID_NUMBER",severity:"error"}),r):(i?.min_value!==void 0&&s<i.min_value&&r.push({field:t.id,message:`Minimum value is ${i.min_value}`,code:"MIN_VALUE",severity:"error"}),i?.max_value!==void 0&&s>i.max_value&&r.push({field:t.id,message:`Maximum value is ${i.max_value}`,code:"MAX_VALUE",severity:"error"}),r)}static validateSingleSelect(t,n){const r=[];return t.options?(t.options.map(s=>s.value).includes(n)||r.push({field:t.id,message:"Invalid selection",code:"INVALID_OPTION",severity:"error"}),r):(r.push({field:t.id,message:"No options defined for this question",code:"NO_OPTIONS",severity:"error"}),r)}static validateMultiSelect(t,n){const r=[];if(!Array.isArray(n))return r.push({field:t.id,message:"Must be an array of selections",code:"INVALID_ARRAY",severity:"error"}),r;if(!t.options)return r.push({field:t.id,message:"No options defined for this question",code:"NO_OPTIONS",severity:"error"}),r;const i=t.options.map(a=>a.value),s=n.filter(a=>!i.includes(a));return s.length>0&&r.push({field:t.id,message:`Invalid selections: ${s.join(", ")}`,code:"INVALID_SELECTIONS",severity:"error"}),r}static validateCVE(t,n){const r=[];if(!Array.isArray(n))return r.push({field:t.id,message:"CVE data must be an array",code:"INVALID_CVE_ARRAY",severity:"error"}),r;const i=/^CVE-\d{4}-\d{4,}$/i;n.forEach(o=>{o.type==="cve"&&!i.test(o.id)&&r.push({field:t.id,message:`Invalid CVE format: ${o.id}`,code:"INVALID_CVE_FORMAT",severity:"error"}),o.type==="0-day"&&(!o.title||!o.description)&&r.push({field:t.id,message:"0-day vulnerabilities must have title and description",code:"INCOMPLETE_ZERODAY",severity:"error"})});const s=n.map(o=>o.id),a=s.filter((o,c)=>s.indexOf(o)!==c);return a.length>0&&r.push({field:t.id,message:`Duplicate CVE entries: ${a.join(", ")}`,code:"DUPLICATE_CVES",severity:"warning"}),r}static validateDateTime(t,n){const r=[];if(typeof n!="object"||n===null)return r.push({field:t.id,message:"Invalid datetime data",code:"INVALID_DATETIME_OBJECT",severity:"error"}),r;if(n.special_value)return["unknown","n/a","ongoing","estimated","approximate"].includes(n.special_value)||r.push({field:t.id,message:"Invalid special datetime value",code:"INVALID_SPECIAL_VALUE",severity:"error"}),r;if(n.start)try{const i=new Date(n.start);isNaN(i.getTime())&&r.push({field:t.id,message:"Invalid start date format",code:"INVALID_START_DATE",severity:"error"})}catch{r.push({field:t.id,message:"Invalid start date format",code:"INVALID_START_DATE",severity:"error"})}if(n.end)try{const i=new Date(n.end);if(isNaN(i.getTime())&&r.push({field:t.id,message:"Invalid end date format",code:"INVALID_END_DATE",severity:"error"}),n.start){const s=new Date(n.start);!isNaN(s.getTime())&&!isNaN(i.getTime())&&i<s&&r.push({field:t.id,message:"End date must be after start date",code:"INVALID_DATE_RANGE",severity:"error"})}}catch{r.push({field:t.id,message:"Invalid end date format",code:"INVALID_END_DATE",severity:"error"})}return r}static validateInternetAssets(t,n){const r=[];if(!Array.isArray(n))return r.push({field:t.id,message:"Internet assets must be an array",code:"INVALID_ASSETS_ARRAY",severity:"error"}),r;n.forEach((a,o)=>{if(!a.id||!a.type||!a.value||!a.classification){r.push({field:t.id,message:`Asset ${o+1}: Missing required fields`,code:"INCOMPLETE_ASSET",severity:"error"});return}const c=this.validateAssetValue(a.value,a.type);c&&r.push({field:t.id,message:`Asset "${a.value}": ${c}`,code:"INVALID_ASSET_VALUE",severity:"error"}),["attacker","victim","unknown"].includes(a.classification)||r.push({field:t.id,message:`Asset "${a.value}": Invalid classification`,code:"INVALID_CLASSIFICATION",severity:"error"}),["low","medium","high"].includes(a.confidence)||r.push({field:t.id,message:`Asset "${a.value}": Invalid confidence level`,code:"INVALID_CONFIDENCE",severity:"error"})});const i=n.map(a=>a.value.toLowerCase()),s=i.filter((a,o)=>i.indexOf(a)!==o);return s.length>0&&r.push({field:t.id,message:`Duplicate assets: ${s.join(", ")}`,code:"DUPLICATE_ASSETS",severity:"warning"}),r}static validateAssetValue(t,n){const r={ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$|^::1$|^::$/,cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\/(?:[0-9]|[1-2][0-9]|3[0-2])$/,domain:/^[a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?)*$/,email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,"user-account":/^@?[\w\.-]+$/},i=r[n];if(i&&!i.test(t))switch(n){case"ipv4":return"Invalid IPv4 address format";case"ipv6":return"Invalid IPv6 address format";case"cidr":return"Invalid CIDR notation format";case"domain":case"fqdn":return"Invalid domain format";case"email":return"Invalid email format";case"user-account":return"Invalid user account format";default:return"Invalid format"}if(n==="ip-range"){const s=t.split("-");if(s.length!==2)return"IP range must be in format: IP1-IP2";const[a,o]=s.map(c=>c.trim());if(!r.ipv4.test(a)||!r.ipv4.test(o))return"Invalid IP range format"}return null}static validateBoolean(t,n){const r=[];return typeof n!="boolean"&&r.push({field:t.id,message:"Value must be true or false",code:"INVALID_BOOLEAN",severity:"error"}),r}static validateScale(t,n){const r=[],i=t.validation,s=Number(n);if(isNaN(s))return r.push({field:t.id,message:"Scale value must be a number",code:"INVALID_SCALE_NUMBER",severity:"error"}),r;const a=i?.min_value||1,o=i?.max_value||10;return(s<a||s>o)&&r.push({field:t.id,message:`Scale value must be between ${a} and ${o}`,code:"SCALE_OUT_OF_RANGE",severity:"error"}),r}static validateCustomRules(t,n){const r=[],i=t.validation;if(!i)return r;if(i.custom_validator)try{console.log(`Custom validator "${i.custom_validator}" for question ${t.id}`)}catch{r.push({field:t.id,message:i.error_message||"Custom validation failed",code:"CUSTOM_VALIDATION_ERROR",severity:"error"})}return r}static hasErrors(t){return Object.values(t).some(n=>n.some(r=>r.severity==="error"))}static getErrorMessages(t){const n=[];return Object.values(t).forEach(r=>{r.forEach(i=>{i.severity==="error"&&n.push(i.message)})}),n}static validateForm(t,n){const r={};return t.forEach(i=>{const s=n[i.id];r[i.id]=this.validateQuestion(i,s)}),r}}function xe(e="instant"){try{window.scrollTo({top:0,left:0,behavior:e})}catch{window.scrollTo(0,0)}}const xa=()=>{const{state:e,dispatch:t}=Oe(),n=Le(),{data:r,loading:i,error:s}=ga("/src/data/phase1-config.json"),[a,o]=x.useState(0),[c,l]=x.useState({}),[u,h]=x.useState(!1),f=x.useMemo(()=>r?.pages||[],[r]),p=x.useMemo(()=>f[a],[f,a]),S=x.useMemo(()=>{if(!r)return{percentage:0,answeredQuestions:0,totalQuestions:0};const E=f.flatMap(N=>N.questions);return Re.getMandatoryProgressInfo(E,e.responses)},[f,e.responses,r]);x.useEffect(()=>{},[e.responses]),x.useEffect(()=>{xe()},[a]),x.useEffect(()=>{if(p&&u){const E=Re.getVisibleQuestionsForPage(p.questions,e.responses),k=Fn.validateForm(E,e.responses);l(k)}},[p,e.responses,u]);const v=(E,k)=>{t({type:"UPDATE_RESPONSE",payload:{key:E,value:k}}),c[E]&&l(N=>({...N,[E]:[]}))},T=E=>E===0||E===a||E<a?!0:E===a+1?w:!1,w=x.useMemo(()=>{if(!p)return!1;const E=Re.getVisibleQuestionsForPage(p.questions,e.responses);return Re.validateRequiredQuestions(E,e.responses).valid},[p,e.responses]),C=()=>{if(!p)return!1;const E=Re.getVisibleQuestionsForPage(p.questions,e.responses);if(!Re.validateRequiredQuestions(E,e.responses).valid){h(!0);const N=Fn.validateForm(E,e.responses);return l(N),!1}return!0},A=()=>{C()&&(a<f.length-1?(o(a+1),h(!1)):(t({type:"SET_PHASE",payload:2}),n("/phase/2"),xe()))},L=()=>{a>0&&(o(a-1),h(!1))},M=E=>{T(E)&&(o(E),h(!1))},y=a===f.length-1,b=!p||w;return i?d.jsx("div",{className:"phase1-questionnaire loading",children:d.jsxs("div",{className:"loading-container",children:[d.jsx("div",{className:"spinner"}),d.jsx("p",{className:"loading-text",children:"Loading questionnaire..."})]})}):s?d.jsx("div",{className:"phase1-questionnaire error",children:d.jsxs("div",{className:"error-message",children:[d.jsx("h2",{children:"Error Loading Questionnaire"}),d.jsx("p",{children:s}),d.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]})}):!r||f.length===0?d.jsx("div",{className:"phase1-questionnaire error",children:d.jsxs("div",{className:"error-message",children:[d.jsx("h2",{children:"No Questionnaire Data"}),d.jsx("p",{children:"The questionnaire configuration could not be loaded."})]})}):d.jsxs("div",{className:"phase1-questionnaire",children:[d.jsx("div",{className:"questionnaire-header",children:d.jsx("div",{className:"header-content",children:d.jsx("div",{className:"progress-bar",children:d.jsx("div",{className:"progress-fill",style:{width:`${S.percentage}%`}})})})}),d.jsx("div",{className:"questionnaire-navigation",children:d.jsx("div",{className:"page-tabs",children:f.map((E,k)=>d.jsxs("button",{className:`page-tab ${k===a?"active":""} ${T(k)?"accessible":"disabled"}`,onClick:()=>M(k),disabled:!T(k),children:[d.jsx("span",{className:"page-number",children:k+1}),d.jsx("span",{className:"page-title",children:E.title})]},E.id))})}),d.jsx("div",{className:"questionnaire-content",children:p&&d.jsx(ya,{page:p,responses:e.responses,onResponseChange:v,validationResults:c,className:"phase1-page",showSummary:!1})}),d.jsxs("div",{className:"questionnaire-controls",children:[d.jsxs("div",{className:"controls-content",children:[d.jsx("button",{className:"nav-button previous",onClick:L,disabled:a===0,children:"â† Previous"}),d.jsxs("div",{className:"page-indicator",children:["Page ",a+1," of ",f.length]}),d.jsx("button",{className:`nav-button next ${y?"complete":""}`,onClick:A,disabled:!b,children:y?"Complete Phase 1 â†’":"Next â†’"})]}),!b&&u&&d.jsx("div",{className:"validation-summary",children:d.jsx("p",{children:"Please complete all required questions before proceeding."})})]})]})};function ba(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const wa=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,va=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ka={};function zn(e,t){return(ka.jsx?va:wa).test(e)}const Sa=/[ \t\n\f\r]/g;function Ta(e){return typeof e=="object"?e.type==="text"?$n(e.value):!1:$n(e)}function $n(e){return e.replace(Sa,"")===""}class ft{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}ft.prototype.normal={};ft.prototype.property={};ft.prototype.space=void 0;function Vr(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new ft(n,r,t)}function Kt(e){return e.toLowerCase()}class pe{constructor(t,n){this.attribute=n,this.property=t}}pe.prototype.attribute="";pe.prototype.booleanish=!1;pe.prototype.boolean=!1;pe.prototype.commaOrSpaceSeparated=!1;pe.prototype.commaSeparated=!1;pe.prototype.defined=!1;pe.prototype.mustUseProperty=!1;pe.prototype.number=!1;pe.prototype.overloadedBoolean=!1;pe.prototype.property="";pe.prototype.spaceSeparated=!1;pe.prototype.space=void 0;let Ea=0;const H=Be(),se=Be(),Jt=Be(),I=Be(),ee=Be(),He=Be(),me=Be();function Be(){return 2**++Ea}const Xt=Object.freeze(Object.defineProperty({__proto__:null,boolean:H,booleanish:se,commaOrSpaceSeparated:me,commaSeparated:He,number:I,overloadedBoolean:Jt,spaceSeparated:ee},Symbol.toStringTag,{value:"Module"})),Lt=Object.keys(Xt);class fn extends pe{constructor(t,n,r,i){let s=-1;if(super(t,n),Un(this,"space",i),typeof r=="number")for(;++s<Lt.length;){const a=Lt[s];Un(this,Lt[s],(r&Xt[a])===Xt[a])}}}fn.prototype.defined=!0;function Un(e,t,n){n&&(e[t]=n)}function Ke(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const s=new fn(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[Kt(r)]=r,n[Kt(s.attribute)]=r}return new ft(t,n,e.space)}const Qr=Ke({properties:{ariaActiveDescendant:null,ariaAtomic:se,ariaAutoComplete:null,ariaBusy:se,ariaChecked:se,ariaColCount:I,ariaColIndex:I,ariaColSpan:I,ariaControls:ee,ariaCurrent:null,ariaDescribedBy:ee,ariaDetails:null,ariaDisabled:se,ariaDropEffect:ee,ariaErrorMessage:null,ariaExpanded:se,ariaFlowTo:ee,ariaGrabbed:se,ariaHasPopup:null,ariaHidden:se,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ee,ariaLevel:I,ariaLive:null,ariaModal:se,ariaMultiLine:se,ariaMultiSelectable:se,ariaOrientation:null,ariaOwns:ee,ariaPlaceholder:null,ariaPosInSet:I,ariaPressed:se,ariaReadOnly:se,ariaRelevant:null,ariaRequired:se,ariaRoleDescription:ee,ariaRowCount:I,ariaRowIndex:I,ariaRowSpan:I,ariaSelected:se,ariaSetSize:I,ariaSort:null,ariaValueMax:I,ariaValueMin:I,ariaValueNow:I,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Wr(e,t){return t in e?e[t]:t}function Gr(e,t){return Wr(e,t.toLowerCase())}const Ca=Ke({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:He,acceptCharset:ee,accessKey:ee,action:null,allow:null,allowFullScreen:H,allowPaymentRequest:H,allowUserMedia:H,alt:null,as:null,async:H,autoCapitalize:null,autoComplete:ee,autoFocus:H,autoPlay:H,blocking:ee,capture:null,charSet:null,checked:H,cite:null,className:ee,cols:I,colSpan:null,content:null,contentEditable:se,controls:H,controlsList:ee,coords:I|He,crossOrigin:null,data:null,dateTime:null,decoding:null,default:H,defer:H,dir:null,dirName:null,disabled:H,download:Jt,draggable:se,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:H,formTarget:null,headers:ee,height:I,hidden:Jt,high:I,href:null,hrefLang:null,htmlFor:ee,httpEquiv:ee,id:null,imageSizes:null,imageSrcSet:null,inert:H,inputMode:null,integrity:null,is:null,isMap:H,itemId:null,itemProp:ee,itemRef:ee,itemScope:H,itemType:ee,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:H,low:I,manifest:null,max:null,maxLength:I,media:null,method:null,min:null,minLength:I,multiple:H,muted:H,name:null,nonce:null,noModule:H,noValidate:H,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:H,optimum:I,pattern:null,ping:ee,placeholder:null,playsInline:H,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:H,referrerPolicy:null,rel:ee,required:H,reversed:H,rows:I,rowSpan:I,sandbox:ee,scope:null,scoped:H,seamless:H,selected:H,shadowRootClonable:H,shadowRootDelegatesFocus:H,shadowRootMode:null,shape:null,size:I,sizes:null,slot:null,span:I,spellCheck:se,src:null,srcDoc:null,srcLang:null,srcSet:null,start:I,step:null,style:null,tabIndex:I,target:null,title:null,translate:null,type:null,typeMustMatch:H,useMap:null,value:se,width:I,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ee,axis:null,background:null,bgColor:null,border:I,borderColor:null,bottomMargin:I,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:H,declare:H,event:null,face:null,frame:null,frameBorder:null,hSpace:I,leftMargin:I,link:null,longDesc:null,lowSrc:null,marginHeight:I,marginWidth:I,noResize:H,noHref:H,noShade:H,noWrap:H,object:null,profile:null,prompt:null,rev:null,rightMargin:I,rules:null,scheme:null,scrolling:se,standby:null,summary:null,text:null,topMargin:I,valueType:null,version:null,vAlign:null,vLink:null,vSpace:I,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:H,disableRemotePlayback:H,prefix:null,property:null,results:I,security:null,unselectable:null},space:"html",transform:Gr}),_a=Ke({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:me,accentHeight:I,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:I,amplitude:I,arabicForm:null,ascent:I,attributeName:null,attributeType:null,azimuth:I,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:I,by:null,calcMode:null,capHeight:I,className:ee,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:I,diffuseConstant:I,direction:null,display:null,dur:null,divisor:I,dominantBaseline:null,download:H,dx:null,dy:null,edgeMode:null,editable:null,elevation:I,enableBackground:null,end:null,event:null,exponent:I,externalResourcesRequired:null,fill:null,fillOpacity:I,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:He,g2:He,glyphName:He,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:I,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:I,horizOriginX:I,horizOriginY:I,id:null,ideographic:I,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:I,k:I,k1:I,k2:I,k3:I,k4:I,kernelMatrix:me,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:I,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:I,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:I,overlineThickness:I,paintOrder:null,panose1:null,path:null,pathLength:I,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ee,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:I,pointsAtY:I,pointsAtZ:I,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:me,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:me,rev:me,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:me,requiredFeatures:me,requiredFonts:me,requiredFormats:me,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:I,specularExponent:I,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:I,strikethroughThickness:I,string:null,stroke:null,strokeDashArray:me,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:I,strokeOpacity:I,strokeWidth:null,style:null,surfaceScale:I,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:me,tabIndex:I,tableValues:null,target:null,targetX:I,targetY:I,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:me,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:I,underlineThickness:I,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:I,values:null,vAlphabetic:I,vMathematical:I,vectorEffect:null,vHanging:I,vIdeographic:I,version:null,vertAdvY:I,vertOriginX:I,vertOriginY:I,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:I,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Wr}),Yr=Ke({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Kr=Ke({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Gr}),Jr=Ke({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Aa={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},ja=/[A-Z]/g,Hn=/-[a-z]/g,Na=/^data[-\w.:]+$/i;function Pa(e,t){const n=Kt(t);let r=t,i=pe;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Na.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Hn,Ra);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Hn.test(s)){let a=s.replace(ja,Ia);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}i=fn}return new i(r,t)}function Ia(e){return"-"+e.toLowerCase()}function Ra(e){return e.charAt(1).toUpperCase()}const Da=Vr([Qr,Ca,Yr,Kr,Jr],"html"),mn=Vr([Qr,_a,Yr,Kr,Jr],"svg");function La(e){return e.join(" ").trim()}var $e={},Ot,Vn;function Oa(){if(Vn)return Ot;Vn=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,o=/^\s+|\s+$/g,c=`
`,l="/",u="*",h="",f="comment",p="declaration";Ot=function(v,T){if(typeof v!="string")throw new TypeError("First argument must be a string");if(!v)return[];T=T||{};var w=1,C=1;function A(D){var q=D.match(t);q&&(w+=q.length);var F=D.lastIndexOf(c);C=~F?D.length-F:C+D.length}function L(){var D={line:w,column:C};return function(q){return q.position=new M(D),E(),q}}function M(D){this.start=D,this.end={line:w,column:C},this.source=T.source}M.prototype.content=v;function y(D){var q=new Error(T.source+":"+w+":"+C+": "+D);if(q.reason=D,q.filename=T.source,q.line=w,q.column=C,q.source=v,!T.silent)throw q}function b(D){var q=D.exec(v);if(q){var F=q[0];return A(F),v=v.slice(F.length),q}}function E(){b(n)}function k(D){var q;for(D=D||[];q=N();)q!==!1&&D.push(q);return D}function N(){var D=L();if(!(l!=v.charAt(0)||u!=v.charAt(1))){for(var q=2;h!=v.charAt(q)&&(u!=v.charAt(q)||l!=v.charAt(q+1));)++q;if(q+=2,h===v.charAt(q-1))return y("End of comment missing");var F=v.slice(2,q-2);return C+=2,A(F),v=v.slice(q),C+=2,D({type:f,comment:F})}}function j(){var D=L(),q=b(r);if(q){if(N(),!b(i))return y("property missing ':'");var F=b(s),Z=D({type:p,property:S(q[0].replace(e,h)),value:F?S(F[0].replace(e,h)):h});return b(a),Z}}function P(){var D=[];k(D);for(var q;q=j();)q!==!1&&(D.push(q),k(D));return D}return E(),P()};function S(v){return v?v.replace(o,h):h}return Ot}var Qn;function Ma(){if(Qn)return $e;Qn=1;var e=$e&&$e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($e,"__esModule",{value:!0}),$e.default=n;var t=e(Oa());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var a=(0,t.default)(r),o=typeof i=="function";return a.forEach(function(c){if(c.type==="declaration"){var l=c.property,u=c.value;o?i(l,u,c):u&&(s=s||{},s[l]=u)}}),s}return $e}var rt={},Wn;function qa(){if(Wn)return rt;Wn=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(l){return!l||n.test(l)||e.test(l)},a=function(l,u){return u.toUpperCase()},o=function(l,u){return"".concat(u,"-")},c=function(l,u){return u===void 0&&(u={}),s(l)?l:(l=l.toLowerCase(),u.reactCompat?l=l.replace(i,o):l=l.replace(r,o),l.replace(t,a))};return rt.camelCase=c,rt}var it,Gn;function Ba(){if(Gn)return it;Gn=1;var e=it&&it.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(Ma()),n=qa();function r(i,s){var a={};return!i||typeof i!="string"||(0,t.default)(i,function(o,c){o&&c&&(a[(0,n.camelCase)(o,s)]=c)}),a}return r.default=r,it=r,it}var Fa=Ba();const za=Cr(Fa),Xr=Zr("end"),gn=Zr("start");function Zr(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function $a(e){const t=gn(e),n=Xr(e);if(t&&n)return{start:t,end:n}}function ot(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Yn(e.position):"start"in e||"end"in e?Yn(e):"line"in e||"column"in e?Zt(e):""}function Zt(e){return Kn(e&&e.line)+":"+Kn(e&&e.column)}function Yn(e){return Zt(e&&e.start)+"-"+Zt(e&&e.end)}function Kn(e){return e&&typeof e=="number"?e:1}class ue extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(a=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?s.ruleId=r:(s.source=r.slice(0,c),s.ruleId=r.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const o=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=o?o.line:void 0,this.name=ot(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ue.prototype.file="";ue.prototype.name="";ue.prototype.reason="";ue.prototype.message="";ue.prototype.stack="";ue.prototype.column=void 0;ue.prototype.line=void 0;ue.prototype.ancestors=void 0;ue.prototype.cause=void 0;ue.prototype.fatal=void 0;ue.prototype.place=void 0;ue.prototype.ruleId=void 0;ue.prototype.source=void 0;const yn={}.hasOwnProperty,Ua=new Map,Ha=/[A-Z]/g,Va=new Set(["table","tbody","thead","tfoot","tr"]),Qa=new Set(["td","th"]),ei="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Wa(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=to(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=eo(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?mn:Da,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=ti(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function ti(e,t,n){if(t.type==="element")return Ga(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Ya(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Ja(e,t,n);if(t.type==="mdxjsEsm")return Ka(e,t);if(t.type==="root")return Xa(e,t,n);if(t.type==="text")return Za(e,t)}function Ga(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=mn,e.schema=i),e.ancestors.push(t);const s=ri(e,t.tagName,!1),a=no(e,t);let o=bn(e,t);return Va.has(t.tagName)&&(o=o.filter(function(c){return typeof c=="string"?!Ta(c):!0})),ni(e,a,s,t),xn(a,o),e.ancestors.pop(),e.schema=r,e.create(t,s,a,n)}function Ya(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}dt(e,t.position)}function Ka(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);dt(e,t.position)}function Ja(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=mn,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:ri(e,t.name,!0),a=ro(e,t),o=bn(e,t);return ni(e,a,s,t),xn(a,o),e.ancestors.pop(),e.schema=r,e.create(t,s,a,n)}function Xa(e,t,n){const r={};return xn(r,bn(e,t)),e.create(t,e.Fragment,r,n)}function Za(e,t){return t.value}function ni(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function xn(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function eo(e,t,n){return r;function r(i,s,a,o){const l=Array.isArray(a.children)?n:t;return o?l(s,a,o):l(s,a)}}function to(e,t){return n;function n(r,i,s,a){const o=Array.isArray(s.children),c=gn(r);return t(i,s,a,o,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function no(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&yn.call(t.properties,i)){const s=io(e,i,t.properties[i]);if(s){const[a,o]=s;e.tableCellAlignToStyle&&a==="align"&&typeof o=="string"&&Qa.has(t.tagName)?r=o:n[a]=o}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function ro(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const a=s.expression;a.type;const o=a.properties[0];o.type,Object.assign(n,e.evaluater.evaluateExpression(o.argument))}else dt(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const o=r.value.data.estree.body[0];o.type,s=e.evaluater.evaluateExpression(o.expression)}else dt(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function bn(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:Ua;for(;++r<t.children.length;){const s=t.children[r];let a;if(e.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const l=i.get(c)||0;a=c+"-"+l,i.set(c,l+1)}}const o=ti(e,s,a);o!==void 0&&n.push(o)}return n}function io(e,t,n){const r=Pa(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?ba(n):La(n)),r.property==="style"){let i=typeof n=="object"?n:so(e,String(n));return e.stylePropertyNameCase==="css"&&(i=ao(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?Aa[r.property]||r.property:r.attribute,n]}}function so(e,t){try{return za(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new ue("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=ei+"#cannot-parse-style-attribute",i}}function ri(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,a;for(;++s<i.length;){const o=zn(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};a=a?{type:"MemberExpression",object:a,property:o,computed:!!(s&&o.type==="Literal"),optional:!1}:o}r=a}else r=zn(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return yn.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);dt(e)}function dt(e,t){const n=new ue("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=ei+"#cannot-handle-mdx-estrees-without-createevaluater",n}function ao(e){const t={};let n;for(n in e)yn.call(e,n)&&(t[oo(n)]=e[n]);return t}function oo(e){let t=e.replace(Ha,lo);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function lo(e){return"-"+e.toLowerCase()}const Mt={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},co={};function uo(e,t){const n=co,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return ii(e,r,i)}function ii(e,t,n){if(ho(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Jn(e.children,t,n)}return Array.isArray(e)?Jn(e,t,n):""}function Jn(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=ii(e[i],t,n);return r.join("")}function ho(e){return!!(e&&typeof e=="object")}const Xn=document.createElement("i");function wn(e){const t="&"+e+";";Xn.innerHTML=t;const n=Xn.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Ce(e,t,n,r){const i=e.length;let s=0,a;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);s<r.length;)a=r.slice(s,s+1e4),a.unshift(t,0),e.splice(...a),s+=1e4,t+=1e4}function ye(e,t){return e.length>0?(Ce(e,e.length,0,t),e):t}const Zn={}.hasOwnProperty;function po(e){const t={};let n=-1;for(;++n<e.length;)fo(t,e[n]);return t}function fo(e,t){let n;for(n in t){const i=(Zn.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let a;if(s)for(a in s){Zn.call(i,a)||(i[a]=[]);const o=s[a];mo(i[a],Array.isArray(o)?o:o?[o]:[])}}}function mo(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Ce(e,0,0,r)}function si(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"ï¿½":String.fromCodePoint(n)}function Ve(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ee=Me(/[A-Za-z]/),ge=Me(/[\dA-Za-z]/),go=Me(/[#-'*+\--9=?A-Z^-~]/);function en(e){return e!==null&&(e<32||e===127)}const tn=Me(/\d/),yo=Me(/[\dA-Fa-f]/),xo=Me(/[!-/:-@[-`{-~]/);function $(e){return e!==null&&e<-2}function he(e){return e!==null&&(e<0||e===32)}function Y(e){return e===-2||e===-1||e===32}const bo=Me(new RegExp("\\p{P}|\\p{S}","u")),wo=Me(/\s/);function Me(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Je(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let a="";if(s===37&&ge(e.charCodeAt(n+1))&&ge(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const o=e.charCodeAt(n+1);s<56320&&o>56319&&o<57344?(a=String.fromCharCode(s,o),i=1):a="ï¿½"}else a=String.fromCharCode(s);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function te(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(c){return Y(c)?(e.enter(n),o(c)):t(c)}function o(c){return Y(c)&&s++<i?(e.consume(c),o):(e.exit(n),t(c))}}const vo={tokenize:ko};function ko(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),te(e,t,"linePrefix")}function i(o){return e.enter("paragraph"),s(o)}function s(o){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,a(o)}function a(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return $(o)?(e.consume(o),e.exit("chunkText"),s):(e.consume(o),a)}}const So={tokenize:To},er={tokenize:Eo};function To(e){const t=this,n=[];let r=0,i,s,a;return o;function o(A){if(r<n.length){const L=n[r];return t.containerState=L[1],e.attempt(L[0].continuation,c,l)(A)}return l(A)}function c(A){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&C();const L=t.events.length;let M=L,y;for(;M--;)if(t.events[M][0]==="exit"&&t.events[M][1].type==="chunkFlow"){y=t.events[M][1].end;break}w(r);let b=L;for(;b<t.events.length;)t.events[b][1].end={...y},b++;return Ce(t.events,M+1,0,t.events.slice(L)),t.events.length=b,l(A)}return o(A)}function l(A){if(r===n.length){if(!i)return f(A);if(i.currentConstruct&&i.currentConstruct.concrete)return S(A);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(er,u,h)(A)}function u(A){return i&&C(),w(r),f(A)}function h(A){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,S(A)}function f(A){return t.containerState={},e.attempt(er,p,S)(A)}function p(A){return r++,n.push([t.currentConstruct,t.containerState]),f(A)}function S(A){if(A===null){i&&C(),w(0),e.consume(A);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),v(A)}function v(A){if(A===null){T(e.exit("chunkFlow"),!0),w(0),e.consume(A);return}return $(A)?(e.consume(A),T(e.exit("chunkFlow")),r=0,t.interrupt=void 0,o):(e.consume(A),v)}function T(A,L){const M=t.sliceStream(A);if(L&&M.push(null),A.previous=s,s&&(s.next=A),s=A,i.defineSkip(A.start),i.write(M),t.parser.lazy[A.start.line]){let y=i.events.length;for(;y--;)if(i.events[y][1].start.offset<a&&(!i.events[y][1].end||i.events[y][1].end.offset>a))return;const b=t.events.length;let E=b,k,N;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){if(k){N=t.events[E][1].end;break}k=!0}for(w(r),y=b;y<t.events.length;)t.events[y][1].end={...N},y++;Ce(t.events,E+1,0,t.events.slice(b)),t.events.length=y}}function w(A){let L=n.length;for(;L-- >A;){const M=n[L];t.containerState=M[1],M[0].exit.call(t,e)}n.length=A}function C(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Eo(e,t,n){return te(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function tr(e){if(e===null||he(e)||wo(e))return 1;if(bo(e))return 2}function vn(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const nn={name:"attention",resolveAll:Co,tokenize:_o};function Co(e,t){let n=-1,r,i,s,a,o,c,l,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},f={...e[n][1].start};nr(h,-c),nr(f,c),a={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},o={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:f},s={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...a.start},end:{...o.end}},e[r][1].end={...a.start},e[n][1].start={...o.end},l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=ye(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=ye(l,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",s,t]]),l=ye(l,vn(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=ye(l,[["exit",s,t],["enter",o,t],["exit",o,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,l=ye(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,Ce(e,r-1,n-r+3,l),n=r+l.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function _o(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=tr(r);let s;return a;function a(c){return s=c,e.enter("attentionSequence"),o(c)}function o(c){if(c===s)return e.consume(c),o;const l=e.exit("attentionSequence"),u=tr(c),h=!u||u===2&&i||n.includes(c),f=!i||i===2&&u||n.includes(r);return l._open=!!(s===42?h:h&&(i||!f)),l._close=!!(s===42?f:f&&(u||!h)),t(c)}}function nr(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Ao={name:"autolink",tokenize:jo};function jo(e,t,n){let r=0;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(p){return Ee(p)?(e.consume(p),a):p===64?n(p):l(p)}function a(p){return p===43||p===45||p===46||ge(p)?(r=1,o(p)):l(p)}function o(p){return p===58?(e.consume(p),r=0,c):(p===43||p===45||p===46||ge(p))&&r++<32?(e.consume(p),o):(r=0,l(p))}function c(p){return p===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):p===null||p===32||p===60||en(p)?n(p):(e.consume(p),c)}function l(p){return p===64?(e.consume(p),u):go(p)?(e.consume(p),l):n(p)}function u(p){return ge(p)?h(p):n(p)}function h(p){return p===46?(e.consume(p),r=0,u):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):f(p)}function f(p){if((p===45||ge(p))&&r++<63){const S=p===45?f:h;return e.consume(p),S}return n(p)}}const At={partial:!0,tokenize:No};function No(e,t,n){return r;function r(s){return Y(s)?te(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||$(s)?t(s):n(s)}}const ai={continuation:{tokenize:Io},exit:Ro,name:"blockQuote",tokenize:Po};function Po(e,t,n){const r=this;return i;function i(a){if(a===62){const o=r.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),s}return n(a)}function s(a){return Y(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function Io(e,t,n){const r=this;return i;function i(a){return Y(a)?te(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return e.attempt(ai,t,n)(a)}}function Ro(e){e.exit("blockQuote")}const oi={name:"characterEscape",tokenize:Do};function Do(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return xo(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const li={name:"characterReference",tokenize:Lo};function Lo(e,t,n){const r=this;let i=0,s,a;return o;function o(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),c}function c(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,a=ge,u(h))}function l(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,a=yo,u):(e.enter("characterReferenceValue"),s=7,a=tn,u(h))}function u(h){if(h===59&&i){const f=e.exit("characterReferenceValue");return a===ge&&!wn(r.sliceSerialize(f))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(h)&&i++<s?(e.consume(h),u):n(h)}}const rr={partial:!0,tokenize:Mo},ir={concrete:!0,name:"codeFenced",tokenize:Oo};function Oo(e,t,n){const r=this,i={partial:!0,tokenize:M};let s=0,a=0,o;return c;function c(y){return l(y)}function l(y){const b=r.events[r.events.length-1];return s=b&&b[1].type==="linePrefix"?b[2].sliceSerialize(b[1],!0).length:0,o=y,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(y)}function u(y){return y===o?(a++,e.consume(y),u):a<3?n(y):(e.exit("codeFencedFenceSequence"),Y(y)?te(e,h,"whitespace")(y):h(y))}function h(y){return y===null||$(y)?(e.exit("codeFencedFence"),r.interrupt?t(y):e.check(rr,v,L)(y)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(y))}function f(y){return y===null||$(y)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(y)):Y(y)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),te(e,p,"whitespace")(y)):y===96&&y===o?n(y):(e.consume(y),f)}function p(y){return y===null||$(y)?h(y):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),S(y))}function S(y){return y===null||$(y)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(y)):y===96&&y===o?n(y):(e.consume(y),S)}function v(y){return e.attempt(i,L,T)(y)}function T(y){return e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),w}function w(y){return s>0&&Y(y)?te(e,C,"linePrefix",s+1)(y):C(y)}function C(y){return y===null||$(y)?e.check(rr,v,L)(y):(e.enter("codeFlowValue"),A(y))}function A(y){return y===null||$(y)?(e.exit("codeFlowValue"),C(y)):(e.consume(y),A)}function L(y){return e.exit("codeFenced"),t(y)}function M(y,b,E){let k=0;return N;function N(F){return y.enter("lineEnding"),y.consume(F),y.exit("lineEnding"),j}function j(F){return y.enter("codeFencedFence"),Y(F)?te(y,P,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):P(F)}function P(F){return F===o?(y.enter("codeFencedFenceSequence"),D(F)):E(F)}function D(F){return F===o?(k++,y.consume(F),D):k>=a?(y.exit("codeFencedFenceSequence"),Y(F)?te(y,q,"whitespace")(F):q(F)):E(F)}function q(F){return F===null||$(F)?(y.exit("codeFencedFence"),b(F)):E(F)}}}function Mo(e,t,n){const r=this;return i;function i(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const qt={name:"codeIndented",tokenize:Bo},qo={partial:!0,tokenize:Fo};function Bo(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),te(e,s,"linePrefix",5)(l)}function s(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?a(l):n(l)}function a(l){return l===null?c(l):$(l)?e.attempt(qo,a,c)(l):(e.enter("codeFlowValue"),o(l))}function o(l){return l===null||$(l)?(e.exit("codeFlowValue"),a(l)):(e.consume(l),o)}function c(l){return e.exit("codeIndented"),t(l)}}function Fo(e,t,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):$(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):te(e,s,"linePrefix",5)(a)}function s(a){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):$(a)?i(a):n(a)}}const zo={name:"codeText",previous:Uo,resolve:$o,tokenize:Ho};function $o(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Uo(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Ho(e,t,n){let r=0,i,s;return a;function a(h){return e.enter("codeText"),e.enter("codeTextSequence"),o(h)}function o(h){return h===96?(e.consume(h),r++,o):(e.exit("codeTextSequence"),c(h))}function c(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),c):h===96?(s=e.enter("codeTextSequence"),i=0,u(h)):$(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("codeTextData"),l(h))}function l(h){return h===null||h===32||h===96||$(h)?(e.exit("codeTextData"),c(h)):(e.consume(h),l)}function u(h){return h===96?(e.consume(h),i++,u):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(s.type="codeTextData",l(h))}}class Vo{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&st(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),st(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),st(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);st(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);st(this.left,n.reverse())}}}function st(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function ci(e){const t={};let n=-1,r,i,s,a,o,c,l;const u=new Vo(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Qo(u,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(a=u.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},o=u.slice(i,n),o.unshift(r),u.splice(i,n-i+1,o))}}return Ce(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function Qo(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,c=[],l={};let u,h,f=-1,p=n,S=0,v=0;const T=[v];for(;p;){for(;e.get(++i)[1]!==p;);s.push(i),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),h&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(u),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=n;++f<o.length;)o[f][0]==="exit"&&o[f-1][0]==="enter"&&o[f][1].type===o[f-1][1].type&&o[f][1].start.line!==o[f][1].end.line&&(v=f+1,T.push(v),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):T.pop(),f=T.length;f--;){const w=o.slice(T[f],T[f+1]),C=s.pop();c.push([C,C+w.length-1]),e.splice(C,2,w)}for(c.reverse(),f=-1;++f<c.length;)l[S+c[f][0]]=S+c[f][1],S+=c[f][1]-c[f][0]-1;return l}const Wo={resolve:Yo,tokenize:Ko},Go={partial:!0,tokenize:Jo};function Yo(e){return ci(e),e}function Ko(e,t){let n;return r;function r(o){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(o)}function i(o){return o===null?s(o):$(o)?e.check(Go,a,s)(o):(e.consume(o),i)}function s(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function a(o){return e.consume(o),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Jo(e,t,n){const r=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),te(e,s,"linePrefix")}function s(a){if(a===null||$(a))return n(a);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function ui(e,t,n,r,i,s,a,o,c){const l=c||Number.POSITIVE_INFINITY;let u=0;return h;function h(w){return w===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(w),e.exit(s),f):w===null||w===32||w===41||en(w)?n(w):(e.enter(r),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),v(w))}function f(w){return w===62?(e.enter(s),e.consume(w),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),p(w))}function p(w){return w===62?(e.exit("chunkString"),e.exit(o),f(w)):w===null||w===60||$(w)?n(w):(e.consume(w),w===92?S:p)}function S(w){return w===60||w===62||w===92?(e.consume(w),p):p(w)}function v(w){return!u&&(w===null||w===41||he(w))?(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(r),t(w)):u<l&&w===40?(e.consume(w),u++,v):w===41?(e.consume(w),u--,v):w===null||w===32||w===40||en(w)?n(w):(e.consume(w),w===92?T:v)}function T(w){return w===40||w===41||w===92?(e.consume(w),v):v(w)}}function di(e,t,n,r,i,s){const a=this;let o=0,c;return l;function l(p){return e.enter(r),e.enter(i),e.consume(p),e.exit(i),e.enter(s),u}function u(p){return o>999||p===null||p===91||p===93&&!c||p===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?n(p):p===93?(e.exit(s),e.enter(i),e.consume(p),e.exit(i),e.exit(r),t):$(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===null||p===91||p===93||$(p)||o++>999?(e.exit("chunkString"),u(p)):(e.consume(p),c||(c=!Y(p)),p===92?f:h)}function f(p){return p===91||p===92||p===93?(e.consume(p),o++,h):h(p)}}function hi(e,t,n,r,i,s){let a;return o;function o(f){return f===34||f===39||f===40?(e.enter(r),e.enter(i),e.consume(f),e.exit(i),a=f===40?41:f,c):n(f)}function c(f){return f===a?(e.enter(i),e.consume(f),e.exit(i),e.exit(r),t):(e.enter(s),l(f))}function l(f){return f===a?(e.exit(s),c(a)):f===null?n(f):$(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),te(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===a||f===null||$(f)?(e.exit("chunkString"),l(f)):(e.consume(f),f===92?h:u)}function h(f){return f===a||f===92?(e.consume(f),u):u(f)}}function lt(e,t){let n;return r;function r(i){return $(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Y(i)?te(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Xo={name:"definition",tokenize:el},Zo={partial:!0,tokenize:tl};function el(e,t,n){const r=this;let i;return s;function s(p){return e.enter("definition"),a(p)}function a(p){return di.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function o(p){return i=Ve(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),c):n(p)}function c(p){return he(p)?lt(e,l)(p):l(p)}function l(p){return ui(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return e.attempt(Zo,h,h)(p)}function h(p){return Y(p)?te(e,f,"whitespace")(p):f(p)}function f(p){return p===null||$(p)?(e.exit("definition"),r.parser.defined.push(i),t(p)):n(p)}}function tl(e,t,n){return r;function r(o){return he(o)?lt(e,i)(o):n(o)}function i(o){return hi(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function s(o){return Y(o)?te(e,a,"whitespace")(o):a(o)}function a(o){return o===null||$(o)?t(o):n(o)}}const nl={name:"hardBreakEscape",tokenize:rl};function rl(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return $(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const il={name:"headingAtx",resolve:sl,tokenize:al};function sl(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Ce(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function al(e,t,n){let r=0;return i;function i(u){return e.enter("atxHeading"),s(u)}function s(u){return e.enter("atxHeadingSequence"),a(u)}function a(u){return u===35&&r++<6?(e.consume(u),a):u===null||he(u)?(e.exit("atxHeadingSequence"),o(u)):n(u)}function o(u){return u===35?(e.enter("atxHeadingSequence"),c(u)):u===null||$(u)?(e.exit("atxHeading"),t(u)):Y(u)?te(e,o,"whitespace")(u):(e.enter("atxHeadingText"),l(u))}function c(u){return u===35?(e.consume(u),c):(e.exit("atxHeadingSequence"),o(u))}function l(u){return u===null||u===35||he(u)?(e.exit("atxHeadingText"),o(u)):(e.consume(u),l)}}const ol=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],sr=["pre","script","style","textarea"],ll={concrete:!0,name:"htmlFlow",resolveTo:dl,tokenize:hl},cl={partial:!0,tokenize:fl},ul={partial:!0,tokenize:pl};function dl(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function hl(e,t,n){const r=this;let i,s,a,o,c;return l;function l(m){return u(m)}function u(m){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(m),h}function h(m){return m===33?(e.consume(m),f):m===47?(e.consume(m),s=!0,v):m===63?(e.consume(m),i=3,r.interrupt?t:g):Ee(m)?(e.consume(m),a=String.fromCharCode(m),T):n(m)}function f(m){return m===45?(e.consume(m),i=2,p):m===91?(e.consume(m),i=5,o=0,S):Ee(m)?(e.consume(m),i=4,r.interrupt?t:g):n(m)}function p(m){return m===45?(e.consume(m),r.interrupt?t:g):n(m)}function S(m){const z="CDATA[";return m===z.charCodeAt(o++)?(e.consume(m),o===z.length?r.interrupt?t:P:S):n(m)}function v(m){return Ee(m)?(e.consume(m),a=String.fromCharCode(m),T):n(m)}function T(m){if(m===null||m===47||m===62||he(m)){const z=m===47,V=a.toLowerCase();return!z&&!s&&sr.includes(V)?(i=1,r.interrupt?t(m):P(m)):ol.includes(a.toLowerCase())?(i=6,z?(e.consume(m),w):r.interrupt?t(m):P(m)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(m):s?C(m):A(m))}return m===45||ge(m)?(e.consume(m),a+=String.fromCharCode(m),T):n(m)}function w(m){return m===62?(e.consume(m),r.interrupt?t:P):n(m)}function C(m){return Y(m)?(e.consume(m),C):N(m)}function A(m){return m===47?(e.consume(m),N):m===58||m===95||Ee(m)?(e.consume(m),L):Y(m)?(e.consume(m),A):N(m)}function L(m){return m===45||m===46||m===58||m===95||ge(m)?(e.consume(m),L):M(m)}function M(m){return m===61?(e.consume(m),y):Y(m)?(e.consume(m),M):A(m)}function y(m){return m===null||m===60||m===61||m===62||m===96?n(m):m===34||m===39?(e.consume(m),c=m,b):Y(m)?(e.consume(m),y):E(m)}function b(m){return m===c?(e.consume(m),c=null,k):m===null||$(m)?n(m):(e.consume(m),b)}function E(m){return m===null||m===34||m===39||m===47||m===60||m===61||m===62||m===96||he(m)?M(m):(e.consume(m),E)}function k(m){return m===47||m===62||Y(m)?A(m):n(m)}function N(m){return m===62?(e.consume(m),j):n(m)}function j(m){return m===null||$(m)?P(m):Y(m)?(e.consume(m),j):n(m)}function P(m){return m===45&&i===2?(e.consume(m),Z):m===60&&i===1?(e.consume(m),ne):m===62&&i===4?(e.consume(m),K):m===63&&i===3?(e.consume(m),g):m===93&&i===5?(e.consume(m),B):$(m)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(cl,le,D)(m)):m===null||$(m)?(e.exit("htmlFlowData"),D(m)):(e.consume(m),P)}function D(m){return e.check(ul,q,le)(m)}function q(m){return e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),F}function F(m){return m===null||$(m)?D(m):(e.enter("htmlFlowData"),P(m))}function Z(m){return m===45?(e.consume(m),g):P(m)}function ne(m){return m===47?(e.consume(m),a="",O):P(m)}function O(m){if(m===62){const z=a.toLowerCase();return sr.includes(z)?(e.consume(m),K):P(m)}return Ee(m)&&a.length<8?(e.consume(m),a+=String.fromCharCode(m),O):P(m)}function B(m){return m===93?(e.consume(m),g):P(m)}function g(m){return m===62?(e.consume(m),K):m===45&&i===2?(e.consume(m),g):P(m)}function K(m){return m===null||$(m)?(e.exit("htmlFlowData"),le(m)):(e.consume(m),K)}function le(m){return e.exit("htmlFlow"),t(m)}}function pl(e,t,n){const r=this;return i;function i(a){return $(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):n(a)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function fl(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(At,t,n)}}const ml={name:"htmlText",tokenize:gl};function gl(e,t,n){const r=this;let i,s,a;return o;function o(g){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(g),c}function c(g){return g===33?(e.consume(g),l):g===47?(e.consume(g),M):g===63?(e.consume(g),A):Ee(g)?(e.consume(g),E):n(g)}function l(g){return g===45?(e.consume(g),u):g===91?(e.consume(g),s=0,S):Ee(g)?(e.consume(g),C):n(g)}function u(g){return g===45?(e.consume(g),p):n(g)}function h(g){return g===null?n(g):g===45?(e.consume(g),f):$(g)?(a=h,ne(g)):(e.consume(g),h)}function f(g){return g===45?(e.consume(g),p):h(g)}function p(g){return g===62?Z(g):g===45?f(g):h(g)}function S(g){const K="CDATA[";return g===K.charCodeAt(s++)?(e.consume(g),s===K.length?v:S):n(g)}function v(g){return g===null?n(g):g===93?(e.consume(g),T):$(g)?(a=v,ne(g)):(e.consume(g),v)}function T(g){return g===93?(e.consume(g),w):v(g)}function w(g){return g===62?Z(g):g===93?(e.consume(g),w):v(g)}function C(g){return g===null||g===62?Z(g):$(g)?(a=C,ne(g)):(e.consume(g),C)}function A(g){return g===null?n(g):g===63?(e.consume(g),L):$(g)?(a=A,ne(g)):(e.consume(g),A)}function L(g){return g===62?Z(g):A(g)}function M(g){return Ee(g)?(e.consume(g),y):n(g)}function y(g){return g===45||ge(g)?(e.consume(g),y):b(g)}function b(g){return $(g)?(a=b,ne(g)):Y(g)?(e.consume(g),b):Z(g)}function E(g){return g===45||ge(g)?(e.consume(g),E):g===47||g===62||he(g)?k(g):n(g)}function k(g){return g===47?(e.consume(g),Z):g===58||g===95||Ee(g)?(e.consume(g),N):$(g)?(a=k,ne(g)):Y(g)?(e.consume(g),k):Z(g)}function N(g){return g===45||g===46||g===58||g===95||ge(g)?(e.consume(g),N):j(g)}function j(g){return g===61?(e.consume(g),P):$(g)?(a=j,ne(g)):Y(g)?(e.consume(g),j):k(g)}function P(g){return g===null||g===60||g===61||g===62||g===96?n(g):g===34||g===39?(e.consume(g),i=g,D):$(g)?(a=P,ne(g)):Y(g)?(e.consume(g),P):(e.consume(g),q)}function D(g){return g===i?(e.consume(g),i=void 0,F):g===null?n(g):$(g)?(a=D,ne(g)):(e.consume(g),D)}function q(g){return g===null||g===34||g===39||g===60||g===61||g===96?n(g):g===47||g===62||he(g)?k(g):(e.consume(g),q)}function F(g){return g===47||g===62||he(g)?k(g):n(g)}function Z(g){return g===62?(e.consume(g),e.exit("htmlTextData"),e.exit("htmlText"),t):n(g)}function ne(g){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),O}function O(g){return Y(g)?te(e,B,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(g):B(g)}function B(g){return e.enter("htmlTextData"),a(g)}}const kn={name:"labelEnd",resolveAll:wl,resolveTo:vl,tokenize:kl},yl={tokenize:Sl},xl={tokenize:Tl},bl={tokenize:El};function wl(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&Ce(e,0,e.length,n),e}function vl(e,t){let n=e.length,r=0,i,s,a,o;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const c={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},l={type:"label",start:{...e[s][1].start},end:{...e[a][1].end}},u={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[a-2][1].start}};return o=[["enter",c,t],["enter",l,t]],o=ye(o,e.slice(s+1,s+r+3)),o=ye(o,[["enter",u,t]]),o=ye(o,vn(t.parser.constructs.insideSpan.null,e.slice(s+r+4,a-3),t)),o=ye(o,[["exit",u,t],e[a-2],e[a-1],["exit",l,t]]),o=ye(o,e.slice(a+1)),o=ye(o,[["exit",c,t]]),Ce(e,s,e.length,o),e}function kl(e,t,n){const r=this;let i=r.events.length,s,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return o;function o(f){return s?s._inactive?h(f):(a=r.parser.defined.includes(Ve(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),c):n(f)}function c(f){return f===40?e.attempt(yl,u,a?u:h)(f):f===91?e.attempt(xl,u,a?l:h)(f):a?u(f):h(f)}function l(f){return e.attempt(bl,u,h)(f)}function u(f){return t(f)}function h(f){return s._balanced=!0,n(f)}}function Sl(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),i}function i(h){return he(h)?lt(e,s)(h):s(h)}function s(h){return h===41?u(h):ui(e,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function a(h){return he(h)?lt(e,c)(h):u(h)}function o(h){return n(h)}function c(h){return h===34||h===39||h===40?hi(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function l(h){return he(h)?lt(e,u)(h):u(h)}function u(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function Tl(e,t,n){const r=this;return i;function i(o){return di.call(r,e,s,a,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(Ve(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}function a(o){return n(o)}}function El(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const Cl={name:"labelStartImage",resolveAll:kn.resolveAll,tokenize:_l};function _l(e,t,n){const r=this;return i;function i(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),s}function s(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),a):n(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Al={name:"labelStartLink",resolveAll:kn.resolveAll,tokenize:jl};function jl(e,t,n){const r=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Bt={name:"lineEnding",tokenize:Nl};function Nl(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),te(e,t,"linePrefix")}}const kt={name:"thematicBreak",tokenize:Pl};function Pl(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),a(l)}function a(l){return i=l,o(l)}function o(l){return l===i?(e.enter("thematicBreakSequence"),c(l)):r>=3&&(l===null||$(l))?(e.exit("thematicBreak"),t(l)):n(l)}function c(l){return l===i?(e.consume(l),r++,c):(e.exit("thematicBreakSequence"),Y(l)?te(e,o,"whitespace")(l):o(l))}}const de={continuation:{tokenize:Ll},exit:Ml,name:"list",tokenize:Dl},Il={partial:!0,tokenize:ql},Rl={partial:!0,tokenize:Ol};function Dl(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return o;function o(p){const S=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(S==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:tn(p)){if(r.containerState.type||(r.containerState.type=S,e.enter(S,{_container:!0})),S==="listUnordered")return e.enter("listItemPrefix"),p===42||p===45?e.check(kt,n,l)(p):l(p);if(!r.interrupt||p===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(p)}return n(p)}function c(p){return tn(p)&&++a<10?(e.consume(p),c):(!r.interrupt||a<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(e.exit("listItemValue"),l(p)):n(p)}function l(p){return e.enter("listItemMarker"),e.consume(p),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,e.check(At,r.interrupt?n:u,e.attempt(Il,f,h))}function u(p){return r.containerState.initialBlankLine=!0,s++,f(p)}function h(p){return Y(p)?(e.enter("listItemPrefixWhitespace"),e.consume(p),e.exit("listItemPrefixWhitespace"),f):n(p)}function f(p){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(p)}}function Ll(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(At,i,s);function i(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,te(e,t,"listItemIndent",r.containerState.size+1)(o)}function s(o){return r.containerState.furtherBlankLines||!Y(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Rl,t,a)(o))}function a(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,te(e,e.attempt(de,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function Ol(e,t,n){const r=this;return te(e,i,"listItemIndent",r.containerState.size+1);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(s):n(s)}}function Ml(e){e.exit(this.containerState.type)}function ql(e,t,n){const r=this;return te(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const a=r.events[r.events.length-1];return!Y(s)&&a&&a[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const ar={name:"setextUnderline",resolveTo:Bl,tokenize:Fl};function Bl(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const a={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",a,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=a,e.push(["exit",a,t]),e}function Fl(e,t,n){const r=this;let i;return s;function s(l){let u=r.events.length,h;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){h=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),i=l,a(l)):n(l)}function a(l){return e.enter("setextHeadingLineSequence"),o(l)}function o(l){return l===i?(e.consume(l),o):(e.exit("setextHeadingLineSequence"),Y(l)?te(e,c,"lineSuffix")(l):c(l))}function c(l){return l===null||$(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const zl={tokenize:$l};function $l(e){const t=this,n=e.attempt(At,r,e.attempt(this.parser.constructs.flowInitial,i,te(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Wo,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Ul={resolveAll:fi()},Hl=pi("string"),Vl=pi("text");function pi(e){return{resolveAll:fi(e==="text"?Ql:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,a,o);return a;function a(u){return l(u)?s(u):o(u)}function o(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),c}function c(u){return l(u)?(n.exit("data"),s(u)):(n.consume(u),c)}function l(u){if(u===null)return!0;const h=i[u];let f=-1;if(h)for(;++f<h.length;){const p=h[f];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function fi(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Ql(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,a=-1,o=0,c;for(;s--;){const l=i[s];if(typeof l=="string"){for(a=l.length;l.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(l===-2)c=!0,o++;else if(l!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(o=0),o){const l={type:n===e.length||c||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:r.start._bufferIndex+a,_index:r.start._index+s,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...l.start},r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}const Wl={42:de,43:de,45:de,48:de,49:de,50:de,51:de,52:de,53:de,54:de,55:de,56:de,57:de,62:ai},Gl={91:Xo},Yl={[-2]:qt,[-1]:qt,32:qt},Kl={35:il,42:kt,45:[ar,kt],60:ll,61:ar,95:kt,96:ir,126:ir},Jl={38:li,92:oi},Xl={[-5]:Bt,[-4]:Bt,[-3]:Bt,33:Cl,38:li,42:nn,60:[Ao,ml],91:Al,92:[nl,oi],93:kn,95:nn,96:zo},Zl={null:[nn,Ul]},ec={null:[42,95]},tc={null:[]},nc=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:ec,contentInitial:Gl,disable:tc,document:Wl,flow:Kl,flowInitial:Yl,insideSpan:Zl,string:Jl,text:Xl},Symbol.toStringTag,{value:"Module"}));function rc(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let a=[],o=[];const c={attempt:b(M),check:b(y),consume:C,enter:A,exit:L,interrupt:b(y,{interrupt:!0})},l={code:null,containerState:{},defineSkip:v,events:[],now:S,parser:e,previous:null,sliceSerialize:f,sliceStream:p,write:h};let u=t.tokenize.call(l,c);return t.resolveAll&&s.push(t),l;function h(j){return a=ye(a,j),T(),a[a.length-1]!==null?[]:(E(t,0),l.events=vn(s,l.events,l),l.events)}function f(j,P){return sc(p(j),P)}function p(j){return ic(a,j)}function S(){const{_bufferIndex:j,_index:P,line:D,column:q,offset:F}=r;return{_bufferIndex:j,_index:P,line:D,column:q,offset:F}}function v(j){i[j.line]=j.column,N()}function T(){let j;for(;r._index<a.length;){const P=a[r._index];if(typeof P=="string")for(j=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===j&&r._bufferIndex<P.length;)w(P.charCodeAt(r._bufferIndex));else w(P)}}function w(j){u=u(j)}function C(j){$(j)?(r.line++,r.column=1,r.offset+=j===-3?2:1,N()):j!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=j}function A(j,P){const D=P||{};return D.type=j,D.start=S(),l.events.push(["enter",D,l]),o.push(D),D}function L(j){const P=o.pop();return P.end=S(),l.events.push(["exit",P,l]),P}function M(j,P){E(j,P.from)}function y(j,P){P.restore()}function b(j,P){return D;function D(q,F,Z){let ne,O,B,g;return Array.isArray(q)?le(q):"tokenize"in q?le([q]):K(q);function K(W){return ie;function ie(ae){const ce=ae!==null&&W[ae],J=ae!==null&&W.null,oe=[...Array.isArray(ce)?ce:ce?[ce]:[],...Array.isArray(J)?J:J?[J]:[]];return le(oe)(ae)}}function le(W){return ne=W,O=0,W.length===0?Z:m(W[O])}function m(W){return ie;function ie(ae){return g=k(),B=W,W.partial||(l.currentConstruct=W),W.name&&l.parser.constructs.disable.null.includes(W.name)?V():W.tokenize.call(P?Object.assign(Object.create(l),P):l,c,z,V)(ae)}}function z(W){return j(B,g),F}function V(W){return g.restore(),++O<ne.length?m(ne[O]):Z}}}function E(j,P){j.resolveAll&&!s.includes(j)&&s.push(j),j.resolve&&Ce(l.events,P,l.events.length-P,j.resolve(l.events.slice(P),l)),j.resolveTo&&(l.events=j.resolveTo(l.events,l))}function k(){const j=S(),P=l.previous,D=l.currentConstruct,q=l.events.length,F=Array.from(o);return{from:q,restore:Z};function Z(){r=j,l.previous=P,l.currentConstruct=D,l.events.length=q,o=F,N()}}function N(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function ic(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(r,s)];else{if(a=e.slice(n,i),r>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(r):a.shift()}s>0&&a.push(e[i].slice(0,s))}return a}function sc(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&i)continue;a=" ";break}default:a=String.fromCharCode(s)}i=s===-2,r.push(a)}return r.join("")}function ac(e){const r={constructs:po([nc,...(e||{}).extensions||[]]),content:i(vo),defined:[],document:i(So),flow:i(zl),lazy:{},string:i(Hl),text:i(Vl)};return r;function i(s){return a;function a(o){return rc(r,s,o)}}}function oc(e){for(;!ci(e););return e}const or=/[\0\t\n\r]/g;function lc(){let e=1,t="",n=!0,r;return i;function i(s,a,o){const c=[];let l,u,h,f,p;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),h=0,t="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(or.lastIndex=h,l=or.exec(s),f=l&&l.index!==void 0?l.index:s.length,p=s.charCodeAt(f),!l){t=s.slice(h);break}if(p===10&&h===f&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),h<f&&(c.push(s.slice(h,f)),e+=f-h),p){case 0:{c.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,c.push(-2);e++<u;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}h=f+1}return o&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const cc=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function uc(e){return e.replace(cc,dc)}function dc(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return si(n.slice(s?2:1),s?16:10)}return wn(n)||e}const mi={}.hasOwnProperty;function hc(e,t,n){return typeof t!="string"&&(n=t,t=void 0),pc(n)(oc(ac(n).document().write(lc()(e,t,!0))))}function pc(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Pn),autolinkProtocol:k,autolinkEmail:k,atxHeading:s(An),blockQuote:s(J),characterEscape:k,characterReference:k,codeFenced:s(oe),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(oe,a),codeText:s(G,a),codeTextData:k,data:k,codeFlowValue:k,definition:s(Se),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(Xe),hardBreakEscape:s(jn),hardBreakTrailing:s(jn),htmlFlow:s(Nn,a),htmlFlowData:k,htmlText:s(Nn,a),htmlTextData:k,image:s(_i),label:a,link:s(Pn),listItem:s(Ai),listItemValue:f,listOrdered:s(In,h),listUnordered:s(In),paragraph:s(ji),reference:m,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(An),strong:s(Ni),thematicBreak:s(Ii)},exit:{atxHeading:c(),atxHeadingSequence:M,autolink:c(),autolinkEmail:ce,autolinkProtocol:ae,blockQuote:c(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:V,characterReferenceMarkerNumeric:V,characterReferenceValue:W,characterReference:ie,codeFenced:c(T),codeFencedFence:v,codeFencedFenceInfo:p,codeFencedFenceMeta:S,codeFlowValue:N,codeIndented:c(w),codeText:c(F),codeTextData:N,data:N,definition:c(),definitionDestinationString:L,definitionLabelString:C,definitionTitleString:A,emphasis:c(),hardBreakEscape:c(P),hardBreakTrailing:c(P),htmlFlow:c(D),htmlFlowData:N,htmlText:c(q),htmlTextData:N,image:c(ne),label:B,labelText:O,lineEnding:j,link:c(Z),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:z,resourceDestinationString:g,resourceTitleString:K,resource:le,setextHeading:c(E),setextHeadingLineSequence:b,setextHeadingText:y,strong:c(),thematicBreak:c()}};gi(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(_){let R={type:"root",children:[]};const U={stack:[R],tokenStack:[],config:t,enter:o,exit:l,buffer:a,resume:u,data:n},Q=[];let X=-1;for(;++X<_.length;)if(_[X][1].type==="listOrdered"||_[X][1].type==="listUnordered")if(_[X][0]==="enter")Q.push(X);else{const be=Q.pop();X=i(_,be,X)}for(X=-1;++X<_.length;){const be=t[_[X][0]];mi.call(be,_[X][1].type)&&be[_[X][1].type].call(Object.assign({sliceSerialize:_[X][2].sliceSerialize},U),_[X][1])}if(U.tokenStack.length>0){const be=U.tokenStack[U.tokenStack.length-1];(be[1]||lr).call(U,void 0,be[0])}for(R.position={start:Ie(_.length>0?_[0][1].start:{line:1,column:1,offset:0}),end:Ie(_.length>0?_[_.length-2][1].end:{line:1,column:1,offset:0})},X=-1;++X<t.transforms.length;)R=t.transforms[X](R)||R;return R}function i(_,R,U){let Q=R-1,X=-1,be=!1,qe,_e,Ze,et;for(;++Q<=U;){const fe=_[Q];switch(fe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{fe[0]==="enter"?X++:X--,et=void 0;break}case"lineEndingBlank":{fe[0]==="enter"&&(qe&&!et&&!X&&!Ze&&(Ze=Q),et=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:et=void 0}if(!X&&fe[0]==="enter"&&fe[1].type==="listItemPrefix"||X===-1&&fe[0]==="exit"&&(fe[1].type==="listUnordered"||fe[1].type==="listOrdered")){if(qe){let Fe=Q;for(_e=void 0;Fe--;){const Ae=_[Fe];if(Ae[1].type==="lineEnding"||Ae[1].type==="lineEndingBlank"){if(Ae[0]==="exit")continue;_e&&(_[_e][1].type="lineEndingBlank",be=!0),Ae[1].type="lineEnding",_e=Fe}else if(!(Ae[1].type==="linePrefix"||Ae[1].type==="blockQuotePrefix"||Ae[1].type==="blockQuotePrefixWhitespace"||Ae[1].type==="blockQuoteMarker"||Ae[1].type==="listItemIndent"))break}Ze&&(!_e||Ze<_e)&&(qe._spread=!0),qe.end=Object.assign({},_e?_[_e][1].start:fe[1].end),_.splice(_e||Q,0,["exit",qe,fe[2]]),Q++,U++}if(fe[1].type==="listItemPrefix"){const Fe={type:"listItem",_spread:!1,start:Object.assign({},fe[1].start),end:void 0};qe=Fe,_.splice(Q,0,["enter",Fe,fe[2]]),Q++,U++,Ze=void 0,et=!0}}}return _[R][1]._spread=be,U}function s(_,R){return U;function U(Q){o.call(this,_(Q),Q),R&&R.call(this,Q)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(_,R,U){this.stack[this.stack.length-1].children.push(_),this.stack.push(_),this.tokenStack.push([R,U||void 0]),_.position={start:Ie(R.start),end:void 0}}function c(_){return R;function R(U){_&&_.call(this,U),l.call(this,U)}}function l(_,R){const U=this.stack.pop(),Q=this.tokenStack.pop();if(Q)Q[0].type!==_.type&&(R?R.call(this,_,Q[0]):(Q[1]||lr).call(this,_,Q[0]));else throw new Error("Cannot close `"+_.type+"` ("+ot({start:_.start,end:_.end})+"): itâ€™s not open");U.position.end=Ie(_.end)}function u(){return uo(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(_){if(this.data.expectingFirstListItemValue){const R=this.stack[this.stack.length-2];R.start=Number.parseInt(this.sliceSerialize(_),10),this.data.expectingFirstListItemValue=void 0}}function p(){const _=this.resume(),R=this.stack[this.stack.length-1];R.lang=_}function S(){const _=this.resume(),R=this.stack[this.stack.length-1];R.meta=_}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function T(){const _=this.resume(),R=this.stack[this.stack.length-1];R.value=_.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function w(){const _=this.resume(),R=this.stack[this.stack.length-1];R.value=_.replace(/(\r?\n|\r)$/g,"")}function C(_){const R=this.resume(),U=this.stack[this.stack.length-1];U.label=R,U.identifier=Ve(this.sliceSerialize(_)).toLowerCase()}function A(){const _=this.resume(),R=this.stack[this.stack.length-1];R.title=_}function L(){const _=this.resume(),R=this.stack[this.stack.length-1];R.url=_}function M(_){const R=this.stack[this.stack.length-1];if(!R.depth){const U=this.sliceSerialize(_).length;R.depth=U}}function y(){this.data.setextHeadingSlurpLineEnding=!0}function b(_){const R=this.stack[this.stack.length-1];R.depth=this.sliceSerialize(_).codePointAt(0)===61?1:2}function E(){this.data.setextHeadingSlurpLineEnding=void 0}function k(_){const U=this.stack[this.stack.length-1].children;let Q=U[U.length-1];(!Q||Q.type!=="text")&&(Q=Pi(),Q.position={start:Ie(_.start),end:void 0},U.push(Q)),this.stack.push(Q)}function N(_){const R=this.stack.pop();R.value+=this.sliceSerialize(_),R.position.end=Ie(_.end)}function j(_){const R=this.stack[this.stack.length-1];if(this.data.atHardBreak){const U=R.children[R.children.length-1];U.position.end=Ie(_.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(R.type)&&(k.call(this,_),N.call(this,_))}function P(){this.data.atHardBreak=!0}function D(){const _=this.resume(),R=this.stack[this.stack.length-1];R.value=_}function q(){const _=this.resume(),R=this.stack[this.stack.length-1];R.value=_}function F(){const _=this.resume(),R=this.stack[this.stack.length-1];R.value=_}function Z(){const _=this.stack[this.stack.length-1];if(this.data.inReference){const R=this.data.referenceType||"shortcut";_.type+="Reference",_.referenceType=R,delete _.url,delete _.title}else delete _.identifier,delete _.label;this.data.referenceType=void 0}function ne(){const _=this.stack[this.stack.length-1];if(this.data.inReference){const R=this.data.referenceType||"shortcut";_.type+="Reference",_.referenceType=R,delete _.url,delete _.title}else delete _.identifier,delete _.label;this.data.referenceType=void 0}function O(_){const R=this.sliceSerialize(_),U=this.stack[this.stack.length-2];U.label=uc(R),U.identifier=Ve(R).toLowerCase()}function B(){const _=this.stack[this.stack.length-1],R=this.resume(),U=this.stack[this.stack.length-1];if(this.data.inReference=!0,U.type==="link"){const Q=_.children;U.children=Q}else U.alt=R}function g(){const _=this.resume(),R=this.stack[this.stack.length-1];R.url=_}function K(){const _=this.resume(),R=this.stack[this.stack.length-1];R.title=_}function le(){this.data.inReference=void 0}function m(){this.data.referenceType="collapsed"}function z(_){const R=this.resume(),U=this.stack[this.stack.length-1];U.label=R,U.identifier=Ve(this.sliceSerialize(_)).toLowerCase(),this.data.referenceType="full"}function V(_){this.data.characterReferenceType=_.type}function W(_){const R=this.sliceSerialize(_),U=this.data.characterReferenceType;let Q;U?(Q=si(R,U==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Q=wn(R);const X=this.stack[this.stack.length-1];X.value+=Q}function ie(_){const R=this.stack.pop();R.position.end=Ie(_.end)}function ae(_){N.call(this,_);const R=this.stack[this.stack.length-1];R.url=this.sliceSerialize(_)}function ce(_){N.call(this,_);const R=this.stack[this.stack.length-1];R.url="mailto:"+this.sliceSerialize(_)}function J(){return{type:"blockquote",children:[]}}function oe(){return{type:"code",lang:null,meta:null,value:""}}function G(){return{type:"inlineCode",value:""}}function Se(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Xe(){return{type:"emphasis",children:[]}}function An(){return{type:"heading",depth:0,children:[]}}function jn(){return{type:"break"}}function Nn(){return{type:"html",value:""}}function _i(){return{type:"image",title:null,url:"",alt:null}}function Pn(){return{type:"link",title:null,url:"",children:[]}}function In(_){return{type:"list",ordered:_.type==="listOrdered",start:null,spread:_._spread,children:[]}}function Ai(_){return{type:"listItem",spread:_._spread,checked:null,children:[]}}function ji(){return{type:"paragraph",children:[]}}function Ni(){return{type:"strong",children:[]}}function Pi(){return{type:"text",value:""}}function Ii(){return{type:"thematicBreak"}}}function Ie(e){return{line:e.line,column:e.column,offset:e.offset}}function gi(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?gi(e,r):fc(e,r)}}function fc(e,t){let n;for(n in t)if(mi.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function lr(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+ot({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+ot({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+ot({start:t.start,end:t.end})+") is still open")}function mc(e){const t=this;t.parser=n;function n(r){return hc(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function gc(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function yc(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function xc(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function bc(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function wc(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function vc(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Je(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let a,o=e.footnoteCounts.get(r);o===void 0?(o=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=s+1,o+=1,e.footnoteCounts.set(r,o);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,c);const l={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,l),e.applyData(t,l)}function kc(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Sc(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function yi(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function Tc(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return yi(e,t);const i={src:Je(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function Ec(e,t){const n={src:Je(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Cc(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function _c(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return yi(e,t);const i={href:Je(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Ac(e,t){const n={href:Je(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function jc(e,t,n){const r=e.all(t),i=n?Nc(n):xi(t),s={},a=[];if(typeof t.checked=="boolean"){const u=r[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const u=r[o];(i||o!==0||u.type!=="element"||u.tagName!=="p")&&a.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?a.push(...u.children):a.push(u)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:a};return e.patch(t,l),e.applyData(t,l)}function Nc(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=xi(n[r])}return t}function xi(e){const t=e.spread;return t??e.children.length>1}function Pc(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Ic(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Rc(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Dc(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Lc(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],a),i.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=gn(t.children[1]),c=Xr(t.children[t.children.length-1]);o&&c&&(a.position={start:o,end:c}),i.push(a)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function Oc(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,o=a?a.length:t.children.length;let c=-1;const l=[];for(;++c<o;){const h=t.children[c],f={},p=a?a[c]:void 0;p&&(f.align=p);let S={type:"element",tagName:s,properties:f,children:[]};h&&(S.children=e.all(h),e.patch(h,S),S=e.applyData(h,S)),l.push(S)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,u),e.applyData(t,u)}function Mc(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const cr=9,ur=32;function qc(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(dr(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(dr(t.slice(i),i>0,!1)),s.join("")}function dr(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===cr||s===ur;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===cr||s===ur;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Bc(e,t){const n={type:"text",value:qc(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Fc(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const zc={blockquote:gc,break:yc,code:xc,delete:bc,emphasis:wc,footnoteReference:vc,heading:kc,html:Sc,imageReference:Tc,image:Ec,inlineCode:Cc,linkReference:_c,link:Ac,listItem:jc,list:Pc,paragraph:Ic,root:Rc,strong:Dc,table:Lc,tableCell:Mc,tableRow:Oc,text:Bc,thematicBreak:Fc,toml:yt,yaml:yt,definition:yt,footnoteDefinition:yt};function yt(){}const bi=-1,jt=0,ct=1,Tt=2,Sn=3,Tn=4,En=5,Cn=6,wi=7,vi=8,hr=typeof self=="object"?self:globalThis,$c=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,a]=t[i];switch(s){case jt:case bi:return n(a,i);case ct:{const o=n([],i);for(const c of a)o.push(r(c));return o}case Tt:{const o=n({},i);for(const[c,l]of a)o[r(c)]=r(l);return o}case Sn:return n(new Date(a),i);case Tn:{const{source:o,flags:c}=a;return n(new RegExp(o,c),i)}case En:{const o=n(new Map,i);for(const[c,l]of a)o.set(r(c),r(l));return o}case Cn:{const o=n(new Set,i);for(const c of a)o.add(r(c));return o}case wi:{const{name:o,message:c}=a;return n(new hr[o](c),i)}case vi:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:o}=new Uint8Array(a);return n(new DataView(o),a)}}return n(new hr[s](a),i)};return r},pr=e=>$c(new Map,e)(0),Ue="",{toString:Uc}={},{keys:Hc}=Object,at=e=>{const t=typeof e;if(t!=="object"||!e)return[jt,t];const n=Uc.call(e).slice(8,-1);switch(n){case"Array":return[ct,Ue];case"Object":return[Tt,Ue];case"Date":return[Sn,Ue];case"RegExp":return[Tn,Ue];case"Map":return[En,Ue];case"Set":return[Cn,Ue];case"DataView":return[ct,n]}return n.includes("Array")?[ct,n]:n.includes("Error")?[wi,n]:[Tt,n]},xt=([e,t])=>e===jt&&(t==="function"||t==="symbol"),Vc=(e,t,n,r)=>{const i=(a,o)=>{const c=r.push(a)-1;return n.set(o,c),c},s=a=>{if(n.has(a))return n.get(a);let[o,c]=at(a);switch(o){case jt:{let u=a;switch(c){case"bigint":o=vi,u=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return i([bi],a)}return i([o,u],a)}case ct:{if(c){let f=a;return c==="DataView"?f=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(f=new Uint8Array(a)),i([c,[...f]],a)}const u=[],h=i([o,u],a);for(const f of a)u.push(s(f));return h}case Tt:{if(c)switch(c){case"BigInt":return i([c,a.toString()],a);case"Boolean":case"Number":case"String":return i([c,a.valueOf()],a)}if(t&&"toJSON"in a)return s(a.toJSON());const u=[],h=i([o,u],a);for(const f of Hc(a))(e||!xt(at(a[f])))&&u.push([s(f),s(a[f])]);return h}case Sn:return i([o,a.toISOString()],a);case Tn:{const{source:u,flags:h}=a;return i([o,{source:u,flags:h}],a)}case En:{const u=[],h=i([o,u],a);for(const[f,p]of a)(e||!(xt(at(f))||xt(at(p))))&&u.push([s(f),s(p)]);return h}case Cn:{const u=[],h=i([o,u],a);for(const f of a)(e||!xt(at(f)))&&u.push(s(f));return h}}const{message:l}=a;return i([o,{name:c,message:l}],a)};return s},fr=(e,{json:t,lossy:n}={})=>{const r=[];return Vc(!(t||n),!!t,new Map,r)(e),r},Et=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?pr(fr(e,t)):structuredClone(e):(e,t)=>pr(fr(e,t));function Qc(e,t){const n=[{type:"text",value:"â†©"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Wc(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Gc(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Qc,r=e.options.footnoteBackLabel||Wc,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let c=-1;for(;++c<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[c]);if(!l)continue;const u=e.all(l),h=String(l.identifier).toUpperCase(),f=Je(h.toLowerCase());let p=0;const S=[],v=e.footnoteCounts.get(h);for(;v!==void 0&&++p<=v;){S.length>0&&S.push({type:"text",value:" "});let C=typeof n=="string"?n:n(c,p);typeof C=="string"&&(C={type:"text",value:C}),S.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,p),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const T=u[u.length-1];if(T&&T.type==="element"&&T.tagName==="p"){const C=T.children[T.children.length-1];C&&C.type==="text"?C.value+=" ":T.children.push({type:"text",value:" "}),T.children.push(...S)}else u.push(...S);const w={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(u,!0)};e.patch(l,w),o.push(w)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Et(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:`
`}]}}const ki=(function(e){if(e==null)return Xc;if(typeof e=="function")return Nt(e);if(typeof e=="object")return Array.isArray(e)?Yc(e):Kc(e);if(typeof e=="string")return Jc(e);throw new Error("Expected function, string, or object as test")});function Yc(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ki(e[n]);return Nt(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Kc(e){const t=e;return Nt(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Jc(e){return Nt(t);function t(n){return n&&n.type===e}}function Nt(e){return t;function t(n,r,i){return!!(Zc(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Xc(){return!0}function Zc(e){return e!==null&&typeof e=="object"&&"type"in e}const Si=[],eu=!0,mr=!1,tu="skip";function nu(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=ki(i),a=r?-1:1;o(e,void 0,[])();function o(c,l,u){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const p=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(c.type+(p?"<"+p+">":""))+")"})}return f;function f(){let p=Si,S,v,T;if((!t||s(c,l,u[u.length-1]||void 0))&&(p=ru(n(c,u)),p[0]===mr))return p;if("children"in c&&c.children){const w=c;if(w.children&&p[0]!==tu)for(v=(r?w.children.length:-1)+a,T=u.concat(w);v>-1&&v<w.children.length;){const C=w.children[v];if(S=o(C,v,T)(),S[0]===mr)return S;v=typeof S[1]=="number"?S[1]:v+a}}return p}}}function ru(e){return Array.isArray(e)?e:typeof e=="number"?[eu,e]:e==null?Si:[e]}function Ti(e,t,n,r){let i,s,a;typeof t=="function"&&typeof n!="function"?(s=void 0,a=t,i=n):(s=t,a=n,i=r),nu(e,s,o,i);function o(c,l){const u=l[l.length-1],h=u?u.children.indexOf(c):void 0;return a(c,h,u)}}const rn={}.hasOwnProperty,iu={};function su(e,t){const n=t||iu,r=new Map,i=new Map,s=new Map,a={...zc,...n.handlers},o={all:l,applyData:ou,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:a,one:c,options:n,patch:au,wrap:cu};return Ti(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?r:i,f=String(u.identifier).toUpperCase();h.has(f)||h.set(f,u)}}),o;function c(u,h){const f=u.type,p=o.handlers[f];if(rn.call(o.handlers,f)&&p)return p(o,u,h);if(o.options.passThrough&&o.options.passThrough.includes(f)){if("children"in u){const{children:v,...T}=u,w=Et(T);return w.children=o.all(u),w}return Et(u)}return(o.options.unknownHandler||lu)(o,u,h)}function l(u){const h=[];if("children"in u){const f=u.children;let p=-1;for(;++p<f.length;){const S=o.one(f[p],u);if(S){if(p&&f[p-1].type==="break"&&(!Array.isArray(S)&&S.type==="text"&&(S.value=gr(S.value)),!Array.isArray(S)&&S.type==="element")){const v=S.children[0];v&&v.type==="text"&&(v.value=gr(v.value))}Array.isArray(S)?h.push(...S):h.push(S)}}}return h}}function au(e,t){e.position&&(t.position=$a(e))}function ou(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&s&&Object.assign(n.properties,Et(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function lu(e,t){const n=t.data||{},r="value"in t&&!(rn.call(n,"hProperties")||rn.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function cu(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function gr(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function yr(e,t){const n=su(e,t),r=n.one(e,void 0),i=Gc(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function uu(e,t){return e&&"run"in e?async function(n,r){const i=yr(n,{file:r,...t});await e.run(i,r)}:function(n,r){return yr(n,{file:r,...e||t})}}function xr(e){if(e)throw e}var Ft,br;function du(){if(br)return Ft;br=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(l){return typeof Array.isArray=="function"?Array.isArray(l):t.call(l)==="[object Array]"},s=function(l){if(!l||t.call(l)!=="[object Object]")return!1;var u=e.call(l,"constructor"),h=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!u&&!h)return!1;var f;for(f in l);return typeof f>"u"||e.call(l,f)},a=function(l,u){n&&u.name==="__proto__"?n(l,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):l[u.name]=u.newValue},o=function(l,u){if(u==="__proto__")if(e.call(l,u)){if(r)return r(l,u).value}else return;return l[u]};return Ft=function c(){var l,u,h,f,p,S,v=arguments[0],T=1,w=arguments.length,C=!1;for(typeof v=="boolean"&&(C=v,v=arguments[1]||{},T=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});T<w;++T)if(l=arguments[T],l!=null)for(u in l)h=o(v,u),f=o(l,u),v!==f&&(C&&f&&(s(f)||(p=i(f)))?(p?(p=!1,S=h&&i(h)?h:[]):S=h&&s(h)?h:{},a(v,{name:u,newValue:c(C,S,f)})):typeof f<"u"&&a(v,{name:u,newValue:f}));return v},Ft}var hu=du();const zt=Cr(hu);function sn(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function pu(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...i);function o(c,...l){const u=e[++s];let h=-1;if(c){a(c);return}for(;++h<i.length;)(l[h]===null||l[h]===void 0)&&(l[h]=i[h]);i=l,u?fu(u,o)(...l):a(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function fu(e,t){let n;return r;function r(...a){const o=e.length>a.length;let c;o&&a.push(i);try{c=e.apply(this,a)}catch(l){const u=l;if(o&&n)throw u;return i(u)}o||(c&&c.then&&typeof c.then=="function"?c.then(s,i):c instanceof Error?i(c):s(c))}function i(a,...o){n||(n=!0,t(a,...o))}function s(a){i(null,a)}}const Te={basename:mu,dirname:gu,extname:yu,join:xu,sep:"/"};function mu(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');mt(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,o=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1),o>-1&&(e.codePointAt(i)===t.codePointAt(o--)?o<0&&(r=i):(o=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function gu(e){if(mt(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function yu(e){mt(e);let t=e.length,n=-1,r=0,i=-1,s=0,a;for(;t--;){const o=e.codePointAt(t);if(o===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),o===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function xu(...e){let t=-1,n;for(;++t<e.length;)mt(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":bu(n)}function bu(e){mt(e);const t=e.codePointAt(0)===47;let n=wu(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function wu(e,t){let n="",r=0,i=-1,s=0,a=-1,o,c;for(;++a<=e.length;){if(a<e.length)o=e.codePointAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length>0){n="",r=0,i=a,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,a):n=e.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s>-1?s++:s=-1}return n}function mt(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const vu={cwd:ku};function ku(){return"/"}function an(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Su(e){if(typeof e=="string")e=new URL(e);else if(!an(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Tu(e)}function Tu(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const $t=["history","path","basename","stem","extname","dirname"];class Ei{constructor(t){let n;t?an(t)?n={path:t}:typeof t=="string"||Eu(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":vu.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<$t.length;){const s=$t[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)$t.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Te.basename(this.path):void 0}set basename(t){Ht(t,"basename"),Ut(t,"basename"),this.path=Te.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Te.dirname(this.path):void 0}set dirname(t){wr(this.basename,"dirname"),this.path=Te.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Te.extname(this.path):void 0}set extname(t){if(Ut(t,"extname"),wr(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Te.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){an(t)&&(t=Su(t)),Ht(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Te.basename(this.path,this.extname):void 0}set stem(t){Ht(t,"stem"),Ut(t,"stem"),this.path=Te.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new ue(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Ut(e,t){if(e&&e.includes(Te.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Te.sep+"`")}function Ht(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function wr(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Eu(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Cu=(function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),_u={}.hasOwnProperty;class _n extends Cu{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=pu()}copy(){const t=new _n;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(zt(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Wt("data",this.frozen),this.namespace[t]=n,this):_u.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Wt("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=bt(t),r=this.parser||this.Parser;return Vt("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Vt("process",this.parser||this.Parser),Qt("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,a){const o=bt(t),c=r.parse(o);r.run(c,o,function(u,h,f){if(u||!h||!f)return l(u);const p=h,S=r.stringify(p,f);Nu(S)?f.value=S:f.result=S,l(u,f)});function l(u,h){u||!h?a(u):s?s(h):n(void 0,h)}}}processSync(t){let n=!1,r;return this.freeze(),Vt("processSync",this.parser||this.Parser),Qt("processSync",this.compiler||this.Compiler),this.process(t,i),kr("processSync","process",n),r;function i(s,a){n=!0,xr(s),r=a}}run(t,n,r){vr(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(a,o){const c=bt(n);i.run(t,c,l);function l(u,h,f){const p=h||t;u?o(u):a?a(p):r(void 0,p,f)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),kr("runSync","run",r),i;function s(a,o){xr(a),i=o,r=!0}}stringify(t,n){this.freeze();const r=bt(n),i=this.compiler||this.Compiler;return Qt("stringify",i),vr(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(Wt("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?o(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")c(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[u,...h]=l;c(u,h)}else a(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function a(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(l.plugins),l.settings&&(i.settings=zt(!0,i.settings,l.settings))}function o(l){let u=-1;if(l!=null)if(Array.isArray(l))for(;++u<l.length;){const h=l[u];s(h)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function c(l,u){let h=-1,f=-1;for(;++h<r.length;)if(r[h][0]===l){f=h;break}if(f===-1)r.push([l,...u]);else if(u.length>0){let[p,...S]=u;const v=r[f][1];sn(v)&&sn(p)&&(p=zt(!0,v,p)),r[f]=[l,p,...S]}}}}const Au=new _n().freeze();function Vt(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Qt(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Wt(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function vr(e){if(!sn(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function kr(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function bt(e){return ju(e)?e:new Ei(e)}function ju(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Nu(e){return typeof e=="string"||Pu(e)}function Pu(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Iu="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Sr=[],Tr={allowDangerousHtml:!0},Ru=/^(https?|ircs?|mailto|xmpp)$/i,Du=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Pt(e){const t=Lu(e),n=Ou(e);return Mu(t.runSync(t.parse(n),n),e)}function Lu(e){const t=e.rehypePlugins||Sr,n=e.remarkPlugins||Sr,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Tr}:Tr;return Au().use(mc).use(n).use(uu,r).use(t)}function Ou(e){const t=e.children||"",n=new Ei;return typeof t=="string"&&(n.value=t),n}function Mu(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,s=t.disallowedElements,a=t.skipHtml,o=t.unwrapDisallowed,c=t.urlTransform||qu;for(const u of Du)Object.hasOwn(t,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+Iu+u.id,void 0);return Ti(e,l),Wa(e,{Fragment:d.Fragment,components:i,ignoreInvalidStyle:!0,jsx:d.jsx,jsxs:d.jsxs,passKeys:!0,passNode:!0});function l(u,h,f){if(u.type==="raw"&&f&&typeof h=="number")return a?f.children.splice(h,1):f.children[h]={type:"text",value:u.value},h;if(u.type==="element"){let p;for(p in Mt)if(Object.hasOwn(Mt,p)&&Object.hasOwn(u.properties,p)){const S=u.properties[p],v=Mt[p];(v===null||v.includes(u.tagName))&&(u.properties[p]=c(String(S||""),p,u))}}if(u.type==="element"){let p=n?!n.includes(u.tagName):s?s.includes(u.tagName):!1;if(!p&&r&&typeof h=="number"&&(p=!r(u,h,f)),p&&f&&typeof h=="number")return o&&u.children?f.children.splice(h,1,...u.children):f.children.splice(h,1),h}}}function qu(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||Ru.test(e.slice(0,t))?e:""}class Qe{static processedData=null;static loadingPromise=null;static async loadMitreDataAsync(){if(this.processedData)return this.processedData;if(this.loadingPromise)return this.loadingPromise;this.loadingPromise=this.fetchAndProcessData();const t=await this.loadingPromise;return this.processedData=t,t}static loadMitreData(){if(this.processedData)return this.processedData;const t=this.loadMitreDataSync();return this.processedData={tactics:t.tactics,techniques:t.techniques,software:t.software,groups:t.groups,tacticOrder:t.tacticOrder,techniquesByTactic:t.techniquesByTactic,softwareByType:t.softwareByType,softwareByTechnique:t.softwareByTechnique,techniquesBySoftware:t.techniquesBySoftware},this.processedData}static getTactics(){const t=this.loadMitreData();return t.tacticOrder.map(n=>t.tactics[n])}static getTechniquesForTactic(t){const n=this.loadMitreData(),i=(n.techniquesByTactic[t]||[]).map(o=>n.techniques[o]).filter(Boolean),s=i.filter(o=>o.type!=="pseudo_technique"),a=i.filter(o=>o.type==="pseudo_technique");return s.sort((o,c)=>o.name.localeCompare(c.name)),[...s,...a]}static getAllTechniques(){const t=this.loadMitreData();return Object.values(t.techniques)}static getSoftwareByType(t){const n=this.loadMitreData();return(t==="tool"?n.softwareByType.tools:n.softwareByType.malware).map(i=>n.software[i]).filter(Boolean)}static getAllSoftware(){const t=this.loadMitreData();return Object.values(t.software)}static getAllGroups(){const t=this.loadMitreData(),n=Object.values(t.groups),r=n.filter(s=>s.is_meta_group),i=n.filter(s=>!s.is_meta_group);return r.sort((s,a)=>a.external_id.localeCompare(s.external_id)),i.sort((s,a)=>s.name.localeCompare(a.name)),[...r,...i]}static getSoftwareForTechnique(t){const n=this.loadMitreData();return(n.softwareByTechnique[t]||[]).map(i=>n.software[i]).filter(Boolean)}static getTechniquesForSoftware(t){const n=this.loadMitreData();return(n.techniquesBySoftware[t]||[]).map(i=>n.techniques[i]).filter(Boolean)}static searchTechniques(t){const n=this.loadMitreData(),r=t.toLowerCase();return Object.values(n.techniques).filter(i=>i.name.toLowerCase().includes(r)||i.external_id.toLowerCase().includes(r)||i.description.toLowerCase().includes(r))}static searchSoftware(t){const n=this.loadMitreData(),r=t.toLowerCase();return Object.values(n.software).filter(i=>i.name.toLowerCase().includes(r)||i.external_id.toLowerCase().includes(r)||i.description.toLowerCase().includes(r))}static searchGroups(t){const n=this.loadMitreData(),r=t.toLowerCase();return Object.values(n.groups).filter(i=>i.name.toLowerCase().includes(r)||i.external_id.toLowerCase().includes(r)||i.description.toLowerCase().includes(r)||i.aliases&&i.aliases.some(s=>s.toLowerCase().includes(r)))}static getTechniqueById(t){return this.loadMitreData().techniques[t]||null}static getTacticById(t){return this.loadMitreData().tactics[t]||null}static getSoftwareById(t){return this.loadMitreData().software[t]||null}static getGroupById(t){return this.loadMitreData().groups[t]||null}static getTacticsForTechnique(t){const n=this.loadMitreData(),r=n.techniques[t];if(!r||!r.kill_chain_phases)return[];const i=r.kill_chain_phases.map(a=>a.phase_name),s=[];return Object.values(n.tactics).forEach(a=>{i.includes(a.x_mitre_shortname)&&s.push(a)}),s}static getDataStatistics(){const t=this.loadMitreData();return{totalTactics:Object.keys(t.tactics).length,totalTechniques:Object.keys(t.techniques).length,totalSoftware:Object.keys(t.software).length,totalGroups:Object.keys(t.groups).length,toolsCount:t.softwareByType.tools.length,malwareCount:t.softwareByType.malware.length,techniquesByCoverage:Object.entries(t.techniquesByTactic).map(([n,r])=>({tactic:t.tactics[n]?.name||n,techniqueCount:r.length}))}}static clearCache(){this.processedData=null,this.loadingPromise=null}static resolveUrl(t){if(t.startsWith("/src/data/")){const n="/ikb-demo/";return(n.endsWith("/")?n.slice(0,-1):n)+t}return t.startsWith("/"),t}static async fetchAndProcessData(){try{const n=this.resolveUrl("/src/data/mitre-attack-processed.json"),r=await fetch(n);if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const i=await r.json();return console.log("Successfully loaded full MITRE ATT&CK dataset:",{tacticsCount:Object.keys(i.tactics).length,techniquesCount:Object.keys(i.techniques).length,softwareCount:Object.keys(i.software).length,groupsCount:Object.keys(i.groups).length}),await this.loadAndMergeExtensions(i)}catch(t){console.warn("Failed to load mitre-attack-processed.json, using fallback data:",t);const n=this.loadMitreDataSync();return{tactics:n.tactics,techniques:n.techniques,software:n.software,groups:n.groups,tacticOrder:n.tacticOrder,techniquesByTactic:n.techniquesByTactic,softwareByType:n.softwareByType,softwareByTechnique:n.softwareByTechnique,techniquesBySoftware:n.techniquesBySoftware}}}static async loadAndMergeExtensions(t){try{const r=this.resolveUrl("/src/data/attack-extensions.json"),i=await fetch(r);if(!i.ok)return console.warn("Failed to load attack-extensions.json, continuing without extensions"),this.buildProcessedData(t);const s=await i.json();console.log("Successfully loaded attack extensions");const a={tactics:{...t.tactics},techniques:{...t.techniques},software:{...t.software},groups:{...t.groups},tacticOrder:[...t.tacticOrder],techniquesByTactic:{...t.techniquesByTactic},softwareByType:{...t.softwareByType},softwareByTechnique:{...t.softwareByTechnique},techniquesBySoftware:{...t.techniquesBySoftware}};if(s.techniques?.tactic_template){const o=s.techniques.tactic_template;Object.keys(a.tactics).forEach(c=>{const l=a.tactics[c],u=`N${c.substring(2)}`,h={id:u,name:o.technique.name,description:o.technique.description,external_id:u,kill_chain_phases:[{phase_name:l.x_mitre_shortname}],type:"pseudo_technique",sub_techniques:o.sub_techniques.map(f=>({...f,external_id:`${u}${f.id}`}))};a.techniques[u]=h,a.techniquesByTactic[c]||(a.techniquesByTactic[c]=[]),a.techniquesByTactic[c].push(u)})}return s.groups?.meta_groups&&s.groups.meta_groups.forEach(o=>{a.groups[o.id]={id:o.id,name:o.name,description:o.description,external_id:o.external_id,aliases:o.aliases||[],type:o.type,category:o.category,usage:o.usage,is_n_code:o.is_n_code,is_meta_group:o.is_meta_group}}),console.log("Successfully merged attack extensions:",{nCodeTechniques:Object.values(a.techniques).filter(o=>o.type==="pseudo_technique").length,metaGroups:Object.values(a.groups).filter(o=>o.is_meta_group).length}),this.buildProcessedData(a)}catch(n){return console.warn("Failed to load or merge extensions:",n),this.buildProcessedData(t)}}static buildProcessedData(t){return{tactics:t.tactics,techniques:t.techniques,software:t.software,groups:t.groups,tacticOrder:t.tacticOrder,techniquesByTactic:t.techniquesByTactic,softwareByType:t.softwareByType,softwareByTechnique:t.softwareByTechnique,techniquesBySoftware:t.techniquesBySoftware}}static getSoftwareBySelectedTechniques(t,n){const r=new Set;return Object.values(t).forEach(i=>{Object.entries(i).forEach(([s,a])=>{a&&n[s]&&n[s].forEach(o=>{r.add(o)})})}),Array.from(r)}static getSoftwareRecommendationScore(t,n,r){const i=r[t]||[];if(i.length===0)return 0;let s=0;const a=new Set;return Object.values(n).forEach(o=>{Object.entries(o).forEach(([c,l])=>{l&&a.add(c)})}),i.forEach(o=>{a.has(o)&&s++}),a.size>0?s/a.size:0}static loadMitreDataSync(){return{tactics:{TA0001:{id:"TA0001",name:"Initial Access",description:"The adversary is trying to get into your network.",external_id:"TA0001",x_mitre_shortname:"initial-access"},TA0002:{id:"TA0002",name:"Execution",description:"The adversary is trying to run malicious code.",external_id:"TA0002",x_mitre_shortname:"execution"},TA0003:{id:"TA0003",name:"Persistence",description:"The adversary is trying to maintain their foothold.",external_id:"TA0003",x_mitre_shortname:"persistence"},TA0004:{id:"TA0004",name:"Privilege Escalation",description:"The adversary is trying to gain higher-level permissions.",external_id:"TA0004",x_mitre_shortname:"privilege-escalation"},TA0005:{id:"TA0005",name:"Defense Evasion",description:"The adversary is trying to avoid being detected.",external_id:"TA0005",x_mitre_shortname:"defense-evasion"},TA0006:{id:"TA0006",name:"Credential Access",description:"The adversary is trying to steal account names and passwords.",external_id:"TA0006",x_mitre_shortname:"credential-access"},TA0007:{id:"TA0007",name:"Discovery",description:"The adversary is trying to figure out your environment.",external_id:"TA0007",x_mitre_shortname:"discovery"},TA0008:{id:"TA0008",name:"Lateral Movement",description:"The adversary is trying to move through your environment.",external_id:"TA0008",x_mitre_shortname:"lateral-movement"},TA0009:{id:"TA0009",name:"Collection",description:"The adversary is trying to gather data of interest to their goal.",external_id:"TA0009",x_mitre_shortname:"collection"},TA0010:{id:"TA0010",name:"Exfiltration",description:"The adversary is trying to steal data.",external_id:"TA0010",x_mitre_shortname:"exfiltration"},TA0011:{id:"TA0011",name:"Command and Control",description:"The adversary is trying to communicate with compromised systems to control them.",external_id:"TA0011",x_mitre_shortname:"command-and-control"},TA0040:{id:"TA0040",name:"Impact",description:"The adversary is trying to manipulate, interrupt, or destroy your systems and data.",external_id:"TA0040",x_mitre_shortname:"impact"}},techniques:{T1566:{id:"T1566",name:"Phishing",description:"Adversaries may send phishing messages to gain access to victim systems.",external_id:"T1566",kill_chain_phases:[{phase_name:"initial-access"}],x_mitre_platforms:["Linux","macOS","Windows"],x_mitre_version:"2.3"},T1059:{id:"T1059",name:"Command and Scripting Interpreter",description:"Adversaries may abuse command and script interpreters to execute commands, scripts, or binaries.",external_id:"T1059",kill_chain_phases:[{phase_name:"execution"}],x_mitre_platforms:["Linux","macOS","Windows"],x_mitre_version:"1.3"},T1547:{id:"T1547",name:"Boot or Logon Autostart Execution",description:"Adversaries may configure system settings to automatically execute a program during system boot or logon.",external_id:"T1547",kill_chain_phases:[{phase_name:"persistence"},{phase_name:"privilege-escalation"}],x_mitre_platforms:["Linux","macOS","Windows"],x_mitre_version:"1.1"},T1055:{id:"T1055",name:"Process Injection",description:"Adversaries may inject code into processes in order to evade process-based defenses.",external_id:"T1055",kill_chain_phases:[{phase_name:"defense-evasion"},{phase_name:"privilege-escalation"}],x_mitre_platforms:["Linux","macOS","Windows"],x_mitre_version:"1.3"},T1003:{id:"T1003",name:"OS Credential Dumping",description:"Adversaries may attempt to dump credentials to obtain account login and credential material.",external_id:"T1003",kill_chain_phases:[{phase_name:"credential-access"}],x_mitre_platforms:["Linux","macOS","Windows"],x_mitre_version:"1.4"},T1082:{id:"T1082",name:"System Information Discovery",description:"An adversary may attempt to get detailed information about the operating system and hardware.",external_id:"T1082",kill_chain_phases:[{phase_name:"discovery"}],x_mitre_platforms:["Linux","macOS","Windows"],x_mitre_version:"1.3"},T1021:{id:"T1021",name:"Remote Services",description:"Adversaries may use Valid Accounts to log into a service specifically designed to accept remote connections.",external_id:"T1021",kill_chain_phases:[{phase_name:"lateral-movement"}],x_mitre_platforms:["Linux","macOS","Windows"],x_mitre_version:"1.3"},T1005:{id:"T1005",name:"Data from Local System",description:"Adversaries may search local system sources, such as file systems and configuration files or local databases.",external_id:"T1005",kill_chain_phases:[{phase_name:"collection"}],x_mitre_platforms:["Linux","macOS","Windows"],x_mitre_version:"1.1"},T1041:{id:"T1041",name:"Exfiltration Over C2 Channel",description:"Adversaries may steal data by exfiltrating it over an existing command and control channel.",external_id:"T1041",kill_chain_phases:[{phase_name:"exfiltration"}],x_mitre_platforms:["Linux","macOS","Windows"],x_mitre_version:"1.0"},T1071:{id:"T1071",name:"Application Layer Protocol",description:"Adversaries may communicate using application layer protocols to avoid detection/network filtering.",external_id:"T1071",kill_chain_phases:[{phase_name:"command-and-control"}],x_mitre_platforms:["Linux","macOS","Windows"],x_mitre_version:"2.2"},T1486:{id:"T1486",name:"Data Encrypted for Impact",description:"Adversaries may encrypt data on target systems or on large numbers of systems in a network.",external_id:"T1486",kill_chain_phases:[{phase_name:"impact"}],x_mitre_platforms:["Linux","macOS","Windows"],x_mitre_version:"1.0"}},software:{S0154:{id:"S0154",name:"Cobalt Strike",description:"Cobalt Strike is a commercial, full-featured, penetration testing tool which bills itself as 'adversary simulation software designed to execute targeted attacks'.",external_id:"S0154",type:"tool",x_mitre_platforms:["Linux","macOS","Windows"]},S0002:{id:"S0002",name:"Mimikatz",description:"Mimikatz is a credential dumper capable of obtaining plaintext Windows account logins and passwords.",external_id:"S0002",type:"tool",x_mitre_platforms:["Windows"]},S0266:{id:"S0266",name:"TrickBot",description:"TrickBot is a Trojan spyware program that has mainly been used for targeting banking sites.",external_id:"S0266",type:"malware",x_mitre_platforms:["Windows"]}},groups:{G0016:{id:"G0016",name:"APT29",description:"APT29 is threat group that has been attributed to Russia's Foreign Intelligence Service.",external_id:"G0016",aliases:["APT29","YTTRIUM","The Dukes","Cozy Bear","CozyDuke"]},G0007:{id:"G0007",name:"APT28",description:"APT28 is a threat group that has been attributed to Russia's General Staff Main Intelligence Directorate (GRU) 85th Main Special Service Center (GTsSS) military unit 26165.",external_id:"G0007",aliases:["APT28","STRONTIUM","Fancy Bear","Sofacy","Sednit"]}},tacticOrder:["TA0001","TA0002","TA0003","TA0004","TA0005","TA0006","TA0007","TA0008","TA0009","TA0010","TA0011","TA0040"],techniquesByTactic:{TA0001:["T1566"],TA0002:["T1059"],TA0003:["T1547"],TA0004:["T1547","T1055"],TA0005:["T1055"],TA0006:["T1003"],TA0007:["T1082"],TA0008:["T1021"],TA0009:["T1005"],TA0010:["T1041"],TA0011:["T1071"],TA0040:["T1486"]},softwareByType:{tools:["S0154","S0002"],malware:["S0266"]},softwareByTechnique:{T1003:["S0002"],T1055:["S0154"],T1071:["S0154","S0266"]},techniquesBySoftware:{S0154:["T1055","T1071"],S0002:["T1003"],S0266:["T1071"]}}}}class Ci{static stageMappings=null;static FALLBACK_STAGE_MAPPINGS={survey:{name:"Survey",description:"Early reconnaissance and information gathering phase",tactics:["TA0042","TA0043"]},delivery:{name:"Delivery",description:"Attempts to deliver malicious payload or gain initial access",tactics:["TA0042","TA0043","TA0001"]},isolated_breach:{name:"Isolated Breach",description:"Limited compromise of individual systems without lateral movement",tactics:["TA0042","TA0043","TA0001","TA0002","TA0003","TA0004","TA0005","TA0006","TA0007","TA0009","TA0011","TA0010"]},extensive_breach:{name:"Extensive Breach",description:"Widespread compromise with lateral movement across the network",tactics:["TA0042","TA0043","TA0001","TA0002","TA0003","TA0004","TA0005","TA0006","TA0007","TA0008","TA0009","TA0011","TA0010"]},affect:{name:"Affect",description:"Direct impact on business operations, data destruction, or disruption",tactics:["TA0042","TA0043","TA0001","TA0002","TA0003","TA0004","TA0005","TA0006","TA0007","TA0008","TA0009","TA0011","TA0010","TA0040"]}};static async loadStageMappings(){if(this.stageMappings)return this.stageMappings;try{const t="/src/data/phase2-config.json",n="/ikb-demo/",i=(n.endsWith("/")?n.slice(0,-1):n)+t,s=await fetch(i);if(!s.ok)throw new Error(`Failed to load phase2-config.json: ${s.statusText}`);const a=await s.json();return this.stageMappings=a.mappings,console.log("Loaded stage mappings from phase2-config.json"),this.stageMappings}catch(t){return console.warn("Failed to load stage mappings from config file, using fallback:",t),this.stageMappings=this.FALLBACK_STAGE_MAPPINGS,this.stageMappings}}static async getStageMappings(){return await this.loadStageMappings()}static async classifyStage(t){const n=await this.getStageMappings(),r=t.attack_stage;if(r&&n[r])return{stage:r,confidence:"high",reasoning:[`Directly selected: ${n[r].name}`],recommendedTactics:n[r].tactics};const i=await this.performAutomaticClassification(t);return i.stage?i:{stage:null,confidence:"low",reasoning:["Insufficient information to determine attack stage"],recommendedTactics:[]}}static async performAutomaticClassification(t){const n=[];let r={survey:0,delivery:0,isolated_breach:0,extensive_breach:0,affect:0};this.analyzeIncidentType(t,r,n),this.analyzeImpact(t,r,n),this.analyzeScope(t,r,n),this.analyzeEvidence(t,r,n);const i=Math.max(...Object.values(r));if(i===0)return{stage:null,confidence:"low",reasoning:["No indicators found for automatic classification"],recommendedTactics:[]};const s=Object.entries(r).filter(([l,u])=>u===i).map(([l,u])=>l);s.length>1&&n.push(`Multiple stages have equal confidence: ${s.join(", ")}`);const a=s[0],o=i>=3?"high":i>=2?"medium":"low",c=await this.getStageMappings();return{stage:a,confidence:o,reasoning:n,recommendedTactics:c[a].tactics}}static analyzeIncidentType(t,n,r){const i=t.incident_category,s={suspicious_activity:{survey:2,delivery:1},attempted_attack:{delivery:2,survey:1},successful_attack:{isolated_breach:2,extensive_breach:1},data_breach:{extensive_breach:2,affect:3},system_compromise:{isolated_breach:2,extensive_breach:1},malware_infection:{isolated_breach:2,delivery:1},ransomware:{affect:3,extensive_breach:2},denial_of_service:{affect:3},insider_threat:{isolated_breach:1,extensive_breach:1,affect:2}};i&&s[i]&&(Object.entries(s[i]).forEach(([a,o])=>{n[a]+=o}),r.push(`Incident category "${i}" suggests ${Object.keys(s[i]).join(" or ")} stage`))}static analyzeImpact(t,n,r){switch(t.impact_level){case"none":case"minimal":n.survey+=2,n.delivery+=1,r.push("Minimal impact suggests early stage activity");break;case"minor":n.delivery+=2,n.isolated_breach+=1,r.push("Minor impact suggests delivery or isolated breach");break;case"moderate":n.isolated_breach+=2,n.extensive_breach+=1,r.push("Moderate impact suggests system compromise");break;case"major":case"severe":n.extensive_breach+=2,n.affect+=3,r.push("Major/severe impact suggests extensive compromise or affect stage");break}t.business_disruption==="yes"&&(n.affect+=2,n.extensive_breach+=1,r.push("Business disruption indicates affect or extensive breach stage")),(t.data_compromised==="yes"||t.data_stolen==="yes")&&(n.extensive_breach+=2,n.affect+=1,r.push("Data compromise suggests extensive breach or affect stage"))}static analyzeScope(t,n,r){const i=t.systems_affected;typeof i=="number"&&(i===0?(n.survey+=2,r.push("No systems affected suggests survey stage")):i===1?(n.isolated_breach+=2,r.push("Single system affected suggests isolated breach")):i<=5?(n.isolated_breach+=1,n.extensive_breach+=2,r.push("Multiple systems affected suggests extensive breach")):(n.extensive_breach+=2,n.affect+=1,r.push("Many systems affected suggests extensive breach or affect stage"))),(t.lateral_movement==="yes"||t.network_spread==="yes")&&(n.extensive_breach+=3,r.push("Lateral movement/network spread indicates extensive breach")),t.external_communication==="yes"&&(n.delivery+=1,n.isolated_breach+=1,n.extensive_breach+=2,r.push("External communication suggests active compromise"))}static analyzeEvidence(t,n,r){(t.suspicious_scanning==="yes"||t.information_gathering==="yes")&&(n.survey+=2,r.push("Reconnaissance activity suggests survey stage")),(t.exploit_attempts==="yes"||t.vulnerability_exploitation==="yes")&&(n.delivery+=2,n.isolated_breach+=1,r.push("Exploitation attempts suggest delivery or breach stage")),(t.persistence_mechanisms==="yes"||t.backdoors_found==="yes")&&(n.isolated_breach+=2,n.extensive_breach+=1,r.push("Persistence mechanisms suggest established breach")),(t.file_deletion==="yes"||t.system_destruction==="yes"||t.ransomware_encryption==="yes")&&(n.affect+=3,r.push("Destructive activity indicates affect stage"))}static async getStageInfo(t){return(await this.getStageMappings())[t]||null}static async getAllStages(){return{...await this.getStageMappings()}}static async getRecommendedTactics(t){const n=await this.getStageInfo(t);return n?n.tactics:[]}static validateStageTransition(t,n){const r=["survey","delivery","isolated_breach","extensive_breach","affect"],i=r.indexOf(t),s=r.indexOf(n);return i===-1||s===-1?{valid:!1,warning:"Invalid stage specified"}:s<i?{valid:!0,warning:"Stage transition appears to be moving backwards in the attack lifecycle"}:s-i>1?{valid:!0,warning:"Stage transition skips intermediate stages - ensure this is accurate"}:{valid:!0}}}const Bu=({technique:e,isOpen:t,onClose:n,onSelectSubTechnique:r,onSelectMainTechnique:i,searchQuery:s,expandedDescriptions:a,onToggleDescription:o})=>{const c=x.useCallback((u,h)=>h?u.split(new RegExp(`(${h})`,"gi")).map((p,S)=>p.toLowerCase()===h.toLowerCase()?d.jsx("mark",{children:p},S):p):u,[]),l=e.type==="pseudo_technique";return t?d.jsx("div",{className:"modal-overlay",onClick:n,children:d.jsxs("div",{className:"sub-technique-modal",onClick:u=>u.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsxs("h3",{children:["Select Sub-Technique for ",e.name]}),d.jsx("button",{className:"modal-close",onClick:n,type:"button",children:"Ã—"})]}),d.jsxs("div",{className:"modal-content",children:[d.jsx("p",{className:"modal-description",children:l?"Choose the investigation option that best describes why this tactic could not be investigated or confirmed:":'Choose a specific sub-technique that matches your incident, or select "No Matching Sub-Technique" to record the main technique.'}),d.jsxs("div",{className:"sub-techniques-list",children:[e.subTechniques?.map(u=>{const h=a.has(u.external_id);return d.jsxs("div",{className:"modal-sub-technique-card",children:[d.jsxs("div",{className:"modal-sub-technique-header",children:[d.jsx("button",{className:"modal-sub-technique-button",onClick:()=>r(u.external_id),type:"button",children:d.jsxs("div",{className:"modal-sub-technique-info",children:[d.jsx("h5",{children:c(u.name,s)}),d.jsx("span",{className:"modal-sub-technique-id",children:u.external_id})]})}),d.jsx("button",{className:`description-toggle-button modal ${h?"expanded":""}`,onClick:()=>o(u.external_id),title:h?"Hide description":"Show description",type:"button",children:"ðŸ“‹"})]}),h&&d.jsx("div",{className:"modal-sub-technique-description",children:d.jsx(Pt,{components:{a:({href:f,children:p,...S})=>d.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",...S,children:p})},children:u.description})})]},u.external_id)}),d.jsx("div",{className:"modal-no-match-option",children:d.jsx("button",{className:"modal-no-match-button",onClick:i,type:"button",children:d.jsx("div",{className:"modal-no-match-content",children:l?d.jsxs(d.Fragment,{children:[d.jsx("h5",{children:'General "Not Found" Selection'}),d.jsx("span",{className:"modal-no-match-description",children:"Select this if none of the specific investigation reasons above apply to your situation"})]}):d.jsxs(d.Fragment,{children:[d.jsx("h5",{children:"No Matching Sub-Technique"}),d.jsx("span",{className:"modal-no-match-description",children:"Select this if none of the sub-techniques above match your specific incident"})]})})})})]})]})]})}):null},Fu=({technique:e,isSelected:t,subTechniqueSelections:n,onTechniqueClick:r,onSubTechniqueSelect:i,onMainTechniqueSelect:s,searchQuery:a,expandedDescriptions:o,onToggleDescription:c,conflictStatus:l})=>{const u=x.useCallback((v,T)=>T?v.split(new RegExp(`(${T})`,"gi")).map((C,A)=>C.toLowerCase()===T.toLowerCase()?d.jsx("mark",{children:C},A):C):v,[]),h=(e.subTechniques?.length??0)>0,f=o.has(e.external_id),p=()=>{l?.isDisabled||(h?r(e):s(e.external_id))},S=e.type==="pseudo_technique";return d.jsx("div",{className:`technique-card nested ${l?.isDisabled?"disabled":"clickable"} ${t?"selected":""} ${S?"n-code-technique":""}`,onClick:p,role:"button",tabIndex:l?.isDisabled?-1:0,onKeyDown:v=>{!l?.isDisabled&&(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),p())},"aria-describedby":`desc-${e.external_id}`,title:l?.isDisabled?l.reason:void 0,children:d.jsxs("div",{className:"technique-main",children:[d.jsxs("div",{className:"technique-header",children:[d.jsx("div",{className:"technique-info",children:d.jsxs("h4",{children:[d.jsx("span",{className:"technique-id",children:e.external_id}),u(e.name,a)]})}),d.jsx("div",{className:"technique-actions",children:d.jsx("button",{className:`description-toggle-button ${f?"expanded":""}`,onClick:v=>{v.stopPropagation(),c(e.external_id)},title:f?"Hide description":"Show description",type:"button",children:"ðŸ“‹"})})]}),f&&d.jsx("div",{className:"technique-description",id:`desc-${e.external_id}`,children:d.jsx(Pt,{components:{a:({href:v,children:T,...w})=>d.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",...w,children:T})},children:e.description})})]})})},zu=()=>{const{state:e,dispatch:t}=Oe(),n=Le(),[r,i]=x.useState(null),[s,a]=x.useState(!0),[o,c]=x.useState(null),[l,u]=x.useState(""),[h,f]=x.useState(0),[p,S]=x.useState(new Set),[v,T]=x.useState(new Set),[w,C]=x.useState(null),[A,L]=x.useState({stage:null,recommendedTactics:[]});x.useEffect(()=>{(async()=>{try{const z=await Ci.classifyStage(e.responses);L(z)}catch(z){console.error("Failed to classify stage:",z),L({stage:null,recommendedTactics:[]})}})()},[e.responses]);const M=x.useMemo(()=>A.stage?A.recommendedTactics:[],[A]),y=x.useMemo(()=>{if(!r||M.length===0)return null;const m=M[h];return m?r.tactics[m]:null},[r,M,h]),b=M[h]||null;x.useEffect(()=>{(async()=>{try{a(!0),Qe.clearCache();const z=await Qe.loadMitreDataAsync();i(z),f(0)}catch(z){console.error("Failed to load MITRE data:",z),c("Failed to load MITRE ATT&CK data. Please try again.")}finally{a(!1)}})()},[M]);const E=x.useMemo(()=>{if(!r||!b)return[];let m=r.techniquesByTactic[b]||[];if(l.trim()){const G=Qe.searchTechniques(l);m=m.filter(Se=>G.some(Xe=>Xe.id===Se))}const z=m.map(G=>r.techniques[G]).filter(Boolean),V=z.filter(G=>!G.x_mitre_is_subtechnique),W=z.filter(G=>G.x_mitre_is_subtechnique),ie=new Map;V.forEach(G=>{ie.set(G.external_id,{...G,subTechniques:G.sub_techniques||[]})}),W.forEach(G=>{const Se=G.external_id.split(".")[0];ie.has(Se)?ie.get(Se).subTechniques.push(G):ie.set(G.external_id,{...G,subTechniques:G.sub_techniques||[]})});const ae=Array.from(ie.values()),ce=ae.filter(G=>G.type!=="pseudo_technique"),J=ae.filter(G=>G.type==="pseudo_technique");ce.sort((G,Se)=>G.name.localeCompare(Se.name));const oe=[...ce,...J];return oe.forEach(G=>{G.subTechniques&&G.subTechniques.length>0&&G.subTechniques.sort((Se,Xe)=>Se.name.localeCompare(Xe.name))}),oe},[r,b,l]),k=x.useCallback(m=>{if(console.log("handleTechniqueToggle called with:",m),!b||!r)return;const z=r.techniques[m];console.log("Technique lookup result:",z);const V=m.includes(".")&&m.startsWith("N");if(console.log("Is sub-technique:",V),!z&&!V){console.warn("Technique not found:",m);return}const W=V||z&&z.type==="pseudo_technique";console.log("Is N-code:",W);const ie=e.selectedTechniques[b]||{};if(ie[m]){t({type:"UPDATE_TECHNIQUE_SELECTION",payload:{tacticId:b,techniqueId:m,selected:!1}});return}const ce=[];W?Object.keys(ie).forEach(J=>{if(ie[J]){const oe=r.techniques[J];J.startsWith("N")&&(J.includes(".")||oe&&oe.type==="pseudo_technique")||ce.push(J)}}):Object.keys(ie).forEach(J=>{if(ie[J]){const oe=r.techniques[J];J.startsWith("N")&&(J.includes(".")||oe&&oe.type==="pseudo_technique")&&ce.push(J)}}),ce.forEach(J=>{t({type:"UPDATE_TECHNIQUE_SELECTION",payload:{tacticId:b,techniqueId:J,selected:!1}})}),t({type:"UPDATE_TECHNIQUE_SELECTION",payload:{tacticId:b,techniqueId:m,selected:!0}})},[t,b,e.selectedTechniques,r]),N=x.useCallback(m=>{m.subTechniques&&m.subTechniques.length>0?C(m):k(m.external_id)},[k]),j=x.useCallback(m=>{k(m),C(null)},[k]),P=x.useCallback(m=>{k(m),w&&C(null)},[k,w]),D=x.useCallback(()=>{C(null),T(new Set)},[]);x.useEffect(()=>{xe()},[h]);const q=x.useCallback(m=>{S(z=>{const V=new Set(z);return V.has(m)?V.delete(m):V.add(m),V})},[]),F=x.useCallback(m=>{T(z=>{const V=new Set(z);return V.has(m)?V.delete(m):V.add(m),V})},[]),Z=x.useMemo(()=>{if(!r||!b)return[];const m=e.selectedTechniques[b]||{};return Object.keys(m).filter(V=>m[V]).map(V=>{let W=r.techniques[V];if(!W&&V.includes(".")&&V.startsWith("N")){const ie=V.split(".")[0],ae=r.techniques[ie];ae&&ae.sub_techniques&&(W=ae.sub_techniques.find(ce=>ce.external_id===V))}return W}).filter(Boolean)},[r,b,e.selectedTechniques]),ne=x.useMemo(()=>{if(!b)return!1;const m=e.selectedTechniques[b]||{};return Object.values(m).some(z=>z)},[b,e.selectedTechniques]),O=x.useMemo(()=>{const m={};return M.forEach(z=>{const V=e.selectedTechniques[z]||{};m[z]=Object.values(V).some(W=>W)}),m},[M,e.selectedTechniques]),B=x.useCallback(()=>{h>0&&f(h-1)},[h]),g=x.useCallback(()=>{ne&&(h<M.length-1?f(h+1):Object.values(O).every(z=>z)&&(t({type:"SET_PHASE",payload:3}),n("/phase/3"),xe()))},[h,M.length,ne,O,t,n]),K=x.useCallback(m=>{if(!r||!b)return{isDisabled:!1,reason:""};const z=r.techniques[m];if(!z)return{isDisabled:!1,reason:""};const V=z.type==="pseudo_technique",W=e.selectedTechniques[b]||{};if(W[m])return{isDisabled:!1,reason:""};const ae=r.techniquesByTactic[b]||[];if(V){if(ae.some(J=>{const oe=r.techniques[J];return oe&&oe.type!=="pseudo_technique"&&W[J]}))return{isDisabled:!0,reason:"Cannot select investigation options when standard techniques are already selected"}}else if(ae.some(J=>{const oe=r.techniques[J];return oe&&oe.type==="pseudo_technique"&&W[J]}))return{isDisabled:!0,reason:"Cannot select standard techniques when investigation options are already selected"};return{isDisabled:!1,reason:""}},[r,b,e.selectedTechniques]),le=x.useCallback(()=>{t({type:"SET_PHASE",payload:1}),n("/phase/1"),xe()},[t,n]);return s?d.jsx("div",{className:"phase2-technique-selection loading",children:d.jsxs("div",{className:"loading-container",children:[d.jsx("div",{className:"spinner"}),d.jsx("p",{className:"loading-text",children:"Loading MITRE ATT&CK techniques..."})]})}):o||!r?d.jsx("div",{className:"phase2-technique-selection error",children:d.jsxs("div",{className:"error-message",children:[d.jsx("h2",{children:"Error Loading Techniques"}),d.jsx("p",{children:o||"Failed to load MITRE ATT&CK data"}),d.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]})}):d.jsxs("div",{className:"phase2-technique-selection",children:[d.jsx("div",{className:"phase-header",children:d.jsxs("div",{className:"header-content",children:[d.jsx("h1",{children:"Phase 2: MITRE ATT&CK Technique Selection"}),d.jsxs("div",{className:"tactic-progress",children:[d.jsx("div",{className:"progress-bar",children:d.jsx("div",{className:"progress-fill",style:{width:`${(h+1)/M.length*100}%`}})}),d.jsxs("div",{className:"progress-info",children:[d.jsxs("span",{children:["Tactic ",h+1," of ",M.length]}),y&&d.jsxs("span",{children:[" ",y.name]}),ne&&d.jsx("span",{className:"tactic-complete-indicator",children:"âœ“"})]})]})]})}),d.jsx("div",{className:"tactic-controls",children:d.jsx("div",{className:"search-control",children:d.jsx("input",{type:"text",placeholder:"Search techniques...",value:l,onChange:m=>u(m.target.value),className:"search-input"})})}),d.jsx("div",{className:"tactic-page",children:y?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"tactic-info",children:d.jsxs("h2",{children:[y.name," (",b,")"]})}),Z.length>0&&d.jsxs("div",{className:"selected-techniques-tile",children:[d.jsxs("h3",{children:["Selected Techniques for ",y.name]}),d.jsx("div",{className:"selected-techniques-list",children:Z.map(m=>d.jsxs("div",{className:"selected-technique-item",children:[d.jsxs("div",{className:"selected-technique-info",children:[d.jsx("span",{className:"selected-technique-id",children:m.external_id}),d.jsx("span",{className:"selected-technique-name",children:m.name}),m.type==="pseudo_technique"&&d.jsx("span",{className:"selected-n-code-badge",children:"Investigation Option"})]}),d.jsx("button",{className:"remove-technique-button",onClick:()=>k(m.external_id),title:"Remove this technique",type:"button",children:"Ã—"})]},m.external_id))})]}),d.jsx("div",{className:"technique-controls"}),d.jsx("div",{className:"techniques-grid",children:E.length>0?E.map(m=>d.jsx(Fu,{technique:m,isSelected:!!(b&&e.selectedTechniques[b]?.[m.external_id]),subTechniqueSelections:b&&e.selectedTechniques[b]||{},onTechniqueClick:N,onSubTechniqueSelect:j,onMainTechniqueSelect:P,searchQuery:l,expandedDescriptions:p,onToggleDescription:q,conflictStatus:K(m.external_id)},m.external_id)):d.jsx("div",{className:"no-techniques",children:d.jsx("p",{children:l?`No techniques found matching "${l}"`:"No techniques available for this tactic"})})})]}):d.jsx("div",{className:"no-current-tactic",children:d.jsx("p",{children:"No current tactic available. Please check your Phase 1 responses."})})}),d.jsx("div",{className:"phase-controls",children:d.jsxs("div",{className:"controls-content",children:[d.jsx("button",{className:"nav-button previous",onClick:h===0?le:B,disabled:!1,children:h===0?"â† Back to Phase 1":"â† Previous Tactic"}),d.jsx("div",{className:"phase-indicator",children:y?`Tactic ${h+1} of ${M.length}: ${y.name}`:"Phase 2 of 5: Technique Selection"}),d.jsx("button",{className:"nav-button next",onClick:g,disabled:!y||!ne,children:h===M.length-1?"Complete Phase 2 â†’":"Next Tactic â†’"})]})}),w&&d.jsx(Bu,{technique:w,isOpen:!!w,onClose:D,onSelectSubTechnique:j,onSelectMainTechnique:()=>P(w.external_id),searchQuery:l,expandedDescriptions:v,onToggleDescription:F})]})},$u=({software:e,isSelected:t,onToggle:n,searchQuery:r,showDescription:i,onToggleDescription:s})=>{const a=x.useCallback((o,c)=>o,[]);return d.jsxs("div",{className:`software-card ${t?"selected":""} ${e.type} clickable`,onClick:()=>n(e.external_id),children:[d.jsxs("div",{className:"software-header",children:[d.jsx("div",{className:"software-info",children:d.jsxs("h4",{children:[a(e.name,r)," ",d.jsxs("span",{className:"software-id",children:["(",e.external_id,")"]})]})}),d.jsx("div",{className:"software-actions",children:d.jsx("button",{className:`description-toggle-button ${i?"expanded":""}`,onClick:o=>{o.stopPropagation(),s(e.external_id)},title:i?"Hide description":"Show description",type:"button",children:"ðŸ“‹"})})]}),i&&d.jsx("div",{className:"software-description",id:`desc-${e.external_id}`,children:d.jsx(Pt,{components:{a:({href:o,children:c,...l})=>d.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",...l,children:c})},children:e.description})}),e.aliases&&e.aliases.length>0&&d.jsxs("div",{className:"software-aliases",children:[d.jsx("span",{className:"aliases-label",children:"Also known as:"}),d.jsx("div",{className:"aliases-list",children:e.aliases.map(o=>d.jsx("span",{className:"alias-tag",children:a(o,r)},o))})]})]})},Uu=({group:e,isSelected:t,onToggle:n,searchQuery:r,showDescription:i,onToggleDescription:s})=>{const a=x.useCallback((c,l)=>c,[]),o=e.is_meta_group;return d.jsxs("div",{className:`group-card ${t?"selected":""} ${o?"meta-group":""} clickable`,onClick:()=>n(e.external_id),children:[d.jsxs("div",{className:"group-header",children:[d.jsx("div",{className:"group-info",children:d.jsxs("h4",{children:[a(e.name,r)," ",d.jsxs("span",{className:"group-id",children:["(",e.external_id,")"]})]})}),d.jsx("div",{className:"group-actions",children:d.jsx("button",{className:`description-toggle-button ${i?"expanded":""}`,onClick:c=>{c.stopPropagation(),s(e.external_id)},title:i?"Hide description":"Show description",type:"button",children:"ðŸ“‹"})})]}),i&&d.jsx("div",{className:"group-description",id:`desc-${e.external_id}`,children:d.jsx(Pt,{components:{a:({href:c,children:l,...u})=>d.jsx("a",{href:c,target:"_blank",rel:"noopener noreferrer",...u,children:l})},children:e.description})}),e.aliases&&e.aliases.length>0&&d.jsxs("div",{className:"group-aliases",children:[d.jsx("span",{className:"aliases-label",children:"Also known as:"}),d.jsx("div",{className:"aliases-list",children:e.aliases.map(c=>d.jsx("span",{className:"alias-tag",children:a(c,r)},c))})]})]})},Hu=()=>{const{state:e,dispatch:t}=Oe(),n=Le(),[r,i]=x.useState(null),[s,a]=x.useState(!0),[o,c]=x.useState(null),[l,u]=x.useState(0),[h,f]=x.useState(""),[p,S]=x.useState(new Set),[v,T]=x.useState(new Set),[w,C]=x.useState(new Set),A=["tools","malware","groups"],L=A[l],M={tools:"Tools",malware:"Malware",groups:"Threat Groups"};x.useEffect(()=>{(async()=>{try{a(!0),Qe.clearCache();const B=await Qe.loadMitreDataAsync();i(B)}catch(B){console.error("Failed to load MITRE data:",B),c("Failed to load MITRE software data. Please try again.")}finally{a(!1)}})()},[]);const y=x.useMemo(()=>{const O=new Set;return Object.values(e.selectedTechniques).forEach(B=>{Object.entries(B).forEach(([g,K])=>{K&&O.add(g)})}),O},[e.selectedTechniques]),b=x.useMemo(()=>{if(!r)return[];const O=[];return y.forEach(B=>{if(B.startsWith("N"))return;let g=null,K="";if(r.techniques[B]){g=r.techniques[B],K=g.name;const m=(r.softwareByTechnique[B]||[]).filter(z=>{const V=r.software[z];return V&&V.type===(L==="tools"?"tool":"malware")}).length;m>0&&O.push({id:B,name:K,relatedSoftwareCount:m})}}),O.sort((B,g)=>B.name.localeCompare(g.name))},[r,y,L]),E=x.useMemo(()=>{if(!r||L==="groups")return[];const O=new Set;return r.softwareByType[L].forEach(g=>{const K=r.software[g];K?.x_mitre_platforms&&K.x_mitre_platforms.forEach(le=>O.add(le))}),Array.from(O).sort()},[r,L]),k=x.useCallback((O,B)=>{const g=O.toLowerCase();return!!(B.name.toLowerCase().includes(g)||B.aliases&&B.aliases.some(K=>K.toLowerCase().includes(g))||B.external_id&&B.external_id.toLowerCase().includes(g))},[]),N=x.useMemo(()=>{if(!r)return[];let O;return L==="tools"||L==="malware"?(O=r.softwareByType[L],h.trim()&&(O=O.filter(B=>{const g=r.software[B];return g&&k(h,g)})),v.size>0&&(O=O.filter(B=>r.software[B]?.x_mitre_platforms?.some(K=>v.has(K))||!1)),w.size>0&&(O=O.filter(B=>(r.techniquesBySoftware[B]||[]).some(K=>w.has(K)))),O.sort((B,g)=>r.software[B]?.name.localeCompare(r.software[g]?.name||"")||0)):(O=Object.keys(r.groups),h.trim()&&(O=O.filter(B=>{const g=r.groups[B];return g&&k(h,g)})),O.sort((B,g)=>{const K=r.groups[B],le=r.groups[g],m=K?.is_meta_group,z=le?.is_meta_group;return m&&!z?-1:!m&&z?1:K?.name.localeCompare(le?.name||"")||0})),O},[r,L,h,v,k,w]),j=x.useCallback(O=>{const B=L==="groups"?"groups":r?.software[O]?.type==="tool"?"tools":"malware";B==="groups"&&Object.keys(e.selectedSoftware.groups).forEach(g=>{e.selectedSoftware.groups[g]&&t({type:"TOGGLE_SOFTWARE",payload:{category:"groups",id:g}})}),t({type:"TOGGLE_SOFTWARE",payload:{category:B,id:O}})},[t,L,r,e.selectedSoftware.groups]);x.useEffect(()=>{xe()},[l]);const P=x.useCallback(()=>{l<A.length-1?u(l+1):(t({type:"SET_PHASE",payload:4}),n("/phase/4"),xe())},[l,A.length,t,n]),D=x.useCallback(()=>{l>0&&u(l-1)},[l]),q=x.useCallback(()=>{t({type:"SET_PHASE",payload:2}),n("/phase/2"),xe()},[t,n]),F=x.useCallback(O=>{S(B=>{const g=new Set(B);return g.has(O)?g.delete(O):g.add(O),g})},[]),Z=x.useCallback(O=>{T(B=>{const g=new Set(B);return g.has(O)?g.delete(O):g.add(O),g})},[]),ne=x.useCallback(O=>{C(B=>{const g=new Set(B);return g.has(O)?g.delete(O):g.add(O),g})},[]);return x.useEffect(()=>{S(new Set),T(new Set),C(new Set),f("")},[L]),s?d.jsx("div",{className:"phase3-software-selection loading",children:d.jsxs("div",{className:"loading-container",children:[d.jsx("div",{className:"spinner"}),d.jsx("p",{className:"loading-text",children:"Loading MITRE software database..."})]})}):o||!r?d.jsx("div",{className:"phase3-software-selection error",children:d.jsxs("div",{className:"error-message",children:[d.jsx("h2",{children:"Error Loading Software Database"}),d.jsx("p",{children:o||"Failed to load MITRE software data"}),d.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]})}):d.jsxs("div",{className:"phase3-software-selection",children:[d.jsx("div",{className:"phase-header",children:d.jsxs("div",{className:"header-content",children:[d.jsx("h1",{children:"Phase 3: Software & Threat Actor Selection"}),d.jsxs("div",{className:"category-progress",children:[d.jsx("div",{className:"progress-bar",children:d.jsx("div",{className:"progress-fill",style:{width:`${(l+1)/A.length*100}%`}})}),d.jsxs("div",{className:"progress-info",children:[M[L]," (",l+1," of ",A.length,")"]})]})]})}),d.jsxs("div",{className:"category-page",children:[d.jsxs("div",{className:"category-header",children:[d.jsx("h2",{children:M[L]}),d.jsx("div",{className:"search-control",children:d.jsx("input",{type:"text",placeholder:`Search ${M[L].toLowerCase()}...`,value:h,onChange:O=>f(O.target.value),className:"search-input"})}),L!=="groups"&&E.length>0&&d.jsxs("div",{className:"platform-filters",children:[d.jsx("h4",{children:"Filter by Platform:"}),d.jsx("div",{className:"platform-toggles",children:E.map(O=>d.jsxs("label",{className:"platform-toggle",children:[d.jsx("input",{type:"checkbox",checked:v.has(O),onChange:()=>Z(O)}),d.jsx("span",{className:"platform-label",children:O}),d.jsxs("span",{className:"platform-count",children:["(",r.softwareByType[L].filter(B=>r.software[B]?.x_mitre_platforms?.includes(O)).length,")"]})]},O))}),v.size>0&&d.jsxs("button",{className:"clear-platforms-btn",onClick:()=>T(new Set),type:"button",children:["Clear Platform Filters (",v.size,")"]})]}),L!=="groups"&&b.length>0&&d.jsxs("div",{className:"technique-filters",children:[d.jsx("h4",{children:"Additional Filters:"}),d.jsx("div",{className:"technique-toggles",children:b.map(({id:O,name:B,relatedSoftwareCount:g})=>d.jsxs("label",{className:"technique-toggle",children:[d.jsx("input",{type:"checkbox",checked:w.has(O),onChange:()=>ne(O)}),d.jsxs("span",{className:"technique-label",children:["Related to ",B]}),d.jsxs("span",{className:"technique-count",children:["(",g,")"]})]},O))})]})]}),d.jsx("div",{className:"software-sections",children:d.jsx("div",{className:"all-software",children:d.jsx("div",{className:"items-grid",children:N.length>0?N.map(O=>{if(L==="groups"){const B=r.groups[O];return B?d.jsx(Uu,{group:B,isSelected:!!e.selectedSoftware.groups[O],onToggle:j,searchQuery:h,showDescription:p.has(O),onToggleDescription:F},O):null}else{const B=r.software[O];if(!B)return null;const g=B.type==="tool"?"tools":"malware";return d.jsx($u,{software:B,isSelected:!!e.selectedSoftware[g][O],onToggle:j,searchQuery:h,showDescription:p.has(O),onToggleDescription:F},O)}}):d.jsx("div",{className:"no-items",children:d.jsx("p",{children:h?`No ${M[L].toLowerCase()} found matching "${h}"`:`No ${M[L].toLowerCase()} available`})})})})})]}),d.jsx("div",{className:"phase-controls",children:d.jsxs("div",{className:"controls-content",children:[d.jsx("button",{className:"nav-button previous",onClick:l===0?q:D,disabled:!1,children:l===0?"â† Back to Phase 2":"â† Previous Category"}),d.jsxs("div",{className:"category-indicator",children:[M[L]," (",l+1," of ",A.length,")"]}),d.jsx("button",{className:"nav-button next",onClick:P,children:l===A.length-1?"Complete Phase 3 â†’":"Next Category â†’"})]})})]})},Vu=({question:e,technique_id:t,tactic_id:n,value:r,onChange:i,isSubQuestion:s=!1})=>d.jsx("div",{className:`question-card ${s?"question-card--sub":""}`,children:d.jsx("div",{className:"question-input",children:d.jsx(Er,{question:{id:e.id,question:e.question,type:e.type,options:e.options,required:e.required,placeholder:"",help_text:e.explanation},value:r,onChange:i,showHint:!0,className:"question-input-field"})})}),Qu=()=>{const{state:e,dispatch:t}=Oe(),n=Le(),[r,i]=x.useState(null),[s,a]=x.useState(null),[o,c]=x.useState(!0),[l,u]=x.useState(null),[h,f]=x.useState({stage:null,recommendedTactics:[]});x.useEffect(()=>{(async()=>{try{const b=await Ci.classifyStage(e.responses);f(b)}catch(b){console.error("Failed to classify stage:",b),f({stage:null,recommendedTactics:[]})}})()},[e.responses]);const p=x.useMemo(()=>h.stage?h.recommendedTactics:[],[h]),S={TA0042:"Resource Development",TA0043:"Reconnaissance",TA0001:"Initial Access",TA0002:"Execution",TA0003:"Persistence",TA0004:"Privilege Escalation",TA0005:"Defense Evasion",TA0006:"Credential Access",TA0007:"Discovery",TA0008:"Lateral Movement",TA0009:"Collection",TA0010:"Exfiltration",TA0011:"Command and Control",TA0040:"Impact"};x.useEffect(()=>{(async()=>{try{c(!0);const b="/src/data/phase4-config.json",E="/ikb-demo/",N=(E.endsWith("/")?E.slice(0,-1):E)+b,j=await fetch(N);if(!j.ok)throw new Error(`Failed to load Phase 4 config: ${j.status}`);const P=await j.json();i(P)}catch(b){console.error("Failed to load Phase 4 config:",b),u("Failed to load evidence collection configuration. Please try again.")}finally{c(!1)}})()},[]),x.useEffect(()=>{(async()=>{try{const b=await Qe.loadMitreDataAsync();console.log("Phase 4 - MITRE data loaded:",b),console.log("Phase 4 - Available tactics:",Object.keys(b.tactics)),console.log("Phase 4 - Available tactic names:",Object.entries(b.tactics).map(([E,k])=>`${E}: ${k.name}`)),a(b)}catch(b){console.error("Failed to load MITRE data:",b)}})()},[]);const v=x.useMemo(()=>{if(!r)return[];console.log("Phase 4 Debug - Selected techniques:",e.selectedTechniques),console.log("Phase 4 Debug - Available question groups:",r.question_groups.length),r.question_groups.slice(0,5).forEach(E=>{const k=E.show_when?.technique_tactic_combinations;console.log(`Group ${E.id} expects:`,k)});const y=[];Object.keys(e.selectedTechniques).forEach(E=>{Object.keys(e.selectedTechniques[E]).forEach(k=>{e.selectedTechniques[E][k]&&y.push({tacticId:E,techniqueId:k})})}),console.log("Phase 4 Debug - Actually selected techniques:",y);const b=r.question_groups.filter(E=>{const k=E.show_when?.technique_tactic_combinations;if(!k||!Array.isArray(k))return console.log(`Group ${E.id}: No combinations defined`),!1;const N=k.some(j=>{const P=e.selectedTechniques[j.tactic_id]?.[j.technique_id];return console.log(`Checking ${j.technique_id} in ${j.tactic_id}: ${P?"SELECTED":"NOT SELECTED"}`),P});return N&&console.log("âœ… Found relevant group:",E.id,E.technique_id,E.tactic_id),N});return console.log("Phase 4 Debug - Relevant groups found:",b.length),b},[r,e.selectedTechniques]),T=x.useMemo(()=>{const y=[],b=(E,k,N,j,P)=>{E.sub_questions&&E.sub_questions.forEach(D=>{const q=e.evidenceResponses[k],F=D.show_when?.parent_answer,Z=F===q;(F==="other"||q==="other")&&console.log("ðŸ” Debug conditional question:",{questionId:k,subQuestionId:D.id,parentAnswer:q,expectedAnswer:F,shouldShow:Z,parentAnswerType:typeof q,expectedAnswerType:typeof F}),Z&&(y.push({question:D,technique_id:N,tactic_id:j,group_id:P,parent_question_id:k}),b(D,D.id,N,j,P))})};return v.forEach(E=>{E.question_flow.forEach(k=>{y.push({question:k,technique_id:E.technique_id,tactic_id:E.tactic_id,group_id:E.id}),b(k,k.id,E.technique_id,E.tactic_id,E.id)})}),y.sort((E,k)=>{const N=p.indexOf(E.tactic_id),j=p.indexOf(k.tactic_id);return N!==-1&&j!==-1?N-j:N!==-1?-1:j!==-1?1:E.tactic_id.localeCompare(k.tactic_id)}),y},[v,p,e.evidenceResponses]),w=x.useMemo(()=>{const y=[];console.log("Phase 4 - tacticOrder from stage classification:",p),console.log("Phase 4 - All unique tactic IDs in allQuestions:",[...new Set(T.map(k=>k.tactic_id))]),p.forEach(k=>{const N=T.filter(j=>j.tactic_id===k);if(N.length>0){const j=s?.tactics[k],P=j?.name||S[k]||k;console.log(`Phase 4 - Tactic ${k}: data =`,j,`fallback = ${S[k]}, name = ${P}`),y.push({tactic_id:k,tactic_name:P,questions:N})}});const b=T.filter(k=>!p.includes(k.tactic_id));return[...new Set(b.map(k=>k.tactic_id))].sort().forEach(k=>{const N=b.filter(P=>P.tactic_id===k),j=s?.tactics[k]?.name||S[k]||k;y.push({tactic_id:k,tactic_name:j,questions:N})}),y},[T,p,s]),C=x.useCallback((y,b)=>{t({type:"UPDATE_EVIDENCE_RESPONSE",payload:{key:y,value:b}})},[t]),A=x.useCallback(()=>{t({type:"SET_PHASE",payload:5}),n("/phase/5"),xe()},[t,n]),L=x.useCallback(()=>{t({type:"SET_PHASE",payload:3}),n("/phase/3"),xe()},[t,n]);x.useEffect(()=>{!o&&r&&T.length===0&&(console.log("Phase 4: No questions available, auto-skipping to Phase 5"),t({type:"SET_PHASE",payload:5}),n("/phase/5"),xe())},[o,r,T.length,t,n]);const M=x.useMemo(()=>{const y=T.length,b=T.filter(({question:N})=>{const j=e.evidenceResponses[N.id];return j!=null&&j!==""}).length,E=T.filter(({question:N})=>N.required).length,k=T.filter(({question:N})=>{if(!N.required)return!1;const j=e.evidenceResponses[N.id];return j!=null&&j!==""}).length;return{totalQuestions:y,questionsWithResponses:b,requiredQuestions:E,completedRequiredQuestions:k,completionPercentage:y>0?Math.round(b/y*100):0}},[T,e.evidenceResponses]);return o?d.jsx("div",{className:"phase4-evidence-collection loading",children:d.jsxs("div",{className:"loading-container",children:[d.jsx("div",{className:"spinner"}),d.jsx("p",{className:"loading-text",children:"Loading evidence collection templates..."})]})}):l||!r?d.jsx("div",{className:"phase4-evidence-collection error",children:d.jsxs("div",{className:"error-message",children:[d.jsx("h2",{children:"Error Loading Evidence Collection"}),d.jsx("p",{children:l||"Failed to load evidence collection configuration"}),d.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]})}):T.length===0?d.jsx("div",{className:"phase4-evidence-collection empty",children:d.jsxs("div",{className:"empty-state",children:[d.jsx("h2",{children:"No Evidence Collection Questions Available"}),d.jsx("div",{className:"empty-details",children:Object.keys(e.selectedTechniques).length===0?d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"No techniques have been selected in Phase 2."}),d.jsx("p",{children:"Please go back to Phase 2 and select some techniques from the MITRE ATT&CK framework to see relevant evidence collection questions."})]}):d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"No evidence collection questions match your selected techniques."}),d.jsxs("p",{children:["The Phase 4 configuration includes questions for ",r?.question_groups.length||0," technique-tactic combinations."]}),d.jsx("p",{children:"Your selected techniques:"}),d.jsx("ul",{className:"selected-techniques-list",children:Object.entries(e.selectedTechniques).map(([y,b])=>Object.entries(b).map(([E,k])=>k&&d.jsxs("li",{children:[E," in ",y]},`${y}-${E}`))).flat()}),d.jsx("p",{children:"Try selecting different techniques in Phase 2, or check the browser console for debugging information."}),d.jsxs("p",{children:[d.jsx("strong",{children:"Recommended techniques with evidence questions:"})," T1566 (Phishing), T1190 (Exploit Public-Facing Application), T1595 (Active Scanning), T1210 (Exploitation of Remote Services), T1068 (Exploitation for Privilege Escalation)."]})]})}),d.jsxs("div",{className:"empty-actions",children:[d.jsx("button",{onClick:()=>{n("/phase/2"),xe()},children:"â† Back to Phase 2: Technique Selection"}),d.jsx("button",{onClick:L,children:"â† Back to Phase 3"})]})]})}):d.jsxs("div",{className:"phase4-evidence-collection",children:[d.jsx("div",{className:"phase-header",children:d.jsx("div",{className:"header-content",children:d.jsx("h1",{children:"Phase 4: Technique Questions"})})}),d.jsx("div",{className:"evidence-content",children:d.jsx("div",{className:"questions-list",children:w.length>0?w.map(({tactic_id:y,tactic_name:b,questions:E})=>d.jsxs("div",{className:"tactic-section",children:[d.jsxs("div",{className:"tactic-header",children:[d.jsxs("h2",{className:"tactic-title",children:[d.jsx("span",{className:"tactic-name",children:b!==y?b:y}),b!==y&&d.jsxs("span",{className:"tactic-id",children:["(",y,")"]})]}),d.jsxs("div",{className:"tactic-progress",children:[E.length," question",E.length!==1?"s":""]})]}),d.jsx("div",{className:"tactic-questions",children:E.map(({question:k,technique_id:N,tactic_id:j,parent_question_id:P})=>d.jsx(Vu,{question:k,technique_id:N,tactic_id:j,value:e.evidenceResponses[k.id]||"",onChange:D=>C(k.id,D),isSubQuestion:!!P},`${k.id}-${N}-${j}`))})]},y)):d.jsx("div",{className:"no-questions",children:d.jsx("p",{children:"No questions available"})})})}),d.jsxs("div",{className:"phase-controls",children:[d.jsxs("div",{className:"controls-content",children:[d.jsx("button",{className:"nav-button previous",onClick:L,children:"â† Back to Phase 3"}),d.jsx("div",{className:"phase-indicator",children:"Phase 4 of 5: Evidence Collection"}),d.jsx("button",{className:"nav-button next",onClick:A,disabled:M.completedRequiredQuestions<M.requiredQuestions,children:"Continue to Phase 5 â†’"})]}),M.completedRequiredQuestions<M.requiredQuestions&&d.jsx("div",{className:"validation-summary",children:d.jsxs("p",{children:["Please complete all ",M.requiredQuestions," required questions before proceeding to the final summary."]})})]})]})},Wu=()=>{const{state:e,dispatch:t}=Oe(),n=Le(),[r,i]=x.useState(null),[s,a]=x.useState(null),[o,c]=x.useState(null),l=y=>{if(y.startsWith("/src/data/")){const b="/ikb-demo/";return(b.endsWith("/")?b.slice(0,-1):b)+y}return y};x.useEffect(()=>{(async()=>{try{const b=l("/src/data/phase1-config.json"),E=await fetch(b);if(E.ok){const D=await E.json();i(D)}const k=l("/src/data/phase4-config.json"),N=await fetch(k);if(N.ok){const D=await N.json();a(D)}const j=l("/src/data/mitre-attack-processed.json"),P=await fetch(j);if(P.ok){const D=await P.json();c(D)}}catch(b){console.error("Failed to load configurations:",b)}})()},[]);const u=()=>{t({type:"SET_PHASE",payload:4}),n("/phase/4")},h=()=>{const y={assessment_info:{title:"Incident Knowledge Base Assessment",version:"1.0",completed_at:new Date().toISOString()},incident_context:{responses:e.responses,questionnaire_version:"1.0"},attack_analysis:{selected_techniques:e.selectedTechniques},selected_attack_patterns:{techniques:e.selectedTechniques,tools:e.selectedSoftware.tools,malware:e.selectedSoftware.malware,groups:e.selectedSoftware.groups},question_responses:{responses:e.evidenceResponses,question_groups:[]},metadata:{total_techniques_selected:Object.values(e.selectedTechniques).reduce((N,j)=>N+Object.values(j).filter(Boolean).length,0),tactics_covered:Object.keys(e.selectedTechniques).length,total_tools_selected:Object.values(e.selectedSoftware.tools).filter(Boolean).length,total_malware_selected:Object.values(e.selectedSoftware.malware).filter(Boolean).length,total_groups_selected:Object.values(e.selectedSoftware.groups).filter(Boolean).length}},b=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),E=URL.createObjectURL(b),k=document.createElement("a");k.href=E,k.download=`ikb-assessment-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(E)},f=y=>{if(!r)return y;for(const b of r.pages){const E=b.questions.find(k=>k.id===y);if(E)return E.question}return y},p=y=>{if(!s)return y;for(const b of s.question_groups){const E=b.question_flow.find(j=>j.id===y);if(E)return E.question;const k=j=>{for(const P of j){if(P.id===y)return P.question;if(P.sub_questions){const D=k(P.sub_questions);if(D)return D}}return null},N=k(b.question_flow);if(N)return N}return y},S=y=>o&&o.techniques[y]?.name||y,v=y=>o&&o.software[y]?.name||y,T=y=>o&&o.groups[y]?.name||y,w=(y,b)=>{if(!r)return String(b);for(const E of r.pages){const k=E.questions.find(N=>N.id===y);if(k&&k.options)return Array.isArray(b)?b.map(N=>k.options?.find(P=>P.value===N)?.label||N).join(", "):k.options.find(j=>j.value===b)?.label||String(b)}return String(b)},C=(y,b)=>{if(!s)return String(b);for(const E of s.question_groups){const k=j=>{for(const P of j){if(P.id===y&&P.options)return P.options;if(P.sub_questions){const D=k(P.sub_questions);if(D)return D}}return null},N=k(E.question_flow);if(N)return Array.isArray(b)?b.map(j=>N.find(D=>D.value===j)?.label||j).join(", "):N.find(P=>P.value===b)?.label||String(b)}return String(b)},A=y=>Array.isArray(y)?y.map(b=>typeof b=="string"?b:typeof b=="object"&&b!==null?b.id?b.id:b.cve_id?b.cve_id:b.value?b.value:Object.keys(b).length>0?JSON.stringify(b):"Unknown CVE":String(b)).join(", "):"Invalid CVE data",L=y=>{if(!y||typeof y!="object")return String(y||"Not provided");if(y.start_date||y.end_date){const b=y.start_date?new Date(y.start_date).toLocaleDateString():"Unknown start",E=y.end_date?new Date(y.end_date).toLocaleDateString():"Unknown end";return`${b} - ${E}`}return y.date?new Date(y.date).toLocaleDateString():y.precision?`Precision: ${y.precision}`:JSON.stringify(y)},M=(y,b,E=!1)=>b==null||b===""?"Not provided":Array.isArray(b)&&b.length>0&&(y.includes("cve")||typeof b[0]=="object"&&b[0]?.id)?A(b):typeof b=="object"&&b!==null&&(b.start_date||b.end_date||b.date||b.precision)?L(b):Array.isArray(b)&&b.length>0&&typeof b[0]=="object"&&b[0]?.asset?b.map(k=>`${k.asset} (${k.classification||"Unknown"})`).join(", "):Array.isArray(b)?E?C(y,b):w(y,b):typeof b=="object"&&b!==null?JSON.stringify(b,null,2):E?C(y,b):w(y,b);return d.jsxs("div",{className:"card",children:[d.jsxs("div",{style:{marginTop:"0px"},children:[d.jsx("h3",{className:"phase-section-heading",children:"Incident Context (Phase 1)"}),Object.keys(e.responses).length>0?d.jsx("div",{style:{background:"#f8f9fa",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:Object.entries(e.responses).map(([y,b])=>d.jsxs("div",{style:{marginBottom:"10px",borderBottom:"1px solid #dee2e6",paddingBottom:"8px"},children:[d.jsxs("strong",{children:[f(y),":"]}),d.jsx("div",{style:{marginTop:"4px",color:"#495057"},children:M(y,b,!1)})]},y))}):d.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:"No incident context provided"})]}),d.jsxs("div",{style:{marginTop:"30px"},children:[d.jsx("h3",{className:"phase-section-heading",children:"Attack Analysis (Phases 2 & 3)"}),d.jsxs("div",{style:{background:"#f8f9fa",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:[d.jsx("h4",{children:"Selected Techniques:"}),Object.keys(e.selectedTechniques).length>0?Object.entries(e.selectedTechniques).map(([y,b])=>{const E=Object.entries(b).filter(([k,N])=>N);return E.length===0?null:d.jsxs("div",{style:{marginBottom:"15px"},children:[d.jsxs("strong",{children:[y,":"]}),d.jsx("ul",{style:{marginTop:"5px",paddingLeft:"20px"},children:E.map(([k])=>d.jsxs("li",{children:[k," - ",S(k)]},k))})]},y)}):d.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:"No techniques selected"}),d.jsx("h4",{style:{marginTop:"20px"},children:"Selected Software:"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[d.jsxs("div",{children:[d.jsx("strong",{children:"Tools:"}),d.jsx("ul",{style:{marginTop:"5px",paddingLeft:"20px"},children:Object.entries(e.selectedSoftware.tools).filter(([y,b])=>b).map(([y])=>d.jsx("li",{children:v(y)},y))}),Object.values(e.selectedSoftware.tools).filter(Boolean).length===0&&d.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:"None selected"})]}),d.jsxs("div",{children:[d.jsx("strong",{children:"Malware:"}),d.jsx("ul",{style:{marginTop:"5px",paddingLeft:"20px"},children:Object.entries(e.selectedSoftware.malware).filter(([y,b])=>b).map(([y])=>d.jsx("li",{children:v(y)},y))}),Object.values(e.selectedSoftware.malware).filter(Boolean).length===0&&d.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:"None selected"})]}),d.jsxs("div",{children:[d.jsx("strong",{children:"Groups:"}),d.jsx("ul",{style:{marginTop:"5px",paddingLeft:"20px"},children:Object.entries(e.selectedSoftware.groups).filter(([y,b])=>b).map(([y])=>d.jsx("li",{children:T(y)},y))}),Object.values(e.selectedSoftware.groups).filter(Boolean).length===0&&d.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:"None selected"})]})]})]})]}),d.jsxs("div",{style:{marginTop:"30px"},children:[d.jsx("h3",{className:"phase-section-heading",children:"Detailed Analysis (Phase 4)"}),Object.keys(e.evidenceResponses).length>0?d.jsx("div",{style:{background:"#f8f9fa",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:Object.entries(e.evidenceResponses).map(([y,b])=>d.jsxs("div",{style:{marginBottom:"15px",borderBottom:"1px solid #dee2e6",paddingBottom:"10px"},children:[d.jsxs("strong",{children:[p(y),":"]}),d.jsx("div",{style:{marginTop:"4px",color:"#495057"},children:M(y,b,!0)})]},y))}):d.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:"No detailed analysis responses provided"})]}),d.jsxs("div",{style:{marginTop:"30px"},children:[d.jsx("h3",{className:"phase-section-heading",children:"Assessment Summary"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px",marginBottom:"20px"},children:[d.jsxs("div",{style:{background:"#e3f2fd",padding:"15px",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#1976d2"},children:Object.keys(e.responses).length}),d.jsx("div",{style:{fontSize:"14px",color:"#424242"},children:"Context Responses"})]}),d.jsxs("div",{style:{background:"#f3e5f5",padding:"15px",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#7b1fa2"},children:Object.values(e.selectedTechniques).reduce((y,b)=>y+Object.values(b).filter(Boolean).length,0)}),d.jsx("div",{style:{fontSize:"14px",color:"#424242"},children:"Techniques"})]}),d.jsxs("div",{style:{background:"#e8f5e8",padding:"15px",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#388e3c"},children:Object.values(e.selectedSoftware.tools).filter(Boolean).length+Object.values(e.selectedSoftware.malware).filter(Boolean).length+Object.values(e.selectedSoftware.groups).filter(Boolean).length}),d.jsx("div",{style:{fontSize:"14px",color:"#424242"},children:"Software Items"})]}),d.jsxs("div",{style:{background:"#fff3e0",padding:"15px",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#f57c00"},children:Object.keys(e.evidenceResponses).length}),d.jsx("div",{style:{fontSize:"14px",color:"#424242"},children:"Analysis Responses"})]})]})]}),d.jsx("div",{className:"phase-controls",children:d.jsxs("div",{className:"controls-content",children:[d.jsx("button",{className:"nav-button previous",onClick:u,children:"â† Back to Phase 4"}),d.jsx("div",{className:"phase-indicator",children:"Phase 5 of 5: Assessment Report"}),d.jsx("button",{className:"nav-button next export",onClick:h,children:"ðŸ“„ Export Assessment"})]})})]})},Gu=()=>d.jsx(da,{children:d.jsx(Ks,{basename:"/ikb-demo/",children:d.jsx(_s,{children:d.jsxs(je,{path:"/",element:d.jsx(fa,{}),children:[d.jsx(je,{index:!0,element:d.jsx(Mn,{to:"/phase/1",replace:!0})}),d.jsx(je,{path:"phase/1",element:d.jsx(nt,{requiredPhase:1,children:d.jsx(xa,{})})}),d.jsx(je,{path:"phase/2",element:d.jsx(nt,{requiredPhase:2,children:d.jsx(zu,{})})}),d.jsx(je,{path:"phase/3",element:d.jsx(nt,{requiredPhase:3,children:d.jsx(Hu,{})})}),d.jsx(je,{path:"phase/4",element:d.jsx(nt,{requiredPhase:4,children:d.jsx(Qu,{})})}),d.jsx(je,{path:"phase/5",element:d.jsx(nt,{requiredPhase:5,children:d.jsx(Wu,{})})}),d.jsx(je,{path:"*",element:d.jsx(Mn,{to:"/phase/1",replace:!0})})]})})})});Di.createRoot(document.getElementById("root")).render(d.jsx(x.StrictMode,{children:d.jsx(Gu,{})}));
