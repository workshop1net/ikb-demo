import{r as x,j as d,R as Ri,g as Cr,c as Li}from"./index-BUBUI_qf.js";import{Q as Tr}from"./QuestionRenderer-DQ7SAmLc.js";import{M as He}from"./mitreDataLoader-y46ETTK4.js";/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Rn="popstate";function Di(e={}){function t(r,i){let{pathname:s,search:a,hash:l}=r.location;return Gt("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ut(i)}return Mi(t,n,null,e)}function re(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ve(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Oi(){return Math.random().toString(36).substring(2,10)}function Ln(e,t){return{usr:e.state,key:e.key,idx:t}}function Gt(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?We(t):t,state:n,key:t&&t.key||r||Oi()}}function ut({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function We(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Mi(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l="POP",c=null,o=u();o==null&&(o=0,a.replaceState({...a.state,idx:o},""));function u(){return(a.state||{idx:null}).idx}function h(){l="POP";let E=u(),v=E==null?null:E-o;o=E,c&&c({action:l,location:w.location,delta:v})}function f(E,v){l="PUSH";let T=Gt(w.location,E,v);o=u()+1;let A=Ln(T,o),D=w.createHref(T);try{a.pushState(A,"",D)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(D)}s&&c&&c({action:l,location:w.location,delta:1})}function p(E,v){l="REPLACE";let T=Gt(w.location,E,v);o=u();let A=Ln(T,o),D=w.createHref(T);a.replaceState(A,"",D),s&&c&&c({action:l,location:w.location,delta:0})}function S(E){return Fi(E)}let w={get action(){return l},get location(){return e(i,a)},listen(E){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Rn,h),c=E,()=>{i.removeEventListener(Rn,h),c=null}},createHref(E){return t(i,E)},createURL:S,encodeLocation(E){let v=S(E);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(E){return a.go(E)}};return w}function Fi(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),re(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:ut(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Nr(e,t,n="/"){return qi(e,t,n,!1)}function qi(e,t,n,r){let i=typeof t=="string"?We(t):t,s=Pe(i.pathname||"/",n);if(s==null)return null;let a=Ar(e);zi(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let o=Ji(s);l=Yi(a[c],o,r)}return l}function Ar(e,t=[],n=[],r="",i=!1){let s=(a,l,c=i,o)=>{let u={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(r)&&c)return;re(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length)}let h=_e([r,u.relativePath]),f=n.concat(u);a.children&&a.children.length>0&&(re(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),Ar(a.children,t,f,h,c)),!(a.path==null&&!a.index)&&t.push({path:h,score:Wi(h,a.index),routesMeta:f})};return e.forEach((a,l)=>{if(a.path===""||!a.path?.includes("?"))s(a,l);else for(let c of jr(a.path))s(a,l,!0,c)}),t}function jr(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=jr(r.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function zi(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Gi(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Bi=/^:[\w-]+$/,$i=3,Ui=2,Hi=1,Vi=10,Qi=-2,Dn=e=>e==="*";function Wi(e,t){let n=e.split("/"),r=n.length;return n.some(Dn)&&(r+=Qi),t&&(r+=Ui),n.filter(i=>!Dn(i)).reduce((i,s)=>i+(Bi.test(s)?$i:s===""?Hi:Vi),r)}function Gi(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Yi(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],o=l===r.length-1,u=s==="/"?t:t.slice(s.length)||"/",h=St({path:c.relativePath,caseSensitive:c.caseSensitive,end:o},u),f=c.route;if(!h&&o&&n&&!r[r.length-1].route.index&&(h=St({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(i,h.params),a.push({params:i,pathname:_e([s,h.pathname]),pathnameBase:ts(_e([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=_e([s,h.pathnameBase]))}return a}function St(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Ki(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((o,{paramName:u,isOptional:h},f)=>{if(u==="*"){let S=l[f]||"";a=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const p=l[f];return h&&!p?o[u]=void 0:o[u]=(p||"").replace(/%2F/g,"/"),o},{}),pathname:s,pathnameBase:a,pattern:e}}function Ki(e,t=!1,n=!0){ve(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Ji(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ve(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Pe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Xi(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?We(e):e;return{pathname:n?n.startsWith("/")?n:Zi(n,t):t,search:ns(r),hash:rs(i)}}function Zi(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function It(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function es(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ln(e){let t=es(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function on(e,t,n,r=!1){let i;typeof e=="string"?i=We(e):(i={...e},re(!i.pathname||!i.pathname.includes("?"),It("?","pathname","search",i)),re(!i.pathname||!i.pathname.includes("#"),It("#","pathname","hash",i)),re(!i.search||!i.search.includes("#"),It("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=n;else{let h=t.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=Xi(i,l),o=a&&a!=="/"&&a.endsWith("/"),u=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(o||u)&&(c.pathname+="/"),c}var _e=e=>e.join("/").replace(/\/\/+/g,"/"),ts=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ns=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,rs=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function is(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var _r=["POST","PUT","PATCH","DELETE"];new Set(_r);var ss=["GET",..._r];new Set(ss);var Ge=x.createContext(null);Ge.displayName="DataRouter";var Tt=x.createContext(null);Tt.displayName="DataRouterState";x.createContext(!1);var Pr=x.createContext({isTransitioning:!1});Pr.displayName="ViewTransition";var as=x.createContext(new Map);as.displayName="Fetchers";var ls=x.createContext(null);ls.displayName="Await";var we=x.createContext(null);we.displayName="Navigation";var ht=x.createContext(null);ht.displayName="Location";var ke=x.createContext({outlet:null,matches:[],isDataRoute:!1});ke.displayName="Route";var cn=x.createContext(null);cn.displayName="RouteError";function os(e,{relative:t}={}){re(Ye(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=x.useContext(we),{hash:i,pathname:s,search:a}=pt(e,{relative:t}),l=s;return n!=="/"&&(l=s==="/"?n:_e([n,s])),r.createHref({pathname:l,search:a,hash:i})}function Ye(){return x.useContext(ht)!=null}function Le(){return re(Ye(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(ht).location}var Ir="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Rr(e){x.useContext(we).static||x.useLayoutEffect(e)}function De(){let{isDataRoute:e}=x.useContext(ke);return e?Ss():cs()}function cs(){re(Ye(),"useNavigate() may be used only in the context of a <Router> component.");let e=x.useContext(Ge),{basename:t,navigator:n}=x.useContext(we),{matches:r}=x.useContext(ke),{pathname:i}=Le(),s=JSON.stringify(ln(r)),a=x.useRef(!1);return Rr(()=>{a.current=!0}),x.useCallback((c,o={})=>{if(ve(a.current,Ir),!a.current)return;if(typeof c=="number"){n.go(c);return}let u=on(c,JSON.parse(s),i,o.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:_e([t,u.pathname])),(o.replace?n.replace:n.push)(u,o.state,o)},[t,n,s,i,e])}var us=x.createContext(null);function ds(e){let t=x.useContext(ke).outlet;return t&&x.createElement(us.Provider,{value:e},t)}function pt(e,{relative:t}={}){let{matches:n}=x.useContext(ke),{pathname:r}=Le(),i=JSON.stringify(ln(n));return x.useMemo(()=>on(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function hs(e,t){return Lr(e,t)}function Lr(e,t,n,r,i){re(Ye(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=x.useContext(we),{matches:a}=x.useContext(ke),l=a[a.length-1],c=l?l.params:{},o=l?l.pathname:"/",u=l?l.pathnameBase:"/",h=l&&l.route;{let T=h&&h.path||"";Dr(o,!h||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${o}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let f=Le(),p;if(t){let T=typeof t=="string"?We(t):t;re(u==="/"||T.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${T.pathname}" was given in the \`location\` prop.`),p=T}else p=f;let S=p.pathname||"/",w=S;if(u!=="/"){let T=u.replace(/^\//,"").split("/");w="/"+S.replace(/^\//,"").split("/").slice(T.length).join("/")}let E=Nr(e,{pathname:w});ve(h||E!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),ve(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=ys(E&&E.map(T=>Object.assign({},T,{params:Object.assign({},c,T.params),pathname:_e([u,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?u:_e([u,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),a,n,r,i);return t&&v?x.createElement(ht.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},v):v}function ps(){let e=ks(),t=is(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=x.createElement(x.Fragment,null,x.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:s},"ErrorBoundary")," or"," ",x.createElement("code",{style:s},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),n?x.createElement("pre",{style:i},n):null,a)}var fs=x.createElement(ps,null),ms=class extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?x.createElement(ke.Provider,{value:this.props.routeContext},x.createElement(cn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function gs({routeContext:e,match:t,children:n}){let r=x.useContext(Ge);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),x.createElement(ke.Provider,{value:e},n)}function ys(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,a=n?.errors;if(a!=null){let o=s.findIndex(u=>u.route.id&&a?.[u.route.id]!==void 0);re(o>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,o+1))}let l=!1,c=-1;if(n)for(let o=0;o<s.length;o++){let u=s[o];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=o),u.route.id){let{loaderData:h,errors:f}=n,p=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||p){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((o,u,h)=>{let f,p=!1,S=null,w=null;n&&(f=a&&u.route.id?a[u.route.id]:void 0,S=u.route.errorElement||fs,l&&(c<0&&h===0?(Dr("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,w=null):c===h&&(p=!0,w=u.route.hydrateFallbackElement||null)));let E=t.concat(s.slice(0,h+1)),v=()=>{let T;return f?T=S:p?T=w:u.route.Component?T=x.createElement(u.route.Component,null):u.route.element?T=u.route.element:T=o,x.createElement(gs,{match:u,routeContext:{outlet:o,matches:E,isDataRoute:n!=null},children:T})};return n&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?x.createElement(ms,{location:n.location,revalidation:n.revalidation,component:S,error:f,children:v(),routeContext:{outlet:null,matches:E,isDataRoute:!0},unstable_onError:r}):v()},null)}function un(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xs(e){let t=x.useContext(Ge);return re(t,un(e)),t}function bs(e){let t=x.useContext(Tt);return re(t,un(e)),t}function vs(e){let t=x.useContext(ke);return re(t,un(e)),t}function dn(e){let t=vs(e),n=t.matches[t.matches.length-1];return re(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function ws(){return dn("useRouteId")}function ks(){let e=x.useContext(cn),t=bs("useRouteError"),n=dn("useRouteError");return e!==void 0?e:t.errors?.[n]}function Ss(){let{router:e}=xs("useNavigate"),t=dn("useNavigate"),n=x.useRef(!1);return Rr(()=>{n.current=!0}),x.useCallback(async(i,s={})=>{ve(n.current,Ir),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var On={};function Dr(e,t,n){!t&&!On[e]&&(On[e]=!0,ve(!1,n))}x.memo(Es);function Es({routes:e,future:t,state:n,unstable_onError:r}){return Lr(e,void 0,n,r,t)}function Mn({to:e,replace:t,state:n,relative:r}){re(Ye(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=x.useContext(we);ve(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=x.useContext(ke),{pathname:a}=Le(),l=De(),c=on(e,ln(s),a,r==="path"),o=JSON.stringify(c);return x.useEffect(()=>{l(JSON.parse(o),{replace:t,state:n,relative:r})},[l,o,r,t,n]),null}function Cs(e){return ds(e.context)}function je(e){re(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ts({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){re(!Ye(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),l=x.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof n=="string"&&(n=We(n));let{pathname:c="/",search:o="",hash:u="",state:h=null,key:f="default"}=n,p=x.useMemo(()=>{let S=Pe(c,a);return S==null?null:{location:{pathname:S,search:o,hash:u,state:h,key:f},navigationType:r}},[a,c,o,u,h,f,r]);return ve(p!=null,`<Router basename="${a}"> is not able to match the URL "${c}${o}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:x.createElement(we.Provider,{value:l},x.createElement(ht.Provider,{children:t,value:p}))}function Ns({children:e,location:t}){return hs(Yt(e),t)}function Yt(e,t=[]){let n=[];return x.Children.forEach(e,(r,i)=>{if(!x.isValidElement(r))return;let s=[...t,i];if(r.type===x.Fragment){n.push.apply(n,Yt(r.props.children,s));return}re(r.type===je,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),re(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Yt(r.props.children,s)),n.push(a)}),n}var vt="get",wt="application/x-www-form-urlencoded";function Nt(e){return e!=null&&typeof e.tagName=="string"}function As(e){return Nt(e)&&e.tagName.toLowerCase()==="button"}function js(e){return Nt(e)&&e.tagName.toLowerCase()==="form"}function _s(e){return Nt(e)&&e.tagName.toLowerCase()==="input"}function Ps(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Is(e,t){return e.button===0&&(!t||t==="_self")&&!Ps(e)}var gt=null;function Rs(){if(gt===null)try{new FormData(document.createElement("form"),0),gt=!1}catch{gt=!0}return gt}var Ls=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rt(e){return e!=null&&!Ls.has(e)?(ve(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wt}"`),null):e}function Ds(e,t){let n,r,i,s,a;if(js(e)){let l=e.getAttribute("action");r=l?Pe(l,t):null,n=e.getAttribute("method")||vt,i=Rt(e.getAttribute("enctype"))||wt,s=new FormData(e)}else if(As(e)||_s(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(r=c?Pe(c,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||vt,i=Rt(e.getAttribute("formenctype"))||Rt(l.getAttribute("enctype"))||wt,s=new FormData(l,e),!Rs()){let{name:o,type:u,value:h}=e;if(u==="image"){let f=o?`${o}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else o&&s.append(o,h)}}else{if(Nt(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=vt,r=null,i=wt,a=e}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function hn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Os(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Pe(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Ms(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Fs(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function qs(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let a=await Ms(s,n);return a.links?a.links():[]}return[]}));return Us(r.flat(1).filter(Fs).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Fn(e,t,n,r,i,s){let a=(c,o)=>n[o]?c.route.id!==n[o].route.id:!0,l=(c,o)=>n[o].pathname!==c.pathname||n[o].route.path?.endsWith("*")&&n[o].params["*"]!==c.params["*"];return s==="assets"?t.filter((c,o)=>a(c,o)||l(c,o)):s==="data"?t.filter((c,o)=>{let u=r.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(a(c,o)||l(c,o))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function zs(e,t,{includeHydrateFallback:n}={}){return Bs(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Bs(e){return[...new Set(e)]}function $s(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Us(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify($s(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function Or(){let e=x.useContext(Ge);return hn(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Hs(){let e=x.useContext(Tt);return hn(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var pn=x.createContext(void 0);pn.displayName="FrameworkContext";function Mr(){let e=x.useContext(pn);return hn(e,"You must render this element inside a <HydratedRouter> element"),e}function Vs(e,t){let n=x.useContext(pn),[r,i]=x.useState(!1),[s,a]=x.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:o,onMouseLeave:u,onTouchStart:h}=t,f=x.useRef(null);x.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let w=v=>{v.forEach(T=>{a(T.isIntersecting)})},E=new IntersectionObserver(w,{threshold:.5});return f.current&&E.observe(f.current),()=>{E.disconnect()}}},[e]),x.useEffect(()=>{if(r){let w=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(w)}}},[r]);let p=()=>{i(!0)},S=()=>{i(!1),a(!1)};return n?e!=="intent"?[s,f,{}]:[s,f,{onFocus:tt(l,p),onBlur:tt(c,S),onMouseEnter:tt(o,p),onMouseLeave:tt(u,S),onTouchStart:tt(h,p)}]:[!1,f,{}]}function tt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Qs({page:e,...t}){let{router:n}=Or(),r=x.useMemo(()=>Nr(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?x.createElement(Gs,{page:e,matches:r,...t}):null}function Ws(e){let{manifest:t,routeModules:n}=Mr(),[r,i]=x.useState([]);return x.useEffect(()=>{let s=!1;return qs(e,t,n).then(a=>{s||i(a)}),()=>{s=!0}},[e,t,n]),r}function Gs({page:e,matches:t,...n}){let r=Le(),{manifest:i,routeModules:s}=Mr(),{basename:a}=Or(),{loaderData:l,matches:c}=Hs(),o=x.useMemo(()=>Fn(e,t,c,i,r,"data"),[e,t,c,i,r]),u=x.useMemo(()=>Fn(e,t,c,i,r,"assets"),[e,t,c,i,r]),h=x.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let S=new Set,w=!1;if(t.forEach(v=>{let T=i.routes[v.route.id];!T||!T.hasLoader||(!o.some(A=>A.route.id===v.route.id)&&v.route.id in l&&s[v.route.id]?.shouldRevalidate||T.hasClientLoader?w=!0:S.add(v.route.id))}),S.size===0)return[];let E=Os(e,a,"data");return w&&S.size>0&&E.searchParams.set("_routes",t.filter(v=>S.has(v.route.id)).map(v=>v.route.id).join(",")),[E.pathname+E.search]},[a,l,r,i,o,t,e,s]),f=x.useMemo(()=>zs(u,i),[u,i]),p=Ws(u);return x.createElement(x.Fragment,null,h.map(S=>x.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),f.map(S=>x.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),p.map(({key:S,link:w})=>x.createElement("link",{key:S,nonce:n.nonce,...w})))}function Ys(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Fr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Fr&&(window.__reactRouterVersion="7.9.1")}catch{}function Ks({basename:e,children:t,window:n}){let r=x.useRef();r.current==null&&(r.current=Di({window:n,v5Compat:!0}));let i=r.current,[s,a]=x.useState({action:i.action,location:i.location}),l=x.useCallback(c=>{x.startTransition(()=>a(c))},[a]);return x.useLayoutEffect(()=>i.listen(l),[i,l]),x.createElement(Ts,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var qr=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zr=x.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:l,target:c,to:o,preventScrollReset:u,viewTransition:h,...f},p){let{basename:S}=x.useContext(we),w=typeof o=="string"&&qr.test(o),E,v=!1;if(typeof o=="string"&&w&&(E=o,Fr))try{let k=new URL(window.location.href),_=o.startsWith("//")?new URL(k.protocol+o):new URL(o),j=Pe(_.pathname,S);_.origin===k.origin&&j!=null?o=j+_.search+_.hash:v=!0}catch{ve(!1,`<Link to="${o}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=os(o,{relative:i}),[A,D,M]=Vs(r,f),y=ea(o,{replace:a,state:l,target:c,preventScrollReset:u,relative:i,viewTransition:h});function b(k){t&&t(k),k.defaultPrevented||y(k)}let C=x.createElement("a",{...f,...M,href:E||T,onClick:v||s?t:b,ref:Ys(p,D),target:c,"data-discover":!w&&n==="render"?"true":void 0});return A&&!w?x.createElement(x.Fragment,null,C,x.createElement(Qs,{page:T})):C});zr.displayName="Link";var Js=x.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:l,children:c,...o},u){let h=pt(a,{relative:o.relative}),f=Le(),p=x.useContext(Tt),{navigator:S,basename:w}=x.useContext(we),E=p!=null&&sa(h)&&l===!0,v=S.encodeLocation?S.encodeLocation(h).pathname:h.pathname,T=f.pathname,A=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(T=T.toLowerCase(),A=A?A.toLowerCase():null,v=v.toLowerCase()),A&&w&&(A=Pe(A,w)||A);const D=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let M=T===v||!i&&T.startsWith(v)&&T.charAt(D)==="/",y=A!=null&&(A===v||!i&&A.startsWith(v)&&A.charAt(v.length)==="/"),b={isActive:M,isPending:y,isTransitioning:E},C=M?t:void 0,k;typeof r=="function"?k=r(b):k=[r,M?"active":null,y?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let _=typeof s=="function"?s(b):s;return x.createElement(zr,{...o,"aria-current":C,className:k,ref:u,style:_,to:a,viewTransition:l},typeof c=="function"?c(b):c)});Js.displayName="NavLink";var Xs=x.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:a=vt,action:l,onSubmit:c,relative:o,preventScrollReset:u,viewTransition:h,...f},p)=>{let S=ra(),w=ia(l,{relative:o}),E=a.toLowerCase()==="get"?"get":"post",v=typeof l=="string"&&qr.test(l),T=A=>{if(c&&c(A),A.defaultPrevented)return;A.preventDefault();let D=A.nativeEvent.submitter,M=D?.getAttribute("formmethod")||a;S(D||A.currentTarget,{fetcherKey:t,method:M,navigate:n,replace:i,state:s,relative:o,preventScrollReset:u,viewTransition:h})};return x.createElement("form",{ref:p,method:E,action:w,onSubmit:r?c:T,...f,"data-discover":!v&&e==="render"?"true":void 0})});Xs.displayName="Form";function Zs(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Br(e){let t=x.useContext(Ge);return re(t,Zs(e)),t}function ea(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let l=De(),c=Le(),o=pt(e,{relative:s});return x.useCallback(u=>{if(Is(u,t)){u.preventDefault();let h=n!==void 0?n:ut(c)===ut(o);l(e,{replace:h,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[c,l,o,n,r,t,e,i,s,a])}var ta=0,na=()=>`__${String(++ta)}__`;function ra(){let{router:e}=Br("useSubmit"),{basename:t}=x.useContext(we),n=ws();return x.useCallback(async(r,i={})=>{let{action:s,method:a,encType:l,formData:c,body:o}=Ds(r,t);if(i.navigate===!1){let u=i.fetcherKey||na();await e.fetch(u,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:o,formMethod:i.method||a,formEncType:i.encType||l,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:o,formMethod:i.method||a,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function ia(e,{relative:t}={}){let{basename:n}=x.useContext(we),r=x.useContext(ke);re(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...pt(e||".",{relative:t})},a=Le();if(e==null){s.search=a.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let u=l.toString();s.search=u?`?${u}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:_e([n,s.pathname])),ut(s)}function sa(e,{relative:t}={}){let n=x.useContext(Pr);re(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Br("useViewTransitionState"),i=pt(e,{relative:t});if(!n.isTransitioning)return!1;let s=Pe(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Pe(n.nextLocation.pathname,r)||n.nextLocation.pathname;return St(i.pathname,a)!=null||St(i.pathname,s)!=null}function aa(e,t,n={}){const{expires:r,maxAge:i,path:s="/",domain:a,secure:l=window.location.protocol==="https:",sameSite:c="lax"}=n;let o=`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;r&&(o+=`; expires=${r.toUTCString()}`),i!==void 0&&(o+=`; max-age=${i}`),o+=`; path=${s}`,a&&(o+=`; domain=${a}`),l&&(o+="; secure"),o+=`; samesite=${c}`;try{document.cookie=o}catch(u){console.warn("Failed to set cookie:",u)}}function la(e){try{const t=encodeURIComponent(e),n=document.cookie.split(";");for(const r of n){const[i,s]=r.trim().split("=");if(i===t)return decodeURIComponent(s)}return null}catch(t){return console.warn("Failed to get cookie:",t),null}}const $r="ikb_theme_preference",oa=3600*24*365;function ca(e){aa($r,e,{maxAge:oa,path:"/",sameSite:"lax"})}function Lt(){const e=la($r);return e==="light"||e==="dark"?e:null}const Ur={currentPhase:1,currentStep:1,currentTacticIndex:0,responses:{},selectedTechniques:{},selectedSoftware:{tools:{},malware:{},groups:{}},evidenceResponses:{},evidenceCollection:{},timestamp:Date.now(),theme:"dark"},qn="incident_knowledge_base_react",ua=(e,t)=>{switch(t.type){case"SET_PHASE":return{...e,currentPhase:t.payload,timestamp:Date.now()};case"SET_STEP":return{...e,currentStep:t.payload,timestamp:Date.now()};case"SET_TACTIC_INDEX":return{...e,currentTacticIndex:t.payload,timestamp:Date.now()};case"SET_RESPONSES":return{...e,responses:t.payload,timestamp:Date.now()};case"UPDATE_RESPONSE":return{...e,responses:{...e.responses,[t.payload.key]:t.payload.value},timestamp:Date.now()};case"SET_SELECTED_TECHNIQUES":return{...e,selectedTechniques:t.payload,timestamp:Date.now()};case"TOGGLE_TECHNIQUE":const{tacticId:n,techniqueId:r}=t.payload,i=e.selectedTechniques[n]||{},s={...i,[r]:!i[r]};return{...e,selectedTechniques:{...e.selectedTechniques,[n]:s},timestamp:Date.now()};case"UPDATE_TECHNIQUE_SELECTION":const{tacticId:a,techniqueId:l,selected:c}=t.payload,u={...e.selectedTechniques[a]||{},[l]:c};return{...e,selectedTechniques:{...e.selectedTechniques,[a]:u},timestamp:Date.now()};case"SET_SELECTED_SOFTWARE":return{...e,selectedSoftware:t.payload,timestamp:Date.now()};case"TOGGLE_SOFTWARE":const{category:h,id:f}=t.payload;return{...e,selectedSoftware:{...e.selectedSoftware,[h]:{...e.selectedSoftware[h],[f]:!e.selectedSoftware[h][f]}},timestamp:Date.now()};case"SET_EVIDENCE_RESPONSES":return{...e,evidenceResponses:t.payload,timestamp:Date.now()};case"UPDATE_EVIDENCE_RESPONSE":return{...e,evidenceResponses:{...e.evidenceResponses,[t.payload.key]:t.payload.value},timestamp:Date.now()};case"SET_EVIDENCE_COLLECTION":return{...e,evidenceCollection:t.payload,timestamp:Date.now()};case"ADD_EVIDENCE_ITEM":const{questionId:p}=t.payload;return{...e,evidenceCollection:{...e.evidenceCollection,[p]:[...e.evidenceCollection[p]||[],t.payload]},timestamp:Date.now()};case"UPDATE_EVIDENCE_ITEM":const{id:S,updates:w}=t.payload,E={...e.evidenceCollection};return Object.keys(E).forEach(A=>{const D=E[A].findIndex(M=>M.id===S);D!==-1&&(E[A]=[...E[A]],E[A][D]={...E[A][D],...w})}),{...e,evidenceCollection:E,timestamp:Date.now()};case"REMOVE_EVIDENCE_ITEM":const{questionId:v,itemId:T}=t.payload;return{...e,evidenceCollection:{...e.evidenceCollection,[v]:(e.evidenceCollection[v]||[]).filter(A=>A.id!==T)},timestamp:Date.now()};case"SET_THEME":return{...e,theme:t.payload,timestamp:Date.now()};case"TOGGLE_THEME":return{...e,theme:e.theme==="dark"?"light":"dark",timestamp:Date.now()};case"RESET_ALL":return{...Ur,timestamp:Date.now()};case"LOAD_STATE":return t.payload;default:return e}},Hr=x.createContext(void 0),Oe=()=>{const e=x.useContext(Hr);if(!e)throw new Error("useAppContext must be used within an AppProvider");return e},da=({children:e})=>{const[t,n]=x.useReducer(ua,Ur);return x.useEffect(()=>{try{const r=localStorage.getItem(qn);if(console.log("Loading state from localStorage:",r?"Found saved state":"No saved state"),r){const i=JSON.parse(r);console.log("Loaded state:",i);let s=i.theme;s||(s=Lt()||"dark",console.log("Theme not found in localStorage, loaded from cookie or default:",s));const a={...i,theme:s};n({type:"LOAD_STATE",payload:a})}else{const i=Lt();i&&(console.log("No localStorage found, but found theme in cookie:",i),n({type:"SET_THEME",payload:i}))}}catch(r){console.error("Failed to load state from localStorage:",r);try{const i=Lt();i&&(console.log("localStorage failed, but found theme in cookie:",i),n({type:"SET_THEME",payload:i}))}catch(i){console.error("Failed to load theme from cookie:",i)}}},[]),x.useEffect(()=>{try{console.log("Saving state to localStorage:",t),localStorage.setItem(qn,JSON.stringify(t))}catch(r){console.error("Failed to save state to localStorage:",r)}try{ca(t.theme),console.log("Saved theme to cookie:",t.theme)}catch(r){console.error("Failed to save theme to cookie:",r)}try{console.log("Applying theme:",t.theme),t.theme==="light"?(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light"),console.log("Applied light theme class")):(document.documentElement.classList.remove("light"),document.documentElement.classList.add("dark"),console.log("Applied dark theme class"))}catch(r){console.error("Failed to apply theme:",r)}},[t]),d.jsx(Hr.Provider,{value:{state:t,dispatch:n},children:e})},ha=()=>{const{state:e,dispatch:t}=Oe(),[n,r]=x.useState(!1),[i,s]=x.useState(null),a=()=>{r(!n)},l=()=>{r(!1)};x.useEffect(()=>{try{const f=localStorage.getItem("incident_knowledge_base_react");if(f){const p=Math.round(f.length*2/1024);s({hasData:!0,size:p})}else s({hasData:!1,size:0})}catch(f){console.error("Error checking localStorage:",f),s(null)}},[e]);const c=()=>{confirm("Are you sure you want to reset all progress? This action cannot be undone.")&&(t({type:"RESET_ALL"}),l())},o=()=>{try{const f=JSON.stringify(e,null,2),p=new Blob([f],{type:"application/json"}),S=URL.createObjectURL(p),w=document.createElement("a");w.href=S,w.download=`ikb-data-${new Date().toISOString().split("T")[0]}.json`,w.click(),URL.revokeObjectURL(S),l()}catch(f){console.error("Error exporting data:",f),alert("Failed to export data. Check console for details.")}},u=()=>{console.log("Current state:",e),console.log("localStorage data:",localStorage.getItem("incident_knowledge_base_react")),alert("Storage data logged to console. Check browser developer tools."),l()},h=()=>{console.log("Toggle theme clicked. Current theme:",e.theme),t({type:"TOGGLE_THEME"}),l()};return d.jsxs("div",{className:"header card",children:[d.jsx("h1",{children:"ðŸ›¡ï¸ Incident Knowledge Recorder"}),d.jsxs("div",{className:"header-menu",children:[d.jsx("div",{className:"storage-status",children:i&&d.jsx("span",{className:"storage-indicator",title:"Data persistence status",children:i.hasData?`ðŸ’¾ ${i.size}KB saved`:"ðŸ’¾ No saved data"})}),d.jsx("button",{className:"menu-toggle",onClick:a,children:d.jsx("span",{className:"menu-icon",children:"â‹®"})}),d.jsxs("div",{className:`dropdown-menu ${n?"":"hidden"}`,children:[d.jsx("button",{onClick:h,className:"menu-item",children:e.theme==="dark"?"â˜€ï¸ Light Mode":"ðŸŒ™ Dark Mode"}),d.jsx("div",{className:"menu-divider"}),d.jsx("button",{onClick:u,className:"menu-item",children:"ðŸ” View Storage Data"}),d.jsx("button",{onClick:o,className:"menu-item",children:"ðŸ“¥ Export Data"}),d.jsx("button",{onClick:c,className:"menu-item",children:"ðŸ”„ Reset All"})]})]})]})},pa=()=>{const{state:e}=Oe(),t=[{number:1,label:"Context"},{number:2,label:"Techniques"},{number:3,label:"Software"},{number:4,label:"Evidence"},{number:5,label:"Summary"}];return d.jsx("div",{className:"phase-progress-container",children:d.jsx("div",{className:"phase-steps",children:t.map((n,r)=>d.jsxs(Ri.Fragment,{children:[d.jsxs("div",{className:`phase-step ${e.currentPhase>=n.number?"active":""} ${e.currentPhase===n.number?"current":""}`,children:[d.jsx("div",{className:"phase-number",children:n.number}),d.jsx("div",{className:"phase-label",children:n.label})]}),r<t.length-1&&d.jsx("div",{className:`phase-connector ${e.currentPhase>n.number?"completed":""}`})]},n.number))})})},fa=()=>d.jsxs("div",{className:"container",children:[d.jsx(ha,{}),d.jsx(pa,{}),d.jsx("main",{className:"main-content",children:d.jsx(Cs,{})})]});class Be{static getMaxAccessiblePhase(t){return!t.responses||Object.keys(t.responses).length===0||!this.isPhase1Complete(t)?1:this.isPhase2Complete(t)?this.isPhase3Complete(t)?this.isPhase4Complete(t)?5:4:3:2}static canAccessPhase(t,n){const r=this.getMaxAccessiblePhase(t);return n<=r}static getRedirectPhase(t,n){return this.canAccessPhase(t,n)?n:this.getMaxAccessiblePhase(t)}static isPhase1Complete(t){return!t.responses||Object.keys(t.responses).length===0?!1:Object.values(t.responses).filter(i=>typeof i=="string"?i.trim().length>0:i!=null).length>=3}static isPhase2Complete(t){if(!t.selectedTechniques)return!1;const n=Object.keys(t.selectedTechniques);return n.length===0?!1:n.some(r=>{const i=t.selectedTechniques[r]||{};return Object.values(i).some(s=>s)})}static isPhase3Complete(t){return!!(t.selectedSoftware&&Object.keys(t.selectedSoftware).length>0)}static isPhase4Complete(t){return!0}static getAccessDeniedReason(t,n){const r=this.getMaxAccessiblePhase(t);if(n<=r)return"";switch(n){case 2:return"Please answer at least 3 questions in Phase 1 before proceeding to Phase 2.";case 3:return"Please select at least one technique in Phase 2 before proceeding to Phase 3.";case 4:return"Please make your software/group selections in Phase 3 before proceeding to Phase 4.";case 5:return"Please complete Phase 4 (Evidence Collection) before proceeding to Phase 5.";default:return`Please complete the previous phases first. You can currently access up to Phase ${r}.`}}}const nt=({requiredPhase:e,children:t})=>{const{state:n,dispatch:r}=Oe(),i=De(),[s,a]=x.useState(!1);if(x.useEffect(()=>{if(Be.canAccessPhase(n,e))a(!1),n.currentPhase!==e&&r({type:"SET_PHASE",payload:e});else{const o=Be.getRedirectPhase(n,e);a(!0),r({type:"SET_PHASE",payload:o});const u=setTimeout(()=>{i(`/phase/${o}`,{replace:!0})},100);return console.warn(`Access to Phase ${e} denied. Redirected to Phase ${o}. `+Be.getAccessDeniedReason(n,e)),()=>clearTimeout(u)}},[n.responses,n.selectedTechniques,n.selectedSoftware,n.evidenceResponses,e,r,i]),s){const c=Be.getRedirectPhase(n,e),o=Be.getAccessDeniedReason(n,e);return d.jsx("div",{className:"phase-guard-loading",children:d.jsxs("div",{className:"loading-container",children:[d.jsx("div",{className:"spinner"}),d.jsxs("div",{className:"loading-content",children:[d.jsxs("p",{className:"loading-title",children:["Redirecting to Phase ",c,"..."]}),d.jsx("p",{className:"loading-reason",children:o})]})]})})}return Be.canAccessPhase(n,e)?d.jsx(d.Fragment,{children:t}):null},ma=e=>{if(e.startsWith("/src/data/")){const t="/ikb-demo/";return(t.endsWith("/")?t.slice(0,-1):t)+e}return e.startsWith("/"),e},ga=e=>{const[t,n]=x.useState(null),[r,i]=x.useState(!0),[s,a]=x.useState(null);return x.useEffect(()=>{(async()=>{try{i(!0),a(null);const c=ma(e),o=await fetch(c);if(!o.ok)throw new Error(`Failed to load data from ${c}: ${o.statusText}`);const u=await o.json();n(u)}catch(c){a(c instanceof Error?c.message:"Unknown error occurred")}finally{i(!1)}})()},[e]),{data:t,loading:r,error:s}};class Re{static shouldShowQuestion(t,n){const r=t.show_when||t.conditional;return r?this.evaluateCondition(r,n):!0}static evaluateCondition(t,n){if(t.and&&Array.isArray(t.and))return t.and.every(l=>this.evaluateCondition(l,n));if(t.or&&Array.isArray(t.or))return t.or.some(l=>this.evaluateCondition(l,n));const r=t.question_id||t.question;if(!r)return console.warn("Conditional logic missing question reference:",t),!0;const i=t.operator||t.condition||"equals",s=t.value,a=n[r];return this.evaluateSimpleCondition(a,s,i)}static evaluateSimpleCondition(t,n,r){if(t==null)switch(r){case"not_exists":return!0;case"exists":return!1;case"not_equals":return n!=null;default:return!1}switch(r){case"equals":return Array.isArray(n)?n.includes(t):t===n;case"not_equals":return Array.isArray(n)?!n.includes(t):t!==n;case"contains":return Array.isArray(t)?Array.isArray(n)?n.some(c=>t.includes(c)):t.includes(n):typeof t=="string"&&typeof n=="string"?t.toLowerCase().includes(n.toLowerCase()):!1;case"not_contains":return Array.isArray(t)?Array.isArray(n)?!n.some(c=>t.includes(c)):!t.includes(n):typeof t=="string"&&typeof n=="string"?!t.toLowerCase().includes(n.toLowerCase()):!0;case"greater_than":const i=Number(t),s=Number(n);return isNaN(i)||isNaN(s)?!1:i>s;case"less_than":const a=Number(t),l=Number(n);return isNaN(a)||isNaN(l)?!1:a<l;case"exists":return t!=null&&t!=="";case"not_exists":return t==null||t==="";case"in":return Array.isArray(n)?n.includes(t):t===n;case"not_in":return Array.isArray(n)?!n.includes(t):t!==n;default:return console.warn("Unknown conditional operator:",r),!1}}static getQuestionDependencies(t){const n=t.show_when||t.conditional;return n?this.extractQuestionIds(n):[]}static extractQuestionIds(t){const n=[];t.and&&Array.isArray(t.and)&&t.and.forEach(i=>{n.push(...this.extractQuestionIds(i))}),t.or&&Array.isArray(t.or)&&t.or.forEach(i=>{n.push(...this.extractQuestionIds(i))});const r=t.question_id||t.question;return r&&n.push(r),[...new Set(n)]}static buildDependencyGraph(t){const n=new Map;return t.forEach(r=>{const i=this.getQuestionDependencies(r);n.set(r.id,i)}),n}static detectCircularDependencies(t){const n=this.buildDependencyGraph(t),r=new Set,i=new Set,s=[],a=(l,c)=>{if(i.has(l)){const u=c.indexOf(l);u!==-1&&s.push(c.slice(u).concat(l));return}if(r.has(l))return;r.add(l),i.add(l),(n.get(l)||[]).forEach(u=>{a(u,[...c,l])}),i.delete(l)};return t.forEach(l=>{r.has(l.id)||a(l.id,[])}),s}static getVisibleQuestions(t,n){return t.filter(r=>this.shouldShowQuestion(r,n))}static getVisibleQuestionsForPage(t,n){return this.getVisibleQuestions(t,n)}static validateRequiredQuestions(t,n){const r=this.getVisibleQuestions(t,n),i=[];return r.forEach(s=>{if(s.required){const a=n[s.id];(a==null||a===""||Array.isArray(a)&&a.length===0)&&i.push(s.id)}}),{valid:i.length===0,missingQuestions:i}}static getProgressInfo(t,n){const r=this.getVisibleQuestions(t,n),i=r.filter(c=>c.required),s=r.filter(c=>{const o=n[c.id];return o!=null&&o!==""&&!(Array.isArray(o)&&o.length===0)}),a=i.filter(c=>{const o=n[c.id];return o!=null&&o!==""&&!(Array.isArray(o)&&o.length===0)}),l=r.length>0?Math.round(s.length/r.length*100):0;return{totalQuestions:r.length,answeredQuestions:s.length,requiredQuestions:i.length,answeredRequiredQuestions:a.length,percentage:l}}static getMandatoryProgressInfo(t,n){const i=this.getVisibleQuestions(t,n).filter(l=>l.required),s=i.filter(l=>{const c=n[l.id];return c!=null&&c!==""&&!(Array.isArray(c)&&c.length===0)}),a=i.length>0?Math.round(s.length/i.length*100):100;return{totalQuestions:i.length,answeredQuestions:s.length,percentage:a}}}const ya=({page:e,responses:t,onResponseChange:n,validationResults:r={},disabled:i=!1,className:s="",showSummary:a=!0})=>{const l=Re.getVisibleQuestionsForPage(e.questions,t),c=Re.getProgressInfo(l,t),o=(h,f)=>{n(h,f)},u=h=>{const f=r[h.id];if(!f||f.length===0)return;const p=f.filter(S=>S.severity==="error").map(S=>S.message);return p.length>0?p[0]:void 0};return l.length===0?d.jsxs("div",{className:`question-page empty-page ${s}`,children:[d.jsxs("div",{className:"page-header",children:[d.jsx("h2",{children:e.title}),e.description&&d.jsx("p",{className:"page-description",children:e.description})]}),d.jsx("div",{className:"empty-page-message",children:d.jsx("p",{children:"No questions are currently visible based on your previous responses."})})]}):d.jsxs("div",{className:`question-page ${s}`,children:[d.jsx("div",{className:"page-header",children:d.jsx("h2",{children:e.title})}),d.jsx("div",{className:"questions-container",children:l.map((h,f)=>d.jsx("div",{className:"question-wrapper",children:d.jsx(Tr,{question:h,value:t[h.id],onChange:p=>o(h.id,p),error:u(h),disabled:i,showHint:!0,className:`page-question ${h.required?"required-question":""}`,testId:`page-${e.id}-question-${h.id}`})},h.id))}),a&&l.length>0&&d.jsx("div",{className:"page-summary",children:d.jsxs("div",{className:"completion-summary",children:[d.jsx("h3",{children:"Page Summary"}),d.jsxs("ul",{children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Total Questions:"})," ",c.totalQuestions]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Answered:"})," ",c.answeredQuestions]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Required Questions:"})," ",c.requiredQuestions]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Required Completed:"})," ",c.answeredRequiredQuestions]})]})]})})]})};class zn{static validateQuestion(t,n){const r=[];if(t.required&&this.isEmpty(n))return r.push({field:t.id,message:`${t.question} is required`,code:"REQUIRED",severity:"error"}),r;if(this.isEmpty(n))return r;switch(t.type){case"text":case"text_short":case"textarea":r.push(...this.validateText(t,n));break;case"number":r.push(...this.validateNumber(t,n));break;case"single_select":r.push(...this.validateSingleSelect(t,n));break;case"multi_select":r.push(...this.validateMultiSelect(t,n));break;case"cve":case"cve_input":r.push(...this.validateCVE(t,n));break;case"datetime":case"datetime_range":r.push(...this.validateDateTime(t,n));break;case"internet_asset":r.push(...this.validateInternetAssets(t,n));break;case"boolean":r.push(...this.validateBoolean(t,n));break;case"scale":r.push(...this.validateScale(t,n));break}return t.validation&&r.push(...this.validateCustomRules(t,n)),r}static isEmpty(t){return t==null?!0:typeof t=="string"?t.trim()==="":Array.isArray(t)?t.length===0:typeof t=="object"?Object.keys(t).length===0:!1}static validateText(t,n){const r=[],i=t.validation;if(!i)return r;const s=String(n);if(i.min_length&&s.length<i.min_length&&r.push({field:t.id,message:`Minimum ${i.min_length} characters required`,code:"MIN_LENGTH",severity:"error"}),i.max_length&&s.length>i.max_length&&r.push({field:t.id,message:`Maximum ${i.max_length} characters allowed`,code:"MAX_LENGTH",severity:"error"}),i.pattern)try{new RegExp(i.pattern).test(s)||r.push({field:t.id,message:i.error_message||"Invalid format",code:"PATTERN_MISMATCH",severity:"error"})}catch{console.error("Invalid regex pattern:",i.pattern)}return r}static validateNumber(t,n){const r=[],i=t.validation,s=Number(n);return isNaN(s)?(r.push({field:t.id,message:"Must be a valid number",code:"INVALID_NUMBER",severity:"error"}),r):(i?.min_value!==void 0&&s<i.min_value&&r.push({field:t.id,message:`Minimum value is ${i.min_value}`,code:"MIN_VALUE",severity:"error"}),i?.max_value!==void 0&&s>i.max_value&&r.push({field:t.id,message:`Maximum value is ${i.max_value}`,code:"MAX_VALUE",severity:"error"}),r)}static validateSingleSelect(t,n){const r=[];return t.options?(t.options.map(s=>s.value).includes(n)||r.push({field:t.id,message:"Invalid selection",code:"INVALID_OPTION",severity:"error"}),r):(r.push({field:t.id,message:"No options defined for this question",code:"NO_OPTIONS",severity:"error"}),r)}static validateMultiSelect(t,n){const r=[];if(!Array.isArray(n))return r.push({field:t.id,message:"Must be an array of selections",code:"INVALID_ARRAY",severity:"error"}),r;if(!t.options)return r.push({field:t.id,message:"No options defined for this question",code:"NO_OPTIONS",severity:"error"}),r;const i=t.options.map(a=>a.value),s=n.filter(a=>!i.includes(a));return s.length>0&&r.push({field:t.id,message:`Invalid selections: ${s.join(", ")}`,code:"INVALID_SELECTIONS",severity:"error"}),r}static validateCVE(t,n){const r=[];if(!Array.isArray(n))return r.push({field:t.id,message:"CVE data must be an array",code:"INVALID_CVE_ARRAY",severity:"error"}),r;const i=/^CVE-\d{4}-\d{4,}$/i;n.forEach(l=>{l.type==="cve"&&!i.test(l.id)&&r.push({field:t.id,message:`Invalid CVE format: ${l.id}`,code:"INVALID_CVE_FORMAT",severity:"error"}),l.type==="0-day"&&(!l.title||!l.description)&&r.push({field:t.id,message:"0-day vulnerabilities must have title and description",code:"INCOMPLETE_ZERODAY",severity:"error"})});const s=n.map(l=>l.id),a=s.filter((l,c)=>s.indexOf(l)!==c);return a.length>0&&r.push({field:t.id,message:`Duplicate CVE entries: ${a.join(", ")}`,code:"DUPLICATE_CVES",severity:"warning"}),r}static validateDateTime(t,n){const r=[];if(typeof n!="object"||n===null)return r.push({field:t.id,message:"Invalid datetime data",code:"INVALID_DATETIME_OBJECT",severity:"error"}),r;if(n.special_value)return["unknown","n/a","ongoing","estimated","approximate"].includes(n.special_value)||r.push({field:t.id,message:"Invalid special datetime value",code:"INVALID_SPECIAL_VALUE",severity:"error"}),r;if(n.start)try{const i=new Date(n.start);isNaN(i.getTime())&&r.push({field:t.id,message:"Invalid start date format",code:"INVALID_START_DATE",severity:"error"})}catch{r.push({field:t.id,message:"Invalid start date format",code:"INVALID_START_DATE",severity:"error"})}if(n.end)try{const i=new Date(n.end);if(isNaN(i.getTime())&&r.push({field:t.id,message:"Invalid end date format",code:"INVALID_END_DATE",severity:"error"}),n.start){const s=new Date(n.start);!isNaN(s.getTime())&&!isNaN(i.getTime())&&i<s&&r.push({field:t.id,message:"End date must be after start date",code:"INVALID_DATE_RANGE",severity:"error"})}}catch{r.push({field:t.id,message:"Invalid end date format",code:"INVALID_END_DATE",severity:"error"})}return r}static validateInternetAssets(t,n){const r=[];if(!Array.isArray(n))return r.push({field:t.id,message:"Internet assets must be an array",code:"INVALID_ASSETS_ARRAY",severity:"error"}),r;n.forEach((a,l)=>{if(!a.id||!a.type||!a.value||!a.classification){r.push({field:t.id,message:`Asset ${l+1}: Missing required fields`,code:"INCOMPLETE_ASSET",severity:"error"});return}const c=this.validateAssetValue(a.value,a.type);c&&r.push({field:t.id,message:`Asset "${a.value}": ${c}`,code:"INVALID_ASSET_VALUE",severity:"error"}),["attacker","victim","unknown"].includes(a.classification)||r.push({field:t.id,message:`Asset "${a.value}": Invalid classification`,code:"INVALID_CLASSIFICATION",severity:"error"}),["low","medium","high"].includes(a.confidence)||r.push({field:t.id,message:`Asset "${a.value}": Invalid confidence level`,code:"INVALID_CONFIDENCE",severity:"error"})});const i=n.map(a=>a.value.toLowerCase()),s=i.filter((a,l)=>i.indexOf(a)!==l);return s.length>0&&r.push({field:t.id,message:`Duplicate assets: ${s.join(", ")}`,code:"DUPLICATE_ASSETS",severity:"warning"}),r}static validateAssetValue(t,n){const r={ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$|^::1$|^::$/,cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\/(?:[0-9]|[1-2][0-9]|3[0-2])$/,domain:/^[a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?)*$/,email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,"user-account":/^@?[\w\.-]+$/},i=r[n];if(i&&!i.test(t))switch(n){case"ipv4":return"Invalid IPv4 address format";case"ipv6":return"Invalid IPv6 address format";case"cidr":return"Invalid CIDR notation format";case"domain":case"fqdn":return"Invalid domain format";case"email":return"Invalid email format";case"user-account":return"Invalid user account format";default:return"Invalid format"}if(n==="ip-range"){const s=t.split("-");if(s.length!==2)return"IP range must be in format: IP1-IP2";const[a,l]=s.map(c=>c.trim());if(!r.ipv4.test(a)||!r.ipv4.test(l))return"Invalid IP range format"}return null}static validateBoolean(t,n){const r=[];return typeof n!="boolean"&&r.push({field:t.id,message:"Value must be true or false",code:"INVALID_BOOLEAN",severity:"error"}),r}static validateScale(t,n){const r=[],i=t.validation,s=Number(n);if(isNaN(s))return r.push({field:t.id,message:"Scale value must be a number",code:"INVALID_SCALE_NUMBER",severity:"error"}),r;const a=i?.min_value||1,l=i?.max_value||10;return(s<a||s>l)&&r.push({field:t.id,message:`Scale value must be between ${a} and ${l}`,code:"SCALE_OUT_OF_RANGE",severity:"error"}),r}static validateCustomRules(t,n){const r=[],i=t.validation;if(!i)return r;if(i.custom_validator)try{console.log(`Custom validator "${i.custom_validator}" for question ${t.id}`)}catch{r.push({field:t.id,message:i.error_message||"Custom validation failed",code:"CUSTOM_VALIDATION_ERROR",severity:"error"})}return r}static hasErrors(t){return Object.values(t).some(n=>n.some(r=>r.severity==="error"))}static getErrorMessages(t){const n=[];return Object.values(t).forEach(r=>{r.forEach(i=>{i.severity==="error"&&n.push(i.message)})}),n}static validateForm(t,n){const r={};return t.forEach(i=>{const s=n[i.id];r[i.id]=this.validateQuestion(i,s)}),r}}function xe(e="instant"){try{window.scrollTo({top:0,left:0,behavior:e})}catch{window.scrollTo(0,0)}}const xa=()=>{const{state:e,dispatch:t}=Oe(),n=De(),{data:r,loading:i,error:s}=ga("/src/data/phase1-config.json"),[a,l]=x.useState(0),[c,o]=x.useState({}),[u,h]=x.useState(!1),f=x.useMemo(()=>r?.pages||[],[r]),p=x.useMemo(()=>f[a],[f,a]),S=x.useMemo(()=>{if(!r)return{percentage:0,answeredQuestions:0,totalQuestions:0};const C=f.flatMap(_=>_.questions);return Re.getMandatoryProgressInfo(C,e.responses)},[f,e.responses,r]);x.useEffect(()=>{},[e.responses]),x.useEffect(()=>{xe()},[a]),x.useEffect(()=>{if(p&&u){const C=Re.getVisibleQuestionsForPage(p.questions,e.responses),k=zn.validateForm(C,e.responses);o(k)}},[p,e.responses,u]);const w=(C,k)=>{t({type:"UPDATE_RESPONSE",payload:{key:C,value:k}}),c[C]&&o(_=>({..._,[C]:[]}))},E=C=>C===0||C===a||C<a?!0:C===a+1?v:!1,v=x.useMemo(()=>{if(!p)return!1;const C=Re.getVisibleQuestionsForPage(p.questions,e.responses);return Re.validateRequiredQuestions(C,e.responses).valid},[p,e.responses]),T=()=>{if(!p)return!1;const C=Re.getVisibleQuestionsForPage(p.questions,e.responses);if(!Re.validateRequiredQuestions(C,e.responses).valid){h(!0);const _=zn.validateForm(C,e.responses);return o(_),!1}return!0},A=()=>{T()&&(a<f.length-1?(l(a+1),h(!1)):(t({type:"SET_PHASE",payload:2}),n("/phase/2"),xe()))},D=()=>{a>0&&(l(a-1),h(!1))},M=C=>{E(C)&&(l(C),h(!1))},y=a===f.length-1,b=!p||v;return i?d.jsx("div",{className:"phase1-questionnaire loading",children:d.jsxs("div",{className:"loading-container",children:[d.jsx("div",{className:"spinner"}),d.jsx("p",{className:"loading-text",children:"Loading questionnaire..."})]})}):s?d.jsx("div",{className:"phase1-questionnaire error",children:d.jsxs("div",{className:"error-message",children:[d.jsx("h2",{children:"Error Loading Questionnaire"}),d.jsx("p",{children:s}),d.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]})}):!r||f.length===0?d.jsx("div",{className:"phase1-questionnaire error",children:d.jsxs("div",{className:"error-message",children:[d.jsx("h2",{children:"No Questionnaire Data"}),d.jsx("p",{children:"The questionnaire configuration could not be loaded."})]})}):d.jsxs("div",{className:"phase1-questionnaire",children:[d.jsx("div",{className:"questionnaire-header",children:d.jsx("div",{className:"header-content",children:d.jsx("div",{className:"progress-bar",children:d.jsx("div",{className:"progress-fill",style:{width:`${S.percentage}%`}})})})}),d.jsx("div",{className:"questionnaire-navigation",children:d.jsx("div",{className:"page-tabs",children:f.map((C,k)=>d.jsxs("button",{className:`page-tab ${k===a?"active":""} ${E(k)?"accessible":"disabled"}`,onClick:()=>M(k),disabled:!E(k),children:[d.jsx("span",{className:"page-number",children:k+1}),d.jsx("span",{className:"page-title",children:C.title})]},C.id))})}),d.jsx("div",{className:"questionnaire-content",children:p&&d.jsx(ya,{page:p,responses:e.responses,onResponseChange:w,validationResults:c,className:"phase1-page",showSummary:!1})}),d.jsxs("div",{className:"questionnaire-controls",children:[d.jsxs("div",{className:"controls-content",children:[d.jsx("button",{className:"nav-button previous",onClick:D,disabled:a===0,children:"â† Previous"}),d.jsxs("div",{className:"page-indicator",children:["Page ",a+1," of ",f.length]}),d.jsx("button",{className:`nav-button next ${y?"complete":""}`,onClick:A,disabled:!b,children:y?"Complete Phase 1 â†’":"Next â†’"})]}),!b&&u&&d.jsx("div",{className:"validation-summary",children:d.jsx("p",{children:"Please complete all required questions before proceeding."})})]})]})};function ba(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const va=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,wa=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ka={};function Bn(e,t){return(ka.jsx?wa:va).test(e)}const Sa=/[ \t\n\f\r]/g;function Ea(e){return typeof e=="object"?e.type==="text"?$n(e.value):!1:$n(e)}function $n(e){return e.replace(Sa,"")===""}class ft{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}ft.prototype.normal={};ft.prototype.property={};ft.prototype.space=void 0;function Vr(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new ft(n,r,t)}function Kt(e){return e.toLowerCase()}class pe{constructor(t,n){this.attribute=n,this.property=t}}pe.prototype.attribute="";pe.prototype.booleanish=!1;pe.prototype.boolean=!1;pe.prototype.commaOrSpaceSeparated=!1;pe.prototype.commaSeparated=!1;pe.prototype.defined=!1;pe.prototype.mustUseProperty=!1;pe.prototype.number=!1;pe.prototype.overloadedBoolean=!1;pe.prototype.property="";pe.prototype.spaceSeparated=!1;pe.prototype.space=void 0;let Ca=0;const H=qe(),se=qe(),Jt=qe(),I=qe(),ee=qe(),Ve=qe(),me=qe();function qe(){return 2**++Ca}const Xt=Object.freeze(Object.defineProperty({__proto__:null,boolean:H,booleanish:se,commaOrSpaceSeparated:me,commaSeparated:Ve,number:I,overloadedBoolean:Jt,spaceSeparated:ee},Symbol.toStringTag,{value:"Module"})),Dt=Object.keys(Xt);class fn extends pe{constructor(t,n,r,i){let s=-1;if(super(t,n),Un(this,"space",i),typeof r=="number")for(;++s<Dt.length;){const a=Dt[s];Un(this,Dt[s],(r&Xt[a])===Xt[a])}}}fn.prototype.defined=!0;function Un(e,t,n){n&&(e[t]=n)}function Ke(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const s=new fn(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[Kt(r)]=r,n[Kt(s.attribute)]=r}return new ft(t,n,e.space)}const Qr=Ke({properties:{ariaActiveDescendant:null,ariaAtomic:se,ariaAutoComplete:null,ariaBusy:se,ariaChecked:se,ariaColCount:I,ariaColIndex:I,ariaColSpan:I,ariaControls:ee,ariaCurrent:null,ariaDescribedBy:ee,ariaDetails:null,ariaDisabled:se,ariaDropEffect:ee,ariaErrorMessage:null,ariaExpanded:se,ariaFlowTo:ee,ariaGrabbed:se,ariaHasPopup:null,ariaHidden:se,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ee,ariaLevel:I,ariaLive:null,ariaModal:se,ariaMultiLine:se,ariaMultiSelectable:se,ariaOrientation:null,ariaOwns:ee,ariaPlaceholder:null,ariaPosInSet:I,ariaPressed:se,ariaReadOnly:se,ariaRelevant:null,ariaRequired:se,ariaRoleDescription:ee,ariaRowCount:I,ariaRowIndex:I,ariaRowSpan:I,ariaSelected:se,ariaSetSize:I,ariaSort:null,ariaValueMax:I,ariaValueMin:I,ariaValueNow:I,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Wr(e,t){return t in e?e[t]:t}function Gr(e,t){return Wr(e,t.toLowerCase())}const Ta=Ke({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ve,acceptCharset:ee,accessKey:ee,action:null,allow:null,allowFullScreen:H,allowPaymentRequest:H,allowUserMedia:H,alt:null,as:null,async:H,autoCapitalize:null,autoComplete:ee,autoFocus:H,autoPlay:H,blocking:ee,capture:null,charSet:null,checked:H,cite:null,className:ee,cols:I,colSpan:null,content:null,contentEditable:se,controls:H,controlsList:ee,coords:I|Ve,crossOrigin:null,data:null,dateTime:null,decoding:null,default:H,defer:H,dir:null,dirName:null,disabled:H,download:Jt,draggable:se,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:H,formTarget:null,headers:ee,height:I,hidden:Jt,high:I,href:null,hrefLang:null,htmlFor:ee,httpEquiv:ee,id:null,imageSizes:null,imageSrcSet:null,inert:H,inputMode:null,integrity:null,is:null,isMap:H,itemId:null,itemProp:ee,itemRef:ee,itemScope:H,itemType:ee,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:H,low:I,manifest:null,max:null,maxLength:I,media:null,method:null,min:null,minLength:I,multiple:H,muted:H,name:null,nonce:null,noModule:H,noValidate:H,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:H,optimum:I,pattern:null,ping:ee,placeholder:null,playsInline:H,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:H,referrerPolicy:null,rel:ee,required:H,reversed:H,rows:I,rowSpan:I,sandbox:ee,scope:null,scoped:H,seamless:H,selected:H,shadowRootClonable:H,shadowRootDelegatesFocus:H,shadowRootMode:null,shape:null,size:I,sizes:null,slot:null,span:I,spellCheck:se,src:null,srcDoc:null,srcLang:null,srcSet:null,start:I,step:null,style:null,tabIndex:I,target:null,title:null,translate:null,type:null,typeMustMatch:H,useMap:null,value:se,width:I,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ee,axis:null,background:null,bgColor:null,border:I,borderColor:null,bottomMargin:I,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:H,declare:H,event:null,face:null,frame:null,frameBorder:null,hSpace:I,leftMargin:I,link:null,longDesc:null,lowSrc:null,marginHeight:I,marginWidth:I,noResize:H,noHref:H,noShade:H,noWrap:H,object:null,profile:null,prompt:null,rev:null,rightMargin:I,rules:null,scheme:null,scrolling:se,standby:null,summary:null,text:null,topMargin:I,valueType:null,version:null,vAlign:null,vLink:null,vSpace:I,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:H,disableRemotePlayback:H,prefix:null,property:null,results:I,security:null,unselectable:null},space:"html",transform:Gr}),Na=Ke({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:me,accentHeight:I,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:I,amplitude:I,arabicForm:null,ascent:I,attributeName:null,attributeType:null,azimuth:I,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:I,by:null,calcMode:null,capHeight:I,className:ee,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:I,diffuseConstant:I,direction:null,display:null,dur:null,divisor:I,dominantBaseline:null,download:H,dx:null,dy:null,edgeMode:null,editable:null,elevation:I,enableBackground:null,end:null,event:null,exponent:I,externalResourcesRequired:null,fill:null,fillOpacity:I,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ve,g2:Ve,glyphName:Ve,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:I,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:I,horizOriginX:I,horizOriginY:I,id:null,ideographic:I,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:I,k:I,k1:I,k2:I,k3:I,k4:I,kernelMatrix:me,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:I,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:I,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:I,overlineThickness:I,paintOrder:null,panose1:null,path:null,pathLength:I,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ee,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:I,pointsAtY:I,pointsAtZ:I,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:me,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:me,rev:me,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:me,requiredFeatures:me,requiredFonts:me,requiredFormats:me,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:I,specularExponent:I,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:I,strikethroughThickness:I,string:null,stroke:null,strokeDashArray:me,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:I,strokeOpacity:I,strokeWidth:null,style:null,surfaceScale:I,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:me,tabIndex:I,tableValues:null,target:null,targetX:I,targetY:I,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:me,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:I,underlineThickness:I,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:I,values:null,vAlphabetic:I,vMathematical:I,vectorEffect:null,vHanging:I,vIdeographic:I,version:null,vertAdvY:I,vertOriginX:I,vertOriginY:I,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:I,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Wr}),Yr=Ke({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Kr=Ke({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Gr}),Jr=Ke({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Aa={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},ja=/[A-Z]/g,Hn=/-[a-z]/g,_a=/^data[-\w.:]+$/i;function Pa(e,t){const n=Kt(t);let r=t,i=pe;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&_a.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Hn,Ra);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Hn.test(s)){let a=s.replace(ja,Ia);a.charAt(0)!=="-"&&(a="-"+a),t="data"+a}}i=fn}return new i(r,t)}function Ia(e){return"-"+e.toLowerCase()}function Ra(e){return e.charAt(1).toUpperCase()}const La=Vr([Qr,Ta,Yr,Kr,Jr],"html"),mn=Vr([Qr,Na,Yr,Kr,Jr],"svg");function Da(e){return e.join(" ").trim()}var $e={},Ot,Vn;function Oa(){if(Vn)return Ot;Vn=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,l=/^\s+|\s+$/g,c=`
`,o="/",u="*",h="",f="comment",p="declaration";Ot=function(w,E){if(typeof w!="string")throw new TypeError("First argument must be a string");if(!w)return[];E=E||{};var v=1,T=1;function A(L){var F=L.match(t);F&&(v+=F.length);var z=L.lastIndexOf(c);T=~z?L.length-z:T+L.length}function D(){var L={line:v,column:T};return function(F){return F.position=new M(L),C(),F}}function M(L){this.start=L,this.end={line:v,column:T},this.source=E.source}M.prototype.content=w;function y(L){var F=new Error(E.source+":"+v+":"+T+": "+L);if(F.reason=L,F.filename=E.source,F.line=v,F.column=T,F.source=w,!E.silent)throw F}function b(L){var F=L.exec(w);if(F){var z=F[0];return A(z),w=w.slice(z.length),F}}function C(){b(n)}function k(L){var F;for(L=L||[];F=_();)F!==!1&&L.push(F);return L}function _(){var L=D();if(!(o!=w.charAt(0)||u!=w.charAt(1))){for(var F=2;h!=w.charAt(F)&&(u!=w.charAt(F)||o!=w.charAt(F+1));)++F;if(F+=2,h===w.charAt(F-1))return y("End of comment missing");var z=w.slice(2,F-2);return T+=2,A(z),w=w.slice(F),T+=2,L({type:f,comment:z})}}function j(){var L=D(),F=b(r);if(F){if(_(),!b(i))return y("property missing ':'");var z=b(s),Z=L({type:p,property:S(F[0].replace(e,h)),value:z?S(z[0].replace(e,h)):h});return b(a),Z}}function P(){var L=[];k(L);for(var F;F=j();)F!==!1&&(L.push(F),k(L));return L}return C(),P()};function S(w){return w?w.replace(l,h):h}return Ot}var Qn;function Ma(){if(Qn)return $e;Qn=1;var e=$e&&$e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($e,"__esModule",{value:!0}),$e.default=n;var t=e(Oa());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var a=(0,t.default)(r),l=typeof i=="function";return a.forEach(function(c){if(c.type==="declaration"){var o=c.property,u=c.value;l?i(o,u,c):u&&(s=s||{},s[o]=u)}}),s}return $e}var rt={},Wn;function Fa(){if(Wn)return rt;Wn=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(o){return!o||n.test(o)||e.test(o)},a=function(o,u){return u.toUpperCase()},l=function(o,u){return"".concat(u,"-")},c=function(o,u){return u===void 0&&(u={}),s(o)?o:(o=o.toLowerCase(),u.reactCompat?o=o.replace(i,l):o=o.replace(r,l),o.replace(t,a))};return rt.camelCase=c,rt}var it,Gn;function qa(){if(Gn)return it;Gn=1;var e=it&&it.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(Ma()),n=Fa();function r(i,s){var a={};return!i||typeof i!="string"||(0,t.default)(i,function(l,c){l&&c&&(a[(0,n.camelCase)(l,s)]=c)}),a}return r.default=r,it=r,it}var za=qa();const Ba=Cr(za),Xr=Zr("end"),gn=Zr("start");function Zr(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function $a(e){const t=gn(e),n=Xr(e);if(t&&n)return{start:t,end:n}}function lt(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Yn(e.position):"start"in e||"end"in e?Yn(e):"line"in e||"column"in e?Zt(e):""}function Zt(e){return Kn(e&&e.line)+":"+Kn(e&&e.column)}function Yn(e){return Zt(e&&e.start)+"-"+Zt(e&&e.end)}function Kn(e){return e&&typeof e=="number"?e:1}class ue extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(a=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?s.ruleId=r:(s.source=r.slice(0,c),s.ruleId=r.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=l?l.line:void 0,this.name=lt(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ue.prototype.file="";ue.prototype.name="";ue.prototype.reason="";ue.prototype.message="";ue.prototype.stack="";ue.prototype.column=void 0;ue.prototype.line=void 0;ue.prototype.ancestors=void 0;ue.prototype.cause=void 0;ue.prototype.fatal=void 0;ue.prototype.place=void 0;ue.prototype.ruleId=void 0;ue.prototype.source=void 0;const yn={}.hasOwnProperty,Ua=new Map,Ha=/[A-Z]/g,Va=new Set(["table","tbody","thead","tfoot","tr"]),Qa=new Set(["td","th"]),ei="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Wa(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=tl(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=el(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?mn:La,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=ti(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function ti(e,t,n){if(t.type==="element")return Ga(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Ya(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Ja(e,t,n);if(t.type==="mdxjsEsm")return Ka(e,t);if(t.type==="root")return Xa(e,t,n);if(t.type==="text")return Za(e,t)}function Ga(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=mn,e.schema=i),e.ancestors.push(t);const s=ri(e,t.tagName,!1),a=nl(e,t);let l=bn(e,t);return Va.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!Ea(c):!0})),ni(e,a,s,t),xn(a,l),e.ancestors.pop(),e.schema=r,e.create(t,s,a,n)}function Ya(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}dt(e,t.position)}function Ka(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);dt(e,t.position)}function Ja(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=mn,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:ri(e,t.name,!0),a=rl(e,t),l=bn(e,t);return ni(e,a,s,t),xn(a,l),e.ancestors.pop(),e.schema=r,e.create(t,s,a,n)}function Xa(e,t,n){const r={};return xn(r,bn(e,t)),e.create(t,e.Fragment,r,n)}function Za(e,t){return t.value}function ni(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function xn(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function el(e,t,n){return r;function r(i,s,a,l){const o=Array.isArray(a.children)?n:t;return l?o(s,a,l):o(s,a)}}function tl(e,t){return n;function n(r,i,s,a){const l=Array.isArray(s.children),c=gn(r);return t(i,s,a,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function nl(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&yn.call(t.properties,i)){const s=il(e,i,t.properties[i]);if(s){const[a,l]=s;e.tableCellAlignToStyle&&a==="align"&&typeof l=="string"&&Qa.has(t.tagName)?r=l:n[a]=l}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function rl(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const a=s.expression;a.type;const l=a.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else dt(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,s=e.evaluater.evaluateExpression(l.expression)}else dt(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function bn(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:Ua;for(;++r<t.children.length;){const s=t.children[r];let a;if(e.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const o=i.get(c)||0;a=c+"-"+o,i.set(c,o+1)}}const l=ti(e,s,a);l!==void 0&&n.push(l)}return n}function il(e,t,n){const r=Pa(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?ba(n):Da(n)),r.property==="style"){let i=typeof n=="object"?n:sl(e,String(n));return e.stylePropertyNameCase==="css"&&(i=al(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?Aa[r.property]||r.property:r.attribute,n]}}function sl(e,t){try{return Ba(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new ue("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=ei+"#cannot-parse-style-attribute",i}}function ri(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,a;for(;++s<i.length;){const l=Bn(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};a=a?{type:"MemberExpression",object:a,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}r=a}else r=Bn(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return yn.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);dt(e)}function dt(e,t){const n=new ue("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=ei+"#cannot-handle-mdx-estrees-without-createevaluater",n}function al(e){const t={};let n;for(n in e)yn.call(e,n)&&(t[ll(n)]=e[n]);return t}function ll(e){let t=e.replace(Ha,ol);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function ol(e){return"-"+e.toLowerCase()}const Mt={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},cl={};function ul(e,t){const n=cl,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return ii(e,r,i)}function ii(e,t,n){if(dl(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Jn(e.children,t,n)}return Array.isArray(e)?Jn(e,t,n):""}function Jn(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=ii(e[i],t,n);return r.join("")}function dl(e){return!!(e&&typeof e=="object")}const Xn=document.createElement("i");function vn(e){const t="&"+e+";";Xn.innerHTML=t;const n=Xn.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Te(e,t,n,r){const i=e.length;let s=0,a;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(t,n),e.splice(...a);else for(n&&e.splice(t,n);s<r.length;)a=r.slice(s,s+1e4),a.unshift(t,0),e.splice(...a),s+=1e4,t+=1e4}function ye(e,t){return e.length>0?(Te(e,e.length,0,t),e):t}const Zn={}.hasOwnProperty;function hl(e){const t={};let n=-1;for(;++n<e.length;)pl(t,e[n]);return t}function pl(e,t){let n;for(n in t){const i=(Zn.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let a;if(s)for(a in s){Zn.call(i,a)||(i[a]=[]);const l=s[a];fl(i[a],Array.isArray(l)?l:l?[l]:[])}}}function fl(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Te(e,0,0,r)}function si(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"ï¿½":String.fromCodePoint(n)}function Qe(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ce=Me(/[A-Za-z]/),ge=Me(/[\dA-Za-z]/),ml=Me(/[#-'*+\--9=?A-Z^-~]/);function en(e){return e!==null&&(e<32||e===127)}const tn=Me(/\d/),gl=Me(/[\dA-Fa-f]/),yl=Me(/[!-/:-@[-`{-~]/);function $(e){return e!==null&&e<-2}function he(e){return e!==null&&(e<0||e===32)}function Y(e){return e===-2||e===-1||e===32}const xl=Me(new RegExp("\\p{P}|\\p{S}","u")),bl=Me(/\s/);function Me(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Je(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let a="";if(s===37&&ge(e.charCodeAt(n+1))&&ge(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const l=e.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(a=String.fromCharCode(s,l),i=1):a="ï¿½"}else a=String.fromCharCode(s);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function te(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(c){return Y(c)?(e.enter(n),l(c)):t(c)}function l(c){return Y(c)&&s++<i?(e.consume(c),l):(e.exit(n),t(c))}}const vl={tokenize:wl};function wl(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),te(e,t,"linePrefix")}function i(l){return e.enter("paragraph"),s(l)}function s(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,a(l)}function a(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return $(l)?(e.consume(l),e.exit("chunkText"),s):(e.consume(l),a)}}const kl={tokenize:Sl},er={tokenize:El};function Sl(e){const t=this,n=[];let r=0,i,s,a;return l;function l(A){if(r<n.length){const D=n[r];return t.containerState=D[1],e.attempt(D[0].continuation,c,o)(A)}return o(A)}function c(A){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&T();const D=t.events.length;let M=D,y;for(;M--;)if(t.events[M][0]==="exit"&&t.events[M][1].type==="chunkFlow"){y=t.events[M][1].end;break}v(r);let b=D;for(;b<t.events.length;)t.events[b][1].end={...y},b++;return Te(t.events,M+1,0,t.events.slice(D)),t.events.length=b,o(A)}return l(A)}function o(A){if(r===n.length){if(!i)return f(A);if(i.currentConstruct&&i.currentConstruct.concrete)return S(A);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(er,u,h)(A)}function u(A){return i&&T(),v(r),f(A)}function h(A){return t.parser.lazy[t.now().line]=r!==n.length,a=t.now().offset,S(A)}function f(A){return t.containerState={},e.attempt(er,p,S)(A)}function p(A){return r++,n.push([t.currentConstruct,t.containerState]),f(A)}function S(A){if(A===null){i&&T(),v(0),e.consume(A);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),w(A)}function w(A){if(A===null){E(e.exit("chunkFlow"),!0),v(0),e.consume(A);return}return $(A)?(e.consume(A),E(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(A),w)}function E(A,D){const M=t.sliceStream(A);if(D&&M.push(null),A.previous=s,s&&(s.next=A),s=A,i.defineSkip(A.start),i.write(M),t.parser.lazy[A.start.line]){let y=i.events.length;for(;y--;)if(i.events[y][1].start.offset<a&&(!i.events[y][1].end||i.events[y][1].end.offset>a))return;const b=t.events.length;let C=b,k,_;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(k){_=t.events[C][1].end;break}k=!0}for(v(r),y=b;y<t.events.length;)t.events[y][1].end={..._},y++;Te(t.events,C+1,0,t.events.slice(b)),t.events.length=y}}function v(A){let D=n.length;for(;D-- >A;){const M=n[D];t.containerState=M[1],M[0].exit.call(t,e)}n.length=A}function T(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function El(e,t,n){return te(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function tr(e){if(e===null||he(e)||bl(e))return 1;if(xl(e))return 2}function wn(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const nn={name:"attention",resolveAll:Cl,tokenize:Tl};function Cl(e,t){let n=-1,r,i,s,a,l,c,o,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},f={...e[n][1].start};nr(h,-c),nr(f,c),a={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:f},s={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},e[r][1].end={...a.start},e[n][1].start={...l.end},o=[],e[r][1].end.offset-e[r][1].start.offset&&(o=ye(o,[["enter",e[r][1],t],["exit",e[r][1],t]])),o=ye(o,[["enter",i,t],["enter",a,t],["exit",a,t],["enter",s,t]]),o=ye(o,wn(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),o=ye(o,[["exit",s,t],["enter",l,t],["exit",l,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,o=ye(o,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,Te(e,r-1,n-r+3,o),n=r+o.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Tl(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=tr(r);let s;return a;function a(c){return s=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===s)return e.consume(c),l;const o=e.exit("attentionSequence"),u=tr(c),h=!u||u===2&&i||n.includes(c),f=!i||i===2&&u||n.includes(r);return o._open=!!(s===42?h:h&&(i||!f)),o._close=!!(s===42?f:f&&(u||!h)),t(c)}}function nr(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Nl={name:"autolink",tokenize:Al};function Al(e,t,n){let r=0;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(p){return Ce(p)?(e.consume(p),a):p===64?n(p):o(p)}function a(p){return p===43||p===45||p===46||ge(p)?(r=1,l(p)):o(p)}function l(p){return p===58?(e.consume(p),r=0,c):(p===43||p===45||p===46||ge(p))&&r++<32?(e.consume(p),l):(r=0,o(p))}function c(p){return p===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):p===null||p===32||p===60||en(p)?n(p):(e.consume(p),c)}function o(p){return p===64?(e.consume(p),u):ml(p)?(e.consume(p),o):n(p)}function u(p){return ge(p)?h(p):n(p)}function h(p){return p===46?(e.consume(p),r=0,u):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):f(p)}function f(p){if((p===45||ge(p))&&r++<63){const S=p===45?f:h;return e.consume(p),S}return n(p)}}const At={partial:!0,tokenize:jl};function jl(e,t,n){return r;function r(s){return Y(s)?te(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||$(s)?t(s):n(s)}}const ai={continuation:{tokenize:Pl},exit:Il,name:"blockQuote",tokenize:_l};function _l(e,t,n){const r=this;return i;function i(a){if(a===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(a),e.exit("blockQuoteMarker"),s}return n(a)}function s(a){return Y(a)?(e.enter("blockQuotePrefixWhitespace"),e.consume(a),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(a))}}function Pl(e,t,n){const r=this;return i;function i(a){return Y(a)?te(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return e.attempt(ai,t,n)(a)}}function Il(e){e.exit("blockQuote")}const li={name:"characterEscape",tokenize:Rl};function Rl(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return yl(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const oi={name:"characterReference",tokenize:Ll};function Ll(e,t,n){const r=this;let i=0,s,a;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),c}function c(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),o):(e.enter("characterReferenceValue"),s=31,a=ge,u(h))}function o(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,a=gl,u):(e.enter("characterReferenceValue"),s=7,a=tn,u(h))}function u(h){if(h===59&&i){const f=e.exit("characterReferenceValue");return a===ge&&!vn(r.sliceSerialize(f))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return a(h)&&i++<s?(e.consume(h),u):n(h)}}const rr={partial:!0,tokenize:Ol},ir={concrete:!0,name:"codeFenced",tokenize:Dl};function Dl(e,t,n){const r=this,i={partial:!0,tokenize:M};let s=0,a=0,l;return c;function c(y){return o(y)}function o(y){const b=r.events[r.events.length-1];return s=b&&b[1].type==="linePrefix"?b[2].sliceSerialize(b[1],!0).length:0,l=y,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(y)}function u(y){return y===l?(a++,e.consume(y),u):a<3?n(y):(e.exit("codeFencedFenceSequence"),Y(y)?te(e,h,"whitespace")(y):h(y))}function h(y){return y===null||$(y)?(e.exit("codeFencedFence"),r.interrupt?t(y):e.check(rr,w,D)(y)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(y))}function f(y){return y===null||$(y)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(y)):Y(y)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),te(e,p,"whitespace")(y)):y===96&&y===l?n(y):(e.consume(y),f)}function p(y){return y===null||$(y)?h(y):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),S(y))}function S(y){return y===null||$(y)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(y)):y===96&&y===l?n(y):(e.consume(y),S)}function w(y){return e.attempt(i,D,E)(y)}function E(y){return e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),v}function v(y){return s>0&&Y(y)?te(e,T,"linePrefix",s+1)(y):T(y)}function T(y){return y===null||$(y)?e.check(rr,w,D)(y):(e.enter("codeFlowValue"),A(y))}function A(y){return y===null||$(y)?(e.exit("codeFlowValue"),T(y)):(e.consume(y),A)}function D(y){return e.exit("codeFenced"),t(y)}function M(y,b,C){let k=0;return _;function _(z){return y.enter("lineEnding"),y.consume(z),y.exit("lineEnding"),j}function j(z){return y.enter("codeFencedFence"),Y(z)?te(y,P,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):P(z)}function P(z){return z===l?(y.enter("codeFencedFenceSequence"),L(z)):C(z)}function L(z){return z===l?(k++,y.consume(z),L):k>=a?(y.exit("codeFencedFenceSequence"),Y(z)?te(y,F,"whitespace")(z):F(z)):C(z)}function F(z){return z===null||$(z)?(y.exit("codeFencedFence"),b(z)):C(z)}}}function Ol(e,t,n){const r=this;return i;function i(a){return a===null?n(a):(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}const Ft={name:"codeIndented",tokenize:Fl},Ml={partial:!0,tokenize:ql};function Fl(e,t,n){const r=this;return i;function i(o){return e.enter("codeIndented"),te(e,s,"linePrefix",5)(o)}function s(o){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?a(o):n(o)}function a(o){return o===null?c(o):$(o)?e.attempt(Ml,a,c)(o):(e.enter("codeFlowValue"),l(o))}function l(o){return o===null||$(o)?(e.exit("codeFlowValue"),a(o)):(e.consume(o),l)}function c(o){return e.exit("codeIndented"),t(o)}}function ql(e,t,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):$(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),i):te(e,s,"linePrefix",5)(a)}function s(a){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(a):$(a)?i(a):n(a)}}const zl={name:"codeText",previous:$l,resolve:Bl,tokenize:Ul};function Bl(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function $l(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Ul(e,t,n){let r=0,i,s;return a;function a(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),r++,l):(e.exit("codeTextSequence"),c(h))}function c(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),c):h===96?(s=e.enter("codeTextSequence"),i=0,u(h)):$(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("codeTextData"),o(h))}function o(h){return h===null||h===32||h===96||$(h)?(e.exit("codeTextData"),c(h)):(e.consume(h),o)}function u(h){return h===96?(e.consume(h),i++,u):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(s.type="codeTextData",o(h))}}class Hl{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&st(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),st(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),st(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);st(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);st(this.left,n.reverse())}}}function st(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function ci(e){const t={};let n=-1,r,i,s,a,l,c,o;const u=new Hl(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Vl(u,n)),n=t[n],o=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(a=u.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},l=u.slice(i,n),l.unshift(r),u.splice(i,n-i+1,l))}}return Te(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!o}function Vl(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,c=[],o={};let u,h,f=-1,p=n,S=0,w=0;const E=[w];for(;p;){for(;e.get(++i)[1]!==p;);s.push(i),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),h&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(u),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=n;++f<l.length;)l[f][0]==="exit"&&l[f-1][0]==="enter"&&l[f][1].type===l[f-1][1].type&&l[f][1].start.line!==l[f][1].end.line&&(w=f+1,E.push(w),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):E.pop(),f=E.length;f--;){const v=l.slice(E[f],E[f+1]),T=s.pop();c.push([T,T+v.length-1]),e.splice(T,2,v)}for(c.reverse(),f=-1;++f<c.length;)o[S+c[f][0]]=S+c[f][1],S+=c[f][1]-c[f][0]-1;return o}const Ql={resolve:Gl,tokenize:Yl},Wl={partial:!0,tokenize:Kl};function Gl(e){return ci(e),e}function Yl(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?s(l):$(l)?e.check(Wl,a,s)(l):(e.consume(l),i)}function s(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function a(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Kl(e,t,n){const r=this;return i;function i(a){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),te(e,s,"linePrefix")}function s(a){if(a===null||$(a))return n(a);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(a):e.interrupt(r.parser.constructs.flow,n,t)(a)}}function ui(e,t,n,r,i,s,a,l,c){const o=c||Number.POSITIVE_INFINITY;let u=0;return h;function h(v){return v===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(v),e.exit(s),f):v===null||v===32||v===41||en(v)?n(v):(e.enter(r),e.enter(a),e.enter(l),e.enter("chunkString",{contentType:"string"}),w(v))}function f(v){return v===62?(e.enter(s),e.consume(v),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),p(v))}function p(v){return v===62?(e.exit("chunkString"),e.exit(l),f(v)):v===null||v===60||$(v)?n(v):(e.consume(v),v===92?S:p)}function S(v){return v===60||v===62||v===92?(e.consume(v),p):p(v)}function w(v){return!u&&(v===null||v===41||he(v))?(e.exit("chunkString"),e.exit(l),e.exit(a),e.exit(r),t(v)):u<o&&v===40?(e.consume(v),u++,w):v===41?(e.consume(v),u--,w):v===null||v===32||v===40||en(v)?n(v):(e.consume(v),v===92?E:w)}function E(v){return v===40||v===41||v===92?(e.consume(v),w):w(v)}}function di(e,t,n,r,i,s){const a=this;let l=0,c;return o;function o(p){return e.enter(r),e.enter(i),e.consume(p),e.exit(i),e.enter(s),u}function u(p){return l>999||p===null||p===91||p===93&&!c||p===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(p):p===93?(e.exit(s),e.enter(i),e.consume(p),e.exit(i),e.exit(r),t):$(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===null||p===91||p===93||$(p)||l++>999?(e.exit("chunkString"),u(p)):(e.consume(p),c||(c=!Y(p)),p===92?f:h)}function f(p){return p===91||p===92||p===93?(e.consume(p),l++,h):h(p)}}function hi(e,t,n,r,i,s){let a;return l;function l(f){return f===34||f===39||f===40?(e.enter(r),e.enter(i),e.consume(f),e.exit(i),a=f===40?41:f,c):n(f)}function c(f){return f===a?(e.enter(i),e.consume(f),e.exit(i),e.exit(r),t):(e.enter(s),o(f))}function o(f){return f===a?(e.exit(s),c(a)):f===null?n(f):$(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),te(e,o,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===a||f===null||$(f)?(e.exit("chunkString"),o(f)):(e.consume(f),f===92?h:u)}function h(f){return f===a||f===92?(e.consume(f),u):u(f)}}function ot(e,t){let n;return r;function r(i){return $(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Y(i)?te(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Jl={name:"definition",tokenize:Zl},Xl={partial:!0,tokenize:eo};function Zl(e,t,n){const r=this;let i;return s;function s(p){return e.enter("definition"),a(p)}function a(p){return di.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function l(p){return i=Qe(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),c):n(p)}function c(p){return he(p)?ot(e,o)(p):o(p)}function o(p){return ui(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return e.attempt(Xl,h,h)(p)}function h(p){return Y(p)?te(e,f,"whitespace")(p):f(p)}function f(p){return p===null||$(p)?(e.exit("definition"),r.parser.defined.push(i),t(p)):n(p)}}function eo(e,t,n){return r;function r(l){return he(l)?ot(e,i)(l):n(l)}function i(l){return hi(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return Y(l)?te(e,a,"whitespace")(l):a(l)}function a(l){return l===null||$(l)?t(l):n(l)}}const to={name:"hardBreakEscape",tokenize:no};function no(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return $(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const ro={name:"headingAtx",resolve:io,tokenize:so};function io(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Te(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function so(e,t,n){let r=0;return i;function i(u){return e.enter("atxHeading"),s(u)}function s(u){return e.enter("atxHeadingSequence"),a(u)}function a(u){return u===35&&r++<6?(e.consume(u),a):u===null||he(u)?(e.exit("atxHeadingSequence"),l(u)):n(u)}function l(u){return u===35?(e.enter("atxHeadingSequence"),c(u)):u===null||$(u)?(e.exit("atxHeading"),t(u)):Y(u)?te(e,l,"whitespace")(u):(e.enter("atxHeadingText"),o(u))}function c(u){return u===35?(e.consume(u),c):(e.exit("atxHeadingSequence"),l(u))}function o(u){return u===null||u===35||he(u)?(e.exit("atxHeadingText"),l(u)):(e.consume(u),o)}}const ao=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],sr=["pre","script","style","textarea"],lo={concrete:!0,name:"htmlFlow",resolveTo:uo,tokenize:ho},oo={partial:!0,tokenize:fo},co={partial:!0,tokenize:po};function uo(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function ho(e,t,n){const r=this;let i,s,a,l,c;return o;function o(m){return u(m)}function u(m){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(m),h}function h(m){return m===33?(e.consume(m),f):m===47?(e.consume(m),s=!0,w):m===63?(e.consume(m),i=3,r.interrupt?t:g):Ce(m)?(e.consume(m),a=String.fromCharCode(m),E):n(m)}function f(m){return m===45?(e.consume(m),i=2,p):m===91?(e.consume(m),i=5,l=0,S):Ce(m)?(e.consume(m),i=4,r.interrupt?t:g):n(m)}function p(m){return m===45?(e.consume(m),r.interrupt?t:g):n(m)}function S(m){const B="CDATA[";return m===B.charCodeAt(l++)?(e.consume(m),l===B.length?r.interrupt?t:P:S):n(m)}function w(m){return Ce(m)?(e.consume(m),a=String.fromCharCode(m),E):n(m)}function E(m){if(m===null||m===47||m===62||he(m)){const B=m===47,V=a.toLowerCase();return!B&&!s&&sr.includes(V)?(i=1,r.interrupt?t(m):P(m)):ao.includes(a.toLowerCase())?(i=6,B?(e.consume(m),v):r.interrupt?t(m):P(m)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(m):s?T(m):A(m))}return m===45||ge(m)?(e.consume(m),a+=String.fromCharCode(m),E):n(m)}function v(m){return m===62?(e.consume(m),r.interrupt?t:P):n(m)}function T(m){return Y(m)?(e.consume(m),T):_(m)}function A(m){return m===47?(e.consume(m),_):m===58||m===95||Ce(m)?(e.consume(m),D):Y(m)?(e.consume(m),A):_(m)}function D(m){return m===45||m===46||m===58||m===95||ge(m)?(e.consume(m),D):M(m)}function M(m){return m===61?(e.consume(m),y):Y(m)?(e.consume(m),M):A(m)}function y(m){return m===null||m===60||m===61||m===62||m===96?n(m):m===34||m===39?(e.consume(m),c=m,b):Y(m)?(e.consume(m),y):C(m)}function b(m){return m===c?(e.consume(m),c=null,k):m===null||$(m)?n(m):(e.consume(m),b)}function C(m){return m===null||m===34||m===39||m===47||m===60||m===61||m===62||m===96||he(m)?M(m):(e.consume(m),C)}function k(m){return m===47||m===62||Y(m)?A(m):n(m)}function _(m){return m===62?(e.consume(m),j):n(m)}function j(m){return m===null||$(m)?P(m):Y(m)?(e.consume(m),j):n(m)}function P(m){return m===45&&i===2?(e.consume(m),Z):m===60&&i===1?(e.consume(m),ne):m===62&&i===4?(e.consume(m),K):m===63&&i===3?(e.consume(m),g):m===93&&i===5?(e.consume(m),q):$(m)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(oo,oe,L)(m)):m===null||$(m)?(e.exit("htmlFlowData"),L(m)):(e.consume(m),P)}function L(m){return e.check(co,F,oe)(m)}function F(m){return e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),z}function z(m){return m===null||$(m)?L(m):(e.enter("htmlFlowData"),P(m))}function Z(m){return m===45?(e.consume(m),g):P(m)}function ne(m){return m===47?(e.consume(m),a="",O):P(m)}function O(m){if(m===62){const B=a.toLowerCase();return sr.includes(B)?(e.consume(m),K):P(m)}return Ce(m)&&a.length<8?(e.consume(m),a+=String.fromCharCode(m),O):P(m)}function q(m){return m===93?(e.consume(m),g):P(m)}function g(m){return m===62?(e.consume(m),K):m===45&&i===2?(e.consume(m),g):P(m)}function K(m){return m===null||$(m)?(e.exit("htmlFlowData"),oe(m)):(e.consume(m),K)}function oe(m){return e.exit("htmlFlow"),t(m)}}function po(e,t,n){const r=this;return i;function i(a){return $(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),s):n(a)}function s(a){return r.parser.lazy[r.now().line]?n(a):t(a)}}function fo(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(At,t,n)}}const mo={name:"htmlText",tokenize:go};function go(e,t,n){const r=this;let i,s,a;return l;function l(g){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(g),c}function c(g){return g===33?(e.consume(g),o):g===47?(e.consume(g),M):g===63?(e.consume(g),A):Ce(g)?(e.consume(g),C):n(g)}function o(g){return g===45?(e.consume(g),u):g===91?(e.consume(g),s=0,S):Ce(g)?(e.consume(g),T):n(g)}function u(g){return g===45?(e.consume(g),p):n(g)}function h(g){return g===null?n(g):g===45?(e.consume(g),f):$(g)?(a=h,ne(g)):(e.consume(g),h)}function f(g){return g===45?(e.consume(g),p):h(g)}function p(g){return g===62?Z(g):g===45?f(g):h(g)}function S(g){const K="CDATA[";return g===K.charCodeAt(s++)?(e.consume(g),s===K.length?w:S):n(g)}function w(g){return g===null?n(g):g===93?(e.consume(g),E):$(g)?(a=w,ne(g)):(e.consume(g),w)}function E(g){return g===93?(e.consume(g),v):w(g)}function v(g){return g===62?Z(g):g===93?(e.consume(g),v):w(g)}function T(g){return g===null||g===62?Z(g):$(g)?(a=T,ne(g)):(e.consume(g),T)}function A(g){return g===null?n(g):g===63?(e.consume(g),D):$(g)?(a=A,ne(g)):(e.consume(g),A)}function D(g){return g===62?Z(g):A(g)}function M(g){return Ce(g)?(e.consume(g),y):n(g)}function y(g){return g===45||ge(g)?(e.consume(g),y):b(g)}function b(g){return $(g)?(a=b,ne(g)):Y(g)?(e.consume(g),b):Z(g)}function C(g){return g===45||ge(g)?(e.consume(g),C):g===47||g===62||he(g)?k(g):n(g)}function k(g){return g===47?(e.consume(g),Z):g===58||g===95||Ce(g)?(e.consume(g),_):$(g)?(a=k,ne(g)):Y(g)?(e.consume(g),k):Z(g)}function _(g){return g===45||g===46||g===58||g===95||ge(g)?(e.consume(g),_):j(g)}function j(g){return g===61?(e.consume(g),P):$(g)?(a=j,ne(g)):Y(g)?(e.consume(g),j):k(g)}function P(g){return g===null||g===60||g===61||g===62||g===96?n(g):g===34||g===39?(e.consume(g),i=g,L):$(g)?(a=P,ne(g)):Y(g)?(e.consume(g),P):(e.consume(g),F)}function L(g){return g===i?(e.consume(g),i=void 0,z):g===null?n(g):$(g)?(a=L,ne(g)):(e.consume(g),L)}function F(g){return g===null||g===34||g===39||g===60||g===61||g===96?n(g):g===47||g===62||he(g)?k(g):(e.consume(g),F)}function z(g){return g===47||g===62||he(g)?k(g):n(g)}function Z(g){return g===62?(e.consume(g),e.exit("htmlTextData"),e.exit("htmlText"),t):n(g)}function ne(g){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),O}function O(g){return Y(g)?te(e,q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(g):q(g)}function q(g){return e.enter("htmlTextData"),a(g)}}const kn={name:"labelEnd",resolveAll:vo,resolveTo:wo,tokenize:ko},yo={tokenize:So},xo={tokenize:Eo},bo={tokenize:Co};function vo(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&Te(e,0,e.length,n),e}function wo(e,t){let n=e.length,r=0,i,s,a,l;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const c={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},o={type:"label",start:{...e[s][1].start},end:{...e[a][1].end}},u={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[a-2][1].start}};return l=[["enter",c,t],["enter",o,t]],l=ye(l,e.slice(s+1,s+r+3)),l=ye(l,[["enter",u,t]]),l=ye(l,wn(t.parser.constructs.insideSpan.null,e.slice(s+r+4,a-3),t)),l=ye(l,[["exit",u,t],e[a-2],e[a-1],["exit",o,t]]),l=ye(l,e.slice(a+1)),l=ye(l,[["exit",c,t]]),Te(e,s,e.length,l),e}function ko(e,t,n){const r=this;let i=r.events.length,s,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return l;function l(f){return s?s._inactive?h(f):(a=r.parser.defined.includes(Qe(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),c):n(f)}function c(f){return f===40?e.attempt(yo,u,a?u:h)(f):f===91?e.attempt(xo,u,a?o:h)(f):a?u(f):h(f)}function o(f){return e.attempt(bo,u,h)(f)}function u(f){return t(f)}function h(f){return s._balanced=!0,n(f)}}function So(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),i}function i(h){return he(h)?ot(e,s)(h):s(h)}function s(h){return h===41?u(h):ui(e,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function a(h){return he(h)?ot(e,c)(h):u(h)}function l(h){return n(h)}function c(h){return h===34||h===39||h===40?hi(e,o,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function o(h){return he(h)?ot(e,u)(h):u(h)}function u(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function Eo(e,t,n){const r=this;return i;function i(l){return di.call(r,e,s,a,"reference","referenceMarker","referenceString")(l)}function s(l){return r.parser.defined.includes(Qe(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function a(l){return n(l)}}function Co(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const To={name:"labelStartImage",resolveAll:kn.resolveAll,tokenize:No};function No(e,t,n){const r=this;return i;function i(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),s}function s(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),a):n(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const Ao={name:"labelStartLink",resolveAll:kn.resolveAll,tokenize:jo};function jo(e,t,n){const r=this;return i;function i(a){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const qt={name:"lineEnding",tokenize:_o};function _o(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),te(e,t,"linePrefix")}}const kt={name:"thematicBreak",tokenize:Po};function Po(e,t,n){let r=0,i;return s;function s(o){return e.enter("thematicBreak"),a(o)}function a(o){return i=o,l(o)}function l(o){return o===i?(e.enter("thematicBreakSequence"),c(o)):r>=3&&(o===null||$(o))?(e.exit("thematicBreak"),t(o)):n(o)}function c(o){return o===i?(e.consume(o),r++,c):(e.exit("thematicBreakSequence"),Y(o)?te(e,l,"whitespace")(o):l(o))}}const de={continuation:{tokenize:Do},exit:Mo,name:"list",tokenize:Lo},Io={partial:!0,tokenize:Fo},Ro={partial:!0,tokenize:Oo};function Lo(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return l;function l(p){const S=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(S==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:tn(p)){if(r.containerState.type||(r.containerState.type=S,e.enter(S,{_container:!0})),S==="listUnordered")return e.enter("listItemPrefix"),p===42||p===45?e.check(kt,n,o)(p):o(p);if(!r.interrupt||p===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(p)}return n(p)}function c(p){return tn(p)&&++a<10?(e.consume(p),c):(!r.interrupt||a<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(e.exit("listItemValue"),o(p)):n(p)}function o(p){return e.enter("listItemMarker"),e.consume(p),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,e.check(At,r.interrupt?n:u,e.attempt(Io,f,h))}function u(p){return r.containerState.initialBlankLine=!0,s++,f(p)}function h(p){return Y(p)?(e.enter("listItemPrefixWhitespace"),e.consume(p),e.exit("listItemPrefixWhitespace"),f):n(p)}function f(p){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(p)}}function Do(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(At,i,s);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,te(e,t,"listItemIndent",r.containerState.size+1)(l)}function s(l){return r.containerState.furtherBlankLines||!Y(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Ro,t,a)(l))}function a(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,te(e,e.attempt(de,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function Oo(e,t,n){const r=this;return te(e,i,"listItemIndent",r.containerState.size+1);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?t(s):n(s)}}function Mo(e){e.exit(this.containerState.type)}function Fo(e,t,n){const r=this;return te(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const a=r.events[r.events.length-1];return!Y(s)&&a&&a[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const ar={name:"setextUnderline",resolveTo:qo,tokenize:zo};function qo(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const a={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",a,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=a,e.push(["exit",a,t]),e}function zo(e,t,n){const r=this;let i;return s;function s(o){let u=r.events.length,h;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){h=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),i=o,a(o)):n(o)}function a(o){return e.enter("setextHeadingLineSequence"),l(o)}function l(o){return o===i?(e.consume(o),l):(e.exit("setextHeadingLineSequence"),Y(o)?te(e,c,"lineSuffix")(o):c(o))}function c(o){return o===null||$(o)?(e.exit("setextHeadingLine"),t(o)):n(o)}}const Bo={tokenize:$o};function $o(e){const t=this,n=e.attempt(At,r,e.attempt(this.parser.constructs.flowInitial,i,te(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Ql,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Uo={resolveAll:fi()},Ho=pi("string"),Vo=pi("text");function pi(e){return{resolveAll:fi(e==="text"?Qo:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,a,l);return a;function a(u){return o(u)?s(u):l(u)}function l(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),c}function c(u){return o(u)?(n.exit("data"),s(u)):(n.consume(u),c)}function o(u){if(u===null)return!0;const h=i[u];let f=-1;if(h)for(;++f<h.length;){const p=h[f];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function fi(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Qo(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,a=-1,l=0,c;for(;s--;){const o=i[s];if(typeof o=="string"){for(a=o.length;o.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(o===-2)c=!0,l++;else if(o!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const o={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:r.start._bufferIndex+a,_index:r.start._index+s,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...o.start},r.start.offset===r.end.offset?Object.assign(r,o):(e.splice(n,0,["enter",o,t],["exit",o,t]),n+=2)}n++}return e}const Wo={42:de,43:de,45:de,48:de,49:de,50:de,51:de,52:de,53:de,54:de,55:de,56:de,57:de,62:ai},Go={91:Jl},Yo={[-2]:Ft,[-1]:Ft,32:Ft},Ko={35:ro,42:kt,45:[ar,kt],60:lo,61:ar,95:kt,96:ir,126:ir},Jo={38:oi,92:li},Xo={[-5]:qt,[-4]:qt,[-3]:qt,33:To,38:oi,42:nn,60:[Nl,mo],91:Ao,92:[to,li],93:kn,95:nn,96:zl},Zo={null:[nn,Uo]},ec={null:[42,95]},tc={null:[]},nc=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:ec,contentInitial:Go,disable:tc,document:Wo,flow:Ko,flowInitial:Yo,insideSpan:Zo,string:Jo,text:Xo},Symbol.toStringTag,{value:"Module"}));function rc(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let a=[],l=[];const c={attempt:b(M),check:b(y),consume:T,enter:A,exit:D,interrupt:b(y,{interrupt:!0})},o={code:null,containerState:{},defineSkip:w,events:[],now:S,parser:e,previous:null,sliceSerialize:f,sliceStream:p,write:h};let u=t.tokenize.call(o,c);return t.resolveAll&&s.push(t),o;function h(j){return a=ye(a,j),E(),a[a.length-1]!==null?[]:(C(t,0),o.events=wn(s,o.events,o),o.events)}function f(j,P){return sc(p(j),P)}function p(j){return ic(a,j)}function S(){const{_bufferIndex:j,_index:P,line:L,column:F,offset:z}=r;return{_bufferIndex:j,_index:P,line:L,column:F,offset:z}}function w(j){i[j.line]=j.column,_()}function E(){let j;for(;r._index<a.length;){const P=a[r._index];if(typeof P=="string")for(j=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===j&&r._bufferIndex<P.length;)v(P.charCodeAt(r._bufferIndex));else v(P)}}function v(j){u=u(j)}function T(j){$(j)?(r.line++,r.column=1,r.offset+=j===-3?2:1,_()):j!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),o.previous=j}function A(j,P){const L=P||{};return L.type=j,L.start=S(),o.events.push(["enter",L,o]),l.push(L),L}function D(j){const P=l.pop();return P.end=S(),o.events.push(["exit",P,o]),P}function M(j,P){C(j,P.from)}function y(j,P){P.restore()}function b(j,P){return L;function L(F,z,Z){let ne,O,q,g;return Array.isArray(F)?oe(F):"tokenize"in F?oe([F]):K(F);function K(W){return ie;function ie(ae){const ce=ae!==null&&W[ae],J=ae!==null&&W.null,le=[...Array.isArray(ce)?ce:ce?[ce]:[],...Array.isArray(J)?J:J?[J]:[]];return oe(le)(ae)}}function oe(W){return ne=W,O=0,W.length===0?Z:m(W[O])}function m(W){return ie;function ie(ae){return g=k(),q=W,W.partial||(o.currentConstruct=W),W.name&&o.parser.constructs.disable.null.includes(W.name)?V():W.tokenize.call(P?Object.assign(Object.create(o),P):o,c,B,V)(ae)}}function B(W){return j(q,g),z}function V(W){return g.restore(),++O<ne.length?m(ne[O]):Z}}}function C(j,P){j.resolveAll&&!s.includes(j)&&s.push(j),j.resolve&&Te(o.events,P,o.events.length-P,j.resolve(o.events.slice(P),o)),j.resolveTo&&(o.events=j.resolveTo(o.events,o))}function k(){const j=S(),P=o.previous,L=o.currentConstruct,F=o.events.length,z=Array.from(l);return{from:F,restore:Z};function Z(){r=j,o.previous=P,o.currentConstruct=L,o.events.length=F,l=z,_()}}function _(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function ic(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(r,s)];else{if(a=e.slice(n,i),r>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(r):a.shift()}s>0&&a.push(e[i].slice(0,s))}return a}function sc(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=t?" ":"	";break}case-1:{if(!t&&i)continue;a=" ";break}default:a=String.fromCharCode(s)}i=s===-2,r.push(a)}return r.join("")}function ac(e){const r={constructs:hl([nc,...(e||{}).extensions||[]]),content:i(vl),defined:[],document:i(kl),flow:i(Bo),lazy:{},string:i(Ho),text:i(Vo)};return r;function i(s){return a;function a(l){return rc(r,s,l)}}}function lc(e){for(;!ci(e););return e}const lr=/[\0\t\n\r]/g;function oc(){let e=1,t="",n=!0,r;return i;function i(s,a,l){const c=[];let o,u,h,f,p;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),h=0,t="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(lr.lastIndex=h,o=lr.exec(s),f=o&&o.index!==void 0?o.index:s.length,p=s.charCodeAt(f),!o){t=s.slice(h);break}if(p===10&&h===f&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),h<f&&(c.push(s.slice(h,f)),e+=f-h),p){case 0:{c.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,c.push(-2);e++<u;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}h=f+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const cc=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function uc(e){return e.replace(cc,dc)}function dc(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return si(n.slice(s?2:1),s?16:10)}return vn(n)||e}const mi={}.hasOwnProperty;function hc(e,t,n){return typeof t!="string"&&(n=t,t=void 0),pc(n)(lc(ac(n).document().write(oc()(e,t,!0))))}function pc(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Pn),autolinkProtocol:k,autolinkEmail:k,atxHeading:s(An),blockQuote:s(J),characterEscape:k,characterReference:k,codeFenced:s(le),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(le,a),codeText:s(G,a),codeTextData:k,data:k,codeFlowValue:k,definition:s(Se),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(Xe),hardBreakEscape:s(jn),hardBreakTrailing:s(jn),htmlFlow:s(_n,a),htmlFlowData:k,htmlText:s(_n,a),htmlTextData:k,image:s(Ni),label:a,link:s(Pn),listItem:s(Ai),listItemValue:f,listOrdered:s(In,h),listUnordered:s(In),paragraph:s(ji),reference:m,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(An),strong:s(_i),thematicBreak:s(Ii)},exit:{atxHeading:c(),atxHeadingSequence:M,autolink:c(),autolinkEmail:ce,autolinkProtocol:ae,blockQuote:c(),characterEscapeValue:_,characterReferenceMarkerHexadecimal:V,characterReferenceMarkerNumeric:V,characterReferenceValue:W,characterReference:ie,codeFenced:c(E),codeFencedFence:w,codeFencedFenceInfo:p,codeFencedFenceMeta:S,codeFlowValue:_,codeIndented:c(v),codeText:c(z),codeTextData:_,data:_,definition:c(),definitionDestinationString:D,definitionLabelString:T,definitionTitleString:A,emphasis:c(),hardBreakEscape:c(P),hardBreakTrailing:c(P),htmlFlow:c(L),htmlFlowData:_,htmlText:c(F),htmlTextData:_,image:c(ne),label:q,labelText:O,lineEnding:j,link:c(Z),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:B,resourceDestinationString:g,resourceTitleString:K,resource:oe,setextHeading:c(C),setextHeadingLineSequence:b,setextHeadingText:y,strong:c(),thematicBreak:c()}};gi(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(N){let R={type:"root",children:[]};const U={stack:[R],tokenStack:[],config:t,enter:l,exit:o,buffer:a,resume:u,data:n},Q=[];let X=-1;for(;++X<N.length;)if(N[X][1].type==="listOrdered"||N[X][1].type==="listUnordered")if(N[X][0]==="enter")Q.push(X);else{const be=Q.pop();X=i(N,be,X)}for(X=-1;++X<N.length;){const be=t[N[X][0]];mi.call(be,N[X][1].type)&&be[N[X][1].type].call(Object.assign({sliceSerialize:N[X][2].sliceSerialize},U),N[X][1])}if(U.tokenStack.length>0){const be=U.tokenStack[U.tokenStack.length-1];(be[1]||or).call(U,void 0,be[0])}for(R.position={start:Ie(N.length>0?N[0][1].start:{line:1,column:1,offset:0}),end:Ie(N.length>0?N[N.length-2][1].end:{line:1,column:1,offset:0})},X=-1;++X<t.transforms.length;)R=t.transforms[X](R)||R;return R}function i(N,R,U){let Q=R-1,X=-1,be=!1,Fe,Ne,Ze,et;for(;++Q<=U;){const fe=N[Q];switch(fe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{fe[0]==="enter"?X++:X--,et=void 0;break}case"lineEndingBlank":{fe[0]==="enter"&&(Fe&&!et&&!X&&!Ze&&(Ze=Q),et=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:et=void 0}if(!X&&fe[0]==="enter"&&fe[1].type==="listItemPrefix"||X===-1&&fe[0]==="exit"&&(fe[1].type==="listUnordered"||fe[1].type==="listOrdered")){if(Fe){let ze=Q;for(Ne=void 0;ze--;){const Ae=N[ze];if(Ae[1].type==="lineEnding"||Ae[1].type==="lineEndingBlank"){if(Ae[0]==="exit")continue;Ne&&(N[Ne][1].type="lineEndingBlank",be=!0),Ae[1].type="lineEnding",Ne=ze}else if(!(Ae[1].type==="linePrefix"||Ae[1].type==="blockQuotePrefix"||Ae[1].type==="blockQuotePrefixWhitespace"||Ae[1].type==="blockQuoteMarker"||Ae[1].type==="listItemIndent"))break}Ze&&(!Ne||Ze<Ne)&&(Fe._spread=!0),Fe.end=Object.assign({},Ne?N[Ne][1].start:fe[1].end),N.splice(Ne||Q,0,["exit",Fe,fe[2]]),Q++,U++}if(fe[1].type==="listItemPrefix"){const ze={type:"listItem",_spread:!1,start:Object.assign({},fe[1].start),end:void 0};Fe=ze,N.splice(Q,0,["enter",ze,fe[2]]),Q++,U++,Ze=void 0,et=!0}}}return N[R][1]._spread=be,U}function s(N,R){return U;function U(Q){l.call(this,N(Q),Q),R&&R.call(this,Q)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(N,R,U){this.stack[this.stack.length-1].children.push(N),this.stack.push(N),this.tokenStack.push([R,U||void 0]),N.position={start:Ie(R.start),end:void 0}}function c(N){return R;function R(U){N&&N.call(this,U),o.call(this,U)}}function o(N,R){const U=this.stack.pop(),Q=this.tokenStack.pop();if(Q)Q[0].type!==N.type&&(R?R.call(this,N,Q[0]):(Q[1]||or).call(this,N,Q[0]));else throw new Error("Cannot close `"+N.type+"` ("+lt({start:N.start,end:N.end})+"): itâ€™s not open");U.position.end=Ie(N.end)}function u(){return ul(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(N){if(this.data.expectingFirstListItemValue){const R=this.stack[this.stack.length-2];R.start=Number.parseInt(this.sliceSerialize(N),10),this.data.expectingFirstListItemValue=void 0}}function p(){const N=this.resume(),R=this.stack[this.stack.length-1];R.lang=N}function S(){const N=this.resume(),R=this.stack[this.stack.length-1];R.meta=N}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const N=this.resume(),R=this.stack[this.stack.length-1];R.value=N.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const N=this.resume(),R=this.stack[this.stack.length-1];R.value=N.replace(/(\r?\n|\r)$/g,"")}function T(N){const R=this.resume(),U=this.stack[this.stack.length-1];U.label=R,U.identifier=Qe(this.sliceSerialize(N)).toLowerCase()}function A(){const N=this.resume(),R=this.stack[this.stack.length-1];R.title=N}function D(){const N=this.resume(),R=this.stack[this.stack.length-1];R.url=N}function M(N){const R=this.stack[this.stack.length-1];if(!R.depth){const U=this.sliceSerialize(N).length;R.depth=U}}function y(){this.data.setextHeadingSlurpLineEnding=!0}function b(N){const R=this.stack[this.stack.length-1];R.depth=this.sliceSerialize(N).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function k(N){const U=this.stack[this.stack.length-1].children;let Q=U[U.length-1];(!Q||Q.type!=="text")&&(Q=Pi(),Q.position={start:Ie(N.start),end:void 0},U.push(Q)),this.stack.push(Q)}function _(N){const R=this.stack.pop();R.value+=this.sliceSerialize(N),R.position.end=Ie(N.end)}function j(N){const R=this.stack[this.stack.length-1];if(this.data.atHardBreak){const U=R.children[R.children.length-1];U.position.end=Ie(N.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(R.type)&&(k.call(this,N),_.call(this,N))}function P(){this.data.atHardBreak=!0}function L(){const N=this.resume(),R=this.stack[this.stack.length-1];R.value=N}function F(){const N=this.resume(),R=this.stack[this.stack.length-1];R.value=N}function z(){const N=this.resume(),R=this.stack[this.stack.length-1];R.value=N}function Z(){const N=this.stack[this.stack.length-1];if(this.data.inReference){const R=this.data.referenceType||"shortcut";N.type+="Reference",N.referenceType=R,delete N.url,delete N.title}else delete N.identifier,delete N.label;this.data.referenceType=void 0}function ne(){const N=this.stack[this.stack.length-1];if(this.data.inReference){const R=this.data.referenceType||"shortcut";N.type+="Reference",N.referenceType=R,delete N.url,delete N.title}else delete N.identifier,delete N.label;this.data.referenceType=void 0}function O(N){const R=this.sliceSerialize(N),U=this.stack[this.stack.length-2];U.label=uc(R),U.identifier=Qe(R).toLowerCase()}function q(){const N=this.stack[this.stack.length-1],R=this.resume(),U=this.stack[this.stack.length-1];if(this.data.inReference=!0,U.type==="link"){const Q=N.children;U.children=Q}else U.alt=R}function g(){const N=this.resume(),R=this.stack[this.stack.length-1];R.url=N}function K(){const N=this.resume(),R=this.stack[this.stack.length-1];R.title=N}function oe(){this.data.inReference=void 0}function m(){this.data.referenceType="collapsed"}function B(N){const R=this.resume(),U=this.stack[this.stack.length-1];U.label=R,U.identifier=Qe(this.sliceSerialize(N)).toLowerCase(),this.data.referenceType="full"}function V(N){this.data.characterReferenceType=N.type}function W(N){const R=this.sliceSerialize(N),U=this.data.characterReferenceType;let Q;U?(Q=si(R,U==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Q=vn(R);const X=this.stack[this.stack.length-1];X.value+=Q}function ie(N){const R=this.stack.pop();R.position.end=Ie(N.end)}function ae(N){_.call(this,N);const R=this.stack[this.stack.length-1];R.url=this.sliceSerialize(N)}function ce(N){_.call(this,N);const R=this.stack[this.stack.length-1];R.url="mailto:"+this.sliceSerialize(N)}function J(){return{type:"blockquote",children:[]}}function le(){return{type:"code",lang:null,meta:null,value:""}}function G(){return{type:"inlineCode",value:""}}function Se(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Xe(){return{type:"emphasis",children:[]}}function An(){return{type:"heading",depth:0,children:[]}}function jn(){return{type:"break"}}function _n(){return{type:"html",value:""}}function Ni(){return{type:"image",title:null,url:"",alt:null}}function Pn(){return{type:"link",title:null,url:"",children:[]}}function In(N){return{type:"list",ordered:N.type==="listOrdered",start:null,spread:N._spread,children:[]}}function Ai(N){return{type:"listItem",spread:N._spread,checked:null,children:[]}}function ji(){return{type:"paragraph",children:[]}}function _i(){return{type:"strong",children:[]}}function Pi(){return{type:"text",value:""}}function Ii(){return{type:"thematicBreak"}}}function Ie(e){return{line:e.line,column:e.column,offset:e.offset}}function gi(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?gi(e,r):fc(e,r)}}function fc(e,t){let n;for(n in t)if(mi.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function or(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+lt({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+lt({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+lt({start:t.start,end:t.end})+") is still open")}function mc(e){const t=this;t.parser=n;function n(r){return hc(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function gc(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function yc(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function xc(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function bc(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function vc(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function wc(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Je(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let a,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=s+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,c);const o={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,o),e.applyData(t,o)}function kc(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Sc(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function yi(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function Ec(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return yi(e,t);const i={src:Je(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function Cc(e,t){const n={src:Je(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Tc(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Nc(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return yi(e,t);const i={href:Je(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Ac(e,t){const n={href:Je(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function jc(e,t,n){const r=e.all(t),i=n?_c(n):xi(t),s={},a=[];if(typeof t.checked=="boolean"){const u=r[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const u=r[l];(i||l!==0||u.type!=="element"||u.tagName!=="p")&&a.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?a.push(...u.children):a.push(u)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const o={type:"element",tagName:"li",properties:s,children:a};return e.patch(t,o),e.applyData(t,o)}function _c(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=xi(n[r])}return t}function xi(e){const t=e.spread;return t??e.children.length>1}function Pc(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Ic(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Rc(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Lc(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Dc(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],a),i.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=gn(t.children[1]),c=Xr(t.children[t.children.length-1]);l&&c&&(a.position={start:l,end:c}),i.push(a)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function Oc(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,l=a?a.length:t.children.length;let c=-1;const o=[];for(;++c<l;){const h=t.children[c],f={},p=a?a[c]:void 0;p&&(f.align=p);let S={type:"element",tagName:s,properties:f,children:[]};h&&(S.children=e.all(h),e.patch(h,S),S=e.applyData(h,S)),o.push(S)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(o,!0)};return e.patch(t,u),e.applyData(t,u)}function Mc(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const cr=9,ur=32;function Fc(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(dr(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(dr(t.slice(i),i>0,!1)),s.join("")}function dr(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===cr||s===ur;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===cr||s===ur;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function qc(e,t){const n={type:"text",value:Fc(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function zc(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Bc={blockquote:gc,break:yc,code:xc,delete:bc,emphasis:vc,footnoteReference:wc,heading:kc,html:Sc,imageReference:Ec,image:Cc,inlineCode:Tc,linkReference:Nc,link:Ac,listItem:jc,list:Pc,paragraph:Ic,root:Rc,strong:Lc,table:Dc,tableCell:Mc,tableRow:Oc,text:qc,thematicBreak:zc,toml:yt,yaml:yt,definition:yt,footnoteDefinition:yt};function yt(){}const bi=-1,jt=0,ct=1,Et=2,Sn=3,En=4,Cn=5,Tn=6,vi=7,wi=8,hr=typeof self=="object"?self:globalThis,$c=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,a]=t[i];switch(s){case jt:case bi:return n(a,i);case ct:{const l=n([],i);for(const c of a)l.push(r(c));return l}case Et:{const l=n({},i);for(const[c,o]of a)l[r(c)]=r(o);return l}case Sn:return n(new Date(a),i);case En:{const{source:l,flags:c}=a;return n(new RegExp(l,c),i)}case Cn:{const l=n(new Map,i);for(const[c,o]of a)l.set(r(c),r(o));return l}case Tn:{const l=n(new Set,i);for(const c of a)l.add(r(c));return l}case vi:{const{name:l,message:c}=a;return n(new hr[l](c),i)}case wi:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:l}=new Uint8Array(a);return n(new DataView(l),a)}}return n(new hr[s](a),i)};return r},pr=e=>$c(new Map,e)(0),Ue="",{toString:Uc}={},{keys:Hc}=Object,at=e=>{const t=typeof e;if(t!=="object"||!e)return[jt,t];const n=Uc.call(e).slice(8,-1);switch(n){case"Array":return[ct,Ue];case"Object":return[Et,Ue];case"Date":return[Sn,Ue];case"RegExp":return[En,Ue];case"Map":return[Cn,Ue];case"Set":return[Tn,Ue];case"DataView":return[ct,n]}return n.includes("Array")?[ct,n]:n.includes("Error")?[vi,n]:[Et,n]},xt=([e,t])=>e===jt&&(t==="function"||t==="symbol"),Vc=(e,t,n,r)=>{const i=(a,l)=>{const c=r.push(a)-1;return n.set(l,c),c},s=a=>{if(n.has(a))return n.get(a);let[l,c]=at(a);switch(l){case jt:{let u=a;switch(c){case"bigint":l=wi,u=a.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return i([bi],a)}return i([l,u],a)}case ct:{if(c){let f=a;return c==="DataView"?f=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(f=new Uint8Array(a)),i([c,[...f]],a)}const u=[],h=i([l,u],a);for(const f of a)u.push(s(f));return h}case Et:{if(c)switch(c){case"BigInt":return i([c,a.toString()],a);case"Boolean":case"Number":case"String":return i([c,a.valueOf()],a)}if(t&&"toJSON"in a)return s(a.toJSON());const u=[],h=i([l,u],a);for(const f of Hc(a))(e||!xt(at(a[f])))&&u.push([s(f),s(a[f])]);return h}case Sn:return i([l,a.toISOString()],a);case En:{const{source:u,flags:h}=a;return i([l,{source:u,flags:h}],a)}case Cn:{const u=[],h=i([l,u],a);for(const[f,p]of a)(e||!(xt(at(f))||xt(at(p))))&&u.push([s(f),s(p)]);return h}case Tn:{const u=[],h=i([l,u],a);for(const f of a)(e||!xt(at(f)))&&u.push(s(f));return h}}const{message:o}=a;return i([l,{name:c,message:o}],a)};return s},fr=(e,{json:t,lossy:n}={})=>{const r=[];return Vc(!(t||n),!!t,new Map,r)(e),r},Ct=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?pr(fr(e,t)):structuredClone(e):(e,t)=>pr(fr(e,t));function Qc(e,t){const n=[{type:"text",value:"â†©"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Wc(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Gc(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Qc,r=e.options.footnoteBackLabel||Wc,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const o=e.footnoteById.get(e.footnoteOrder[c]);if(!o)continue;const u=e.all(o),h=String(o.identifier).toUpperCase(),f=Je(h.toLowerCase());let p=0;const S=[],w=e.footnoteCounts.get(h);for(;w!==void 0&&++p<=w;){S.length>0&&S.push({type:"text",value:" "});let T=typeof n=="string"?n:n(c,p);typeof T=="string"&&(T={type:"text",value:T}),S.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,p),className:["data-footnote-backref"]},children:Array.isArray(T)?T:[T]})}const E=u[u.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const T=E.children[E.children.length-1];T&&T.type==="text"?T.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...S)}else u.push(...S);const v={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(u,!0)};e.patch(o,v),l.push(v)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Ct(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const ki=(function(e){if(e==null)return Xc;if(typeof e=="function")return _t(e);if(typeof e=="object")return Array.isArray(e)?Yc(e):Kc(e);if(typeof e=="string")return Jc(e);throw new Error("Expected function, string, or object as test")});function Yc(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ki(e[n]);return _t(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Kc(e){const t=e;return _t(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Jc(e){return _t(t);function t(n){return n&&n.type===e}}function _t(e){return t;function t(n,r,i){return!!(Zc(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Xc(){return!0}function Zc(e){return e!==null&&typeof e=="object"&&"type"in e}const Si=[],eu=!0,mr=!1,tu="skip";function nu(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=ki(i),a=r?-1:1;l(e,void 0,[])();function l(c,o,u){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const p=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(c.type+(p?"<"+p+">":""))+")"})}return f;function f(){let p=Si,S,w,E;if((!t||s(c,o,u[u.length-1]||void 0))&&(p=ru(n(c,u)),p[0]===mr))return p;if("children"in c&&c.children){const v=c;if(v.children&&p[0]!==tu)for(w=(r?v.children.length:-1)+a,E=u.concat(v);w>-1&&w<v.children.length;){const T=v.children[w];if(S=l(T,w,E)(),S[0]===mr)return S;w=typeof S[1]=="number"?S[1]:w+a}}return p}}}function ru(e){return Array.isArray(e)?e:typeof e=="number"?[eu,e]:e==null?Si:[e]}function Ei(e,t,n,r){let i,s,a;typeof t=="function"&&typeof n!="function"?(s=void 0,a=t,i=n):(s=t,a=n,i=r),nu(e,s,l,i);function l(c,o){const u=o[o.length-1],h=u?u.children.indexOf(c):void 0;return a(c,h,u)}}const rn={}.hasOwnProperty,iu={};function su(e,t){const n=t||iu,r=new Map,i=new Map,s=new Map,a={...Bc,...n.handlers},l={all:o,applyData:lu,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:a,one:c,options:n,patch:au,wrap:cu};return Ei(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?r:i,f=String(u.identifier).toUpperCase();h.has(f)||h.set(f,u)}}),l;function c(u,h){const f=u.type,p=l.handlers[f];if(rn.call(l.handlers,f)&&p)return p(l,u,h);if(l.options.passThrough&&l.options.passThrough.includes(f)){if("children"in u){const{children:w,...E}=u,v=Ct(E);return v.children=l.all(u),v}return Ct(u)}return(l.options.unknownHandler||ou)(l,u,h)}function o(u){const h=[];if("children"in u){const f=u.children;let p=-1;for(;++p<f.length;){const S=l.one(f[p],u);if(S){if(p&&f[p-1].type==="break"&&(!Array.isArray(S)&&S.type==="text"&&(S.value=gr(S.value)),!Array.isArray(S)&&S.type==="element")){const w=S.children[0];w&&w.type==="text"&&(w.value=gr(w.value))}Array.isArray(S)?h.push(...S):h.push(S)}}}return h}}function au(e,t){e.position&&(t.position=$a(e))}function lu(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&s&&Object.assign(n.properties,Ct(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function ou(e,t){const n=t.data||{},r="value"in t&&!(rn.call(n,"hProperties")||rn.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function cu(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function gr(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function yr(e,t){const n=su(e,t),r=n.one(e,void 0),i=Gc(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function uu(e,t){return e&&"run"in e?async function(n,r){const i=yr(n,{file:r,...t});await e.run(i,r)}:function(n,r){return yr(n,{file:r,...e||t})}}function xr(e){if(e)throw e}var zt,br;function du(){if(br)return zt;br=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(o){return typeof Array.isArray=="function"?Array.isArray(o):t.call(o)==="[object Array]"},s=function(o){if(!o||t.call(o)!=="[object Object]")return!1;var u=e.call(o,"constructor"),h=o.constructor&&o.constructor.prototype&&e.call(o.constructor.prototype,"isPrototypeOf");if(o.constructor&&!u&&!h)return!1;var f;for(f in o);return typeof f>"u"||e.call(o,f)},a=function(o,u){n&&u.name==="__proto__"?n(o,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):o[u.name]=u.newValue},l=function(o,u){if(u==="__proto__")if(e.call(o,u)){if(r)return r(o,u).value}else return;return o[u]};return zt=function c(){var o,u,h,f,p,S,w=arguments[0],E=1,v=arguments.length,T=!1;for(typeof w=="boolean"&&(T=w,w=arguments[1]||{},E=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});E<v;++E)if(o=arguments[E],o!=null)for(u in o)h=l(w,u),f=l(o,u),w!==f&&(T&&f&&(s(f)||(p=i(f)))?(p?(p=!1,S=h&&i(h)?h:[]):S=h&&s(h)?h:{},a(w,{name:u,newValue:c(T,S,f)})):typeof f<"u"&&a(w,{name:u,newValue:f}));return w},zt}var hu=du();const Bt=Cr(hu);function sn(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function pu(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...i);function l(c,...o){const u=e[++s];let h=-1;if(c){a(c);return}for(;++h<i.length;)(o[h]===null||o[h]===void 0)&&(o[h]=i[h]);i=o,u?fu(u,l)(...o):a(null,...o)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function fu(e,t){let n;return r;function r(...a){const l=e.length>a.length;let c;l&&a.push(i);try{c=e.apply(this,a)}catch(o){const u=o;if(l&&n)throw u;return i(u)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,i):c instanceof Error?i(c):s(c))}function i(a,...l){n||(n=!0,t(a,...l))}function s(a){i(null,a)}}const Ee={basename:mu,dirname:gu,extname:yu,join:xu,sep:"/"};function mu(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');mt(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let a=-1,l=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1),l>-1&&(e.codePointAt(i)===t.codePointAt(l--)?l<0&&(r=i):(l=-1,r=a));return n===r?r=a:r<0&&(r=e.length),e.slice(n,r)}function gu(e){if(mt(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function yu(e){mt(e);let t=e.length,n=-1,r=0,i=-1,s=0,a;for(;t--;){const l=e.codePointAt(t);if(l===47){if(a){r=t+1;break}continue}n<0&&(a=!0,n=t+1),l===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function xu(...e){let t=-1,n;for(;++t<e.length;)mt(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":bu(n)}function bu(e){mt(e);const t=e.codePointAt(0)===47;let n=vu(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function vu(e,t){let n="",r=0,i=-1,s=0,a=-1,l,c;for(;++a<=e.length;){if(a<e.length)l=e.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length>0){n="",r=0,i=a,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,a):n=e.slice(i+1,a),r=a-i-1;i=a,s=0}else l===46&&s>-1?s++:s=-1}return n}function mt(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const wu={cwd:ku};function ku(){return"/"}function an(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Su(e){if(typeof e=="string")e=new URL(e);else if(!an(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Eu(e)}function Eu(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const $t=["history","path","basename","stem","extname","dirname"];class Ci{constructor(t){let n;t?an(t)?n={path:t}:typeof t=="string"||Cu(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":wu.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<$t.length;){const s=$t[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)$t.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Ee.basename(this.path):void 0}set basename(t){Ht(t,"basename"),Ut(t,"basename"),this.path=Ee.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Ee.dirname(this.path):void 0}set dirname(t){vr(this.basename,"dirname"),this.path=Ee.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Ee.extname(this.path):void 0}set extname(t){if(Ut(t,"extname"),vr(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ee.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){an(t)&&(t=Su(t)),Ht(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Ee.basename(this.path,this.extname):void 0}set stem(t){Ht(t,"stem"),Ut(t,"stem"),this.path=Ee.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new ue(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Ut(e,t){if(e&&e.includes(Ee.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Ee.sep+"`")}function Ht(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function vr(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Cu(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Tu=(function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),Nu={}.hasOwnProperty;class Nn extends Tu{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=pu()}copy(){const t=new Nn;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Bt(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Wt("data",this.frozen),this.namespace[t]=n,this):Nu.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Wt("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=bt(t),r=this.parser||this.Parser;return Vt("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Vt("process",this.parser||this.Parser),Qt("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,a){const l=bt(t),c=r.parse(l);r.run(c,l,function(u,h,f){if(u||!h||!f)return o(u);const p=h,S=r.stringify(p,f);_u(S)?f.value=S:f.result=S,o(u,f)});function o(u,h){u||!h?a(u):s?s(h):n(void 0,h)}}}processSync(t){let n=!1,r;return this.freeze(),Vt("processSync",this.parser||this.Parser),Qt("processSync",this.compiler||this.Compiler),this.process(t,i),kr("processSync","process",n),r;function i(s,a){n=!0,xr(s),r=a}}run(t,n,r){wr(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(a,l){const c=bt(n);i.run(t,c,o);function o(u,h,f){const p=h||t;u?l(u):a?a(p):r(void 0,p,f)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),kr("runSync","run",r),i;function s(a,l){xr(a),i=l,r=!0}}stringify(t,n){this.freeze();const r=bt(n),i=this.compiler||this.Compiler;return Qt("stringify",i),wr(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(Wt("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):a(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(o){if(typeof o=="function")c(o,[]);else if(typeof o=="object")if(Array.isArray(o)){const[u,...h]=o;c(u,h)}else a(o);else throw new TypeError("Expected usable value, not `"+o+"`")}function a(o){if(!("plugins"in o)&&!("settings"in o))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(o.plugins),o.settings&&(i.settings=Bt(!0,i.settings,o.settings))}function l(o){let u=-1;if(o!=null)if(Array.isArray(o))for(;++u<o.length;){const h=o[u];s(h)}else throw new TypeError("Expected a list of plugins, not `"+o+"`")}function c(o,u){let h=-1,f=-1;for(;++h<r.length;)if(r[h][0]===o){f=h;break}if(f===-1)r.push([o,...u]);else if(u.length>0){let[p,...S]=u;const w=r[f][1];sn(w)&&sn(p)&&(p=Bt(!0,w,p)),r[f]=[o,p,...S]}}}}const Au=new Nn().freeze();function Vt(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Qt(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Wt(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function wr(e){if(!sn(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function kr(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function bt(e){return ju(e)?e:new Ci(e)}function ju(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function _u(e){return typeof e=="string"||Pu(e)}function Pu(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Iu="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Sr=[],Er={allowDangerousHtml:!0},Ru=/^(https?|ircs?|mailto|xmpp)$/i,Lu=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Pt(e){const t=Du(e),n=Ou(e);return Mu(t.runSync(t.parse(n),n),e)}function Du(e){const t=e.rehypePlugins||Sr,n=e.remarkPlugins||Sr,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Er}:Er;return Au().use(mc).use(n).use(uu,r).use(t)}function Ou(e){const t=e.children||"",n=new Ci;return typeof t=="string"&&(n.value=t),n}function Mu(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,s=t.disallowedElements,a=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||Fu;for(const u of Lu)Object.hasOwn(t,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+Iu+u.id,void 0);return Ei(e,o),Wa(e,{Fragment:d.Fragment,components:i,ignoreInvalidStyle:!0,jsx:d.jsx,jsxs:d.jsxs,passKeys:!0,passNode:!0});function o(u,h,f){if(u.type==="raw"&&f&&typeof h=="number")return a?f.children.splice(h,1):f.children[h]={type:"text",value:u.value},h;if(u.type==="element"){let p;for(p in Mt)if(Object.hasOwn(Mt,p)&&Object.hasOwn(u.properties,p)){const S=u.properties[p],w=Mt[p];(w===null||w.includes(u.tagName))&&(u.properties[p]=c(String(S||""),p,u))}}if(u.type==="element"){let p=n?!n.includes(u.tagName):s?s.includes(u.tagName):!1;if(!p&&r&&typeof h=="number"&&(p=!r(u,h,f)),p&&f&&typeof h=="number")return l&&u.children?f.children.splice(h,1,...u.children):f.children.splice(h,1),h}}}function Fu(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||Ru.test(e.slice(0,t))?e:""}class Ti{static stageMappings=null;static FALLBACK_STAGE_MAPPINGS={survey:{name:"Survey",description:"Early reconnaissance and information gathering phase",tactics:["TA0042","TA0043"]},delivery:{name:"Delivery",description:"Attempts to deliver malicious payload or gain initial access",tactics:["TA0042","TA0043","TA0001"]},isolated_breach:{name:"Isolated Breach",description:"Limited compromise of individual systems without lateral movement",tactics:["TA0042","TA0043","TA0001","TA0002","TA0003","TA0004","TA0005","TA0006","TA0007","TA0009","TA0011","TA0010"]},extensive_breach:{name:"Extensive Breach",description:"Widespread compromise with lateral movement across the network",tactics:["TA0042","TA0043","TA0001","TA0002","TA0003","TA0004","TA0005","TA0006","TA0007","TA0008","TA0009","TA0011","TA0010"]},affect:{name:"Affect",description:"Direct impact on business operations, data destruction, or disruption",tactics:["TA0042","TA0043","TA0001","TA0002","TA0003","TA0004","TA0005","TA0006","TA0007","TA0008","TA0009","TA0011","TA0010","TA0040"]}};static async loadStageMappings(){if(this.stageMappings)return this.stageMappings;try{const t="/src/data/phase2-config.json",n="/ikb-demo/",i=(n.endsWith("/")?n.slice(0,-1):n)+t,s=await fetch(i);if(!s.ok)throw new Error(`Failed to load phase2-config.json: ${s.statusText}`);const a=await s.json();return this.stageMappings=a.mappings,console.log("Loaded stage mappings from phase2-config.json"),this.stageMappings}catch(t){return console.warn("Failed to load stage mappings from config file, using fallback:",t),this.stageMappings=this.FALLBACK_STAGE_MAPPINGS,this.stageMappings}}static async getStageMappings(){return await this.loadStageMappings()}static async classifyStage(t){const n=await this.getStageMappings(),r=t.attack_stage;if(r&&n[r])return{stage:r,confidence:"high",reasoning:[`Directly selected: ${n[r].name}`],recommendedTactics:n[r].tactics};const i=await this.performAutomaticClassification(t);return i.stage?i:{stage:null,confidence:"low",reasoning:["Insufficient information to determine attack stage"],recommendedTactics:[]}}static async performAutomaticClassification(t){const n=[];let r={survey:0,delivery:0,isolated_breach:0,extensive_breach:0,affect:0};this.analyzeIncidentType(t,r,n),this.analyzeImpact(t,r,n),this.analyzeScope(t,r,n),this.analyzeEvidence(t,r,n);const i=Math.max(...Object.values(r));if(i===0)return{stage:null,confidence:"low",reasoning:["No indicators found for automatic classification"],recommendedTactics:[]};const s=Object.entries(r).filter(([o,u])=>u===i).map(([o,u])=>o);s.length>1&&n.push(`Multiple stages have equal confidence: ${s.join(", ")}`);const a=s[0],l=i>=3?"high":i>=2?"medium":"low",c=await this.getStageMappings();return{stage:a,confidence:l,reasoning:n,recommendedTactics:c[a].tactics}}static analyzeIncidentType(t,n,r){const i=t.incident_category,s={suspicious_activity:{survey:2,delivery:1},attempted_attack:{delivery:2,survey:1},successful_attack:{isolated_breach:2,extensive_breach:1},data_breach:{extensive_breach:2,affect:3},system_compromise:{isolated_breach:2,extensive_breach:1},malware_infection:{isolated_breach:2,delivery:1},ransomware:{affect:3,extensive_breach:2},denial_of_service:{affect:3},insider_threat:{isolated_breach:1,extensive_breach:1,affect:2}};i&&s[i]&&(Object.entries(s[i]).forEach(([a,l])=>{n[a]+=l}),r.push(`Incident category "${i}" suggests ${Object.keys(s[i]).join(" or ")} stage`))}static analyzeImpact(t,n,r){switch(t.impact_level){case"none":case"minimal":n.survey+=2,n.delivery+=1,r.push("Minimal impact suggests early stage activity");break;case"minor":n.delivery+=2,n.isolated_breach+=1,r.push("Minor impact suggests delivery or isolated breach");break;case"moderate":n.isolated_breach+=2,n.extensive_breach+=1,r.push("Moderate impact suggests system compromise");break;case"major":case"severe":n.extensive_breach+=2,n.affect+=3,r.push("Major/severe impact suggests extensive compromise or affect stage");break}t.business_disruption==="yes"&&(n.affect+=2,n.extensive_breach+=1,r.push("Business disruption indicates affect or extensive breach stage")),(t.data_compromised==="yes"||t.data_stolen==="yes")&&(n.extensive_breach+=2,n.affect+=1,r.push("Data compromise suggests extensive breach or affect stage"))}static analyzeScope(t,n,r){const i=t.systems_affected;typeof i=="number"&&(i===0?(n.survey+=2,r.push("No systems affected suggests survey stage")):i===1?(n.isolated_breach+=2,r.push("Single system affected suggests isolated breach")):i<=5?(n.isolated_breach+=1,n.extensive_breach+=2,r.push("Multiple systems affected suggests extensive breach")):(n.extensive_breach+=2,n.affect+=1,r.push("Many systems affected suggests extensive breach or affect stage"))),(t.lateral_movement==="yes"||t.network_spread==="yes")&&(n.extensive_breach+=3,r.push("Lateral movement/network spread indicates extensive breach")),t.external_communication==="yes"&&(n.delivery+=1,n.isolated_breach+=1,n.extensive_breach+=2,r.push("External communication suggests active compromise"))}static analyzeEvidence(t,n,r){(t.suspicious_scanning==="yes"||t.information_gathering==="yes")&&(n.survey+=2,r.push("Reconnaissance activity suggests survey stage")),(t.exploit_attempts==="yes"||t.vulnerability_exploitation==="yes")&&(n.delivery+=2,n.isolated_breach+=1,r.push("Exploitation attempts suggest delivery or breach stage")),(t.persistence_mechanisms==="yes"||t.backdoors_found==="yes")&&(n.isolated_breach+=2,n.extensive_breach+=1,r.push("Persistence mechanisms suggest established breach")),(t.file_deletion==="yes"||t.system_destruction==="yes"||t.ransomware_encryption==="yes")&&(n.affect+=3,r.push("Destructive activity indicates affect stage"))}static async getStageInfo(t){return(await this.getStageMappings())[t]||null}static async getAllStages(){return{...await this.getStageMappings()}}static async getRecommendedTactics(t){const n=await this.getStageInfo(t);return n?n.tactics:[]}static validateStageTransition(t,n){const r=["survey","delivery","isolated_breach","extensive_breach","affect"],i=r.indexOf(t),s=r.indexOf(n);return i===-1||s===-1?{valid:!1,warning:"Invalid stage specified"}:s<i?{valid:!0,warning:"Stage transition appears to be moving backwards in the attack lifecycle"}:s-i>1?{valid:!0,warning:"Stage transition skips intermediate stages - ensure this is accurate"}:{valid:!0}}}const qu=({technique:e,isOpen:t,onClose:n,onSelectSubTechnique:r,onSelectMainTechnique:i,searchQuery:s,expandedDescriptions:a,onToggleDescription:l})=>{const c=x.useCallback((u,h)=>h?u.split(new RegExp(`(${h})`,"gi")).map((p,S)=>p.toLowerCase()===h.toLowerCase()?d.jsx("mark",{children:p},S):p):u,[]),o=e.type==="pseudo_technique";return t?d.jsx("div",{className:"modal-overlay",onClick:n,children:d.jsxs("div",{className:"sub-technique-modal",onClick:u=>u.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsxs("h3",{children:["Select Sub-Technique for ",e.name]}),d.jsx("button",{className:"modal-close",onClick:n,type:"button",children:"Ã—"})]}),d.jsxs("div",{className:"modal-content",children:[d.jsx("p",{className:"modal-description",children:o?"Choose the investigation option that best describes why this tactic could not be investigated or confirmed:":'Choose a specific sub-technique that matches your incident, or select "No Matching Sub-Technique" to record the main technique.'}),d.jsxs("div",{className:"sub-techniques-list",children:[e.subTechniques?.map(u=>{const h=a.has(u.external_id);return d.jsxs("div",{className:"modal-sub-technique-card",children:[d.jsxs("div",{className:"modal-sub-technique-header",children:[d.jsx("button",{className:"modal-sub-technique-button",onClick:()=>r(u.external_id),type:"button",children:d.jsxs("div",{className:"modal-sub-technique-info",children:[d.jsx("h5",{children:c(u.name,s)}),d.jsx("span",{className:"modal-sub-technique-id",children:u.external_id})]})}),d.jsx("button",{className:`description-toggle-button modal ${h?"expanded":""}`,onClick:()=>l(u.external_id),title:h?"Hide description":"Show description",type:"button",children:"ðŸ“‹"})]}),h&&d.jsx("div",{className:"modal-sub-technique-description",children:d.jsx(Pt,{components:{a:({href:f,children:p,...S})=>d.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",...S,children:p})},children:u.description})})]},u.external_id)}),d.jsx("div",{className:"modal-no-match-option",children:d.jsx("button",{className:"modal-no-match-button",onClick:i,type:"button",children:d.jsx("div",{className:"modal-no-match-content",children:o?d.jsxs(d.Fragment,{children:[d.jsx("h5",{children:'General "Not Found" Selection'}),d.jsx("span",{className:"modal-no-match-description",children:"Select this if none of the specific investigation reasons above apply to your situation"})]}):d.jsxs(d.Fragment,{children:[d.jsx("h5",{children:"No Matching Sub-Technique"}),d.jsx("span",{className:"modal-no-match-description",children:"Select this if none of the sub-techniques above match your specific incident"})]})})})})]})]})]})}):null},zu=({technique:e,isSelected:t,subTechniqueSelections:n,onTechniqueClick:r,onSubTechniqueSelect:i,onMainTechniqueSelect:s,searchQuery:a,expandedDescriptions:l,onToggleDescription:c,conflictStatus:o})=>{const u=x.useCallback((w,E)=>E?w.split(new RegExp(`(${E})`,"gi")).map((T,A)=>T.toLowerCase()===E.toLowerCase()?d.jsx("mark",{children:T},A):T):w,[]),h=(e.subTechniques?.length??0)>0,f=l.has(e.external_id),p=()=>{o?.isDisabled||(h?r(e):s(e.external_id))},S=e.type==="pseudo_technique";return d.jsx("div",{className:`technique-card nested ${o?.isDisabled?"disabled":"clickable"} ${t?"selected":""} ${S?"n-code-technique":""}`,onClick:p,role:"button",tabIndex:o?.isDisabled?-1:0,onKeyDown:w=>{!o?.isDisabled&&(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),p())},"aria-describedby":`desc-${e.external_id}`,title:o?.isDisabled?o.reason:void 0,children:d.jsxs("div",{className:"technique-main",children:[d.jsxs("div",{className:"technique-header",children:[d.jsx("div",{className:"technique-info",children:d.jsxs("h4",{children:[d.jsx("span",{className:"technique-id",children:e.external_id}),u(e.name,a)]})}),d.jsx("div",{className:"technique-actions",children:d.jsx("button",{className:`description-toggle-button ${f?"expanded":""}`,onClick:w=>{w.stopPropagation(),c(e.external_id)},title:f?"Hide description":"Show description",type:"button",children:"ðŸ“‹"})})]}),f&&d.jsx("div",{className:"technique-description",id:`desc-${e.external_id}`,children:d.jsx(Pt,{components:{a:({href:w,children:E,...v})=>d.jsx("a",{href:w,target:"_blank",rel:"noopener noreferrer",...v,children:E})},children:e.description})})]})})},Bu=()=>{const{state:e,dispatch:t}=Oe(),n=De(),[r,i]=x.useState(null),[s,a]=x.useState(!0),[l,c]=x.useState(null),[o,u]=x.useState(""),[h,f]=x.useState(0),[p,S]=x.useState(new Set),[w,E]=x.useState(new Set),[v,T]=x.useState(null),[A,D]=x.useState({stage:null,recommendedTactics:[]});x.useEffect(()=>{(async()=>{try{const B=await Ti.classifyStage(e.responses);D(B)}catch(B){console.error("Failed to classify stage:",B),D({stage:null,recommendedTactics:[]})}})()},[e.responses]);const M=x.useMemo(()=>A.stage?A.recommendedTactics:[],[A]),y=x.useMemo(()=>{if(!r||M.length===0)return null;const m=M[h];return m?r.tactics[m]:null},[r,M,h]),b=M[h]||null;x.useEffect(()=>{(async()=>{try{a(!0),He.clearCache();const B=await He.loadMitreDataAsync();i(B),f(0)}catch(B){console.error("Failed to load MITRE data:",B),c("Failed to load MITRE ATT&CK data. Please try again.")}finally{a(!1)}})()},[M]);const C=x.useMemo(()=>{if(!r||!b)return[];let m=r.techniquesByTactic[b]||[];if(o.trim()){const G=He.searchTechniques(o);m=m.filter(Se=>G.some(Xe=>Xe.id===Se))}const B=m.map(G=>r.techniques[G]).filter(Boolean),V=B.filter(G=>!G.x_mitre_is_subtechnique),W=B.filter(G=>G.x_mitre_is_subtechnique),ie=new Map;V.forEach(G=>{ie.set(G.external_id,{...G,subTechniques:G.sub_techniques||[]})}),W.forEach(G=>{const Se=G.external_id.split(".")[0];ie.has(Se)?ie.get(Se).subTechniques.push(G):ie.set(G.external_id,{...G,subTechniques:G.sub_techniques||[]})});const ae=Array.from(ie.values()),ce=ae.filter(G=>G.type!=="pseudo_technique"),J=ae.filter(G=>G.type==="pseudo_technique");ce.sort((G,Se)=>G.name.localeCompare(Se.name));const le=[...ce,...J];return le.forEach(G=>{G.subTechniques&&G.subTechniques.length>0&&G.subTechniques.sort((Se,Xe)=>Se.name.localeCompare(Xe.name))}),le},[r,b,o]),k=x.useCallback(m=>{if(console.log("handleTechniqueToggle called with:",m),!b||!r)return;const B=r.techniques[m];console.log("Technique lookup result:",B);const V=m.includes(".")&&m.startsWith("N");if(console.log("Is sub-technique:",V),!B&&!V){console.warn("Technique not found:",m);return}const W=V||B&&B.type==="pseudo_technique";console.log("Is N-code:",W);const ie=e.selectedTechniques[b]||{};if(ie[m]){t({type:"UPDATE_TECHNIQUE_SELECTION",payload:{tacticId:b,techniqueId:m,selected:!1}});return}const ce=[];W?Object.keys(ie).forEach(J=>{if(ie[J]){const le=r.techniques[J];J.startsWith("N")&&(J.includes(".")||le&&le.type==="pseudo_technique")||ce.push(J)}}):Object.keys(ie).forEach(J=>{if(ie[J]){const le=r.techniques[J];J.startsWith("N")&&(J.includes(".")||le&&le.type==="pseudo_technique")&&ce.push(J)}}),ce.forEach(J=>{t({type:"UPDATE_TECHNIQUE_SELECTION",payload:{tacticId:b,techniqueId:J,selected:!1}})}),t({type:"UPDATE_TECHNIQUE_SELECTION",payload:{tacticId:b,techniqueId:m,selected:!0}})},[t,b,e.selectedTechniques,r]),_=x.useCallback(m=>{m.subTechniques&&m.subTechniques.length>0?T(m):k(m.external_id)},[k]),j=x.useCallback(m=>{k(m),T(null)},[k]),P=x.useCallback(m=>{k(m),v&&T(null)},[k,v]),L=x.useCallback(()=>{T(null),E(new Set)},[]);x.useEffect(()=>{xe()},[h]);const F=x.useCallback(m=>{S(B=>{const V=new Set(B);return V.has(m)?V.delete(m):V.add(m),V})},[]),z=x.useCallback(m=>{E(B=>{const V=new Set(B);return V.has(m)?V.delete(m):V.add(m),V})},[]),Z=x.useMemo(()=>{if(!r||!b)return[];const m=e.selectedTechniques[b]||{};return Object.keys(m).filter(V=>m[V]).map(V=>{let W=r.techniques[V];if(!W&&V.includes(".")&&V.startsWith("N")){const ie=V.split(".")[0],ae=r.techniques[ie];ae&&ae.sub_techniques&&(W=ae.sub_techniques.find(ce=>ce.external_id===V))}return W}).filter(Boolean)},[r,b,e.selectedTechniques]),ne=x.useMemo(()=>{if(!b)return!1;const m=e.selectedTechniques[b]||{};return Object.values(m).some(B=>B)},[b,e.selectedTechniques]),O=x.useMemo(()=>{const m={};return M.forEach(B=>{const V=e.selectedTechniques[B]||{};m[B]=Object.values(V).some(W=>W)}),m},[M,e.selectedTechniques]),q=x.useCallback(()=>{h>0&&f(h-1)},[h]),g=x.useCallback(()=>{ne&&(h<M.length-1?f(h+1):Object.values(O).every(B=>B)&&(t({type:"SET_PHASE",payload:3}),n("/phase/3"),xe()))},[h,M.length,ne,O,t,n]),K=x.useCallback(m=>{if(!r||!b)return{isDisabled:!1,reason:""};const B=r.techniques[m];if(!B)return{isDisabled:!1,reason:""};const V=B.type==="pseudo_technique",W=e.selectedTechniques[b]||{};if(W[m])return{isDisabled:!1,reason:""};const ae=r.techniquesByTactic[b]||[];if(V){if(ae.some(J=>{const le=r.techniques[J];return le&&le.type!=="pseudo_technique"&&W[J]}))return{isDisabled:!0,reason:"Cannot select investigation options when standard techniques are already selected"}}else if(ae.some(J=>{const le=r.techniques[J];return le&&le.type==="pseudo_technique"&&W[J]}))return{isDisabled:!0,reason:"Cannot select standard techniques when investigation options are already selected"};return{isDisabled:!1,reason:""}},[r,b,e.selectedTechniques]),oe=x.useCallback(()=>{t({type:"SET_PHASE",payload:1}),n("/phase/1"),xe()},[t,n]);return s?d.jsx("div",{className:"phase2-technique-selection loading",children:d.jsxs("div",{className:"loading-container",children:[d.jsx("div",{className:"spinner"}),d.jsx("p",{className:"loading-text",children:"Loading MITRE ATT&CK techniques..."})]})}):l||!r?d.jsx("div",{className:"phase2-technique-selection error",children:d.jsxs("div",{className:"error-message",children:[d.jsx("h2",{children:"Error Loading Techniques"}),d.jsx("p",{children:l||"Failed to load MITRE ATT&CK data"}),d.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]})}):d.jsxs("div",{className:"phase2-technique-selection",children:[d.jsx("div",{className:"phase-header",children:d.jsxs("div",{className:"header-content",children:[d.jsx("h1",{children:"Phase 2: MITRE ATT&CK Technique Selection"}),d.jsxs("div",{className:"tactic-progress",children:[d.jsx("div",{className:"progress-bar",children:d.jsx("div",{className:"progress-fill",style:{width:`${(h+1)/M.length*100}%`}})}),d.jsxs("div",{className:"progress-info",children:[d.jsxs("span",{children:["Tactic ",h+1," of ",M.length]}),y&&d.jsxs("span",{children:[" ",y.name]}),ne&&d.jsx("span",{className:"tactic-complete-indicator",children:"âœ“"})]})]})]})}),d.jsx("div",{className:"tactic-controls",children:d.jsx("div",{className:"search-control",children:d.jsx("input",{type:"text",placeholder:"Search techniques...",value:o,onChange:m=>u(m.target.value),className:"search-input"})})}),d.jsx("div",{className:"tactic-page",children:y?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"tactic-info",children:d.jsxs("h2",{children:[y.name," (",b,")"]})}),Z.length>0&&d.jsxs("div",{className:"selected-techniques-tile",children:[d.jsxs("h3",{children:["Selected Techniques for ",y.name]}),d.jsx("div",{className:"selected-techniques-list",children:Z.map(m=>d.jsxs("div",{className:"selected-technique-item",children:[d.jsxs("div",{className:"selected-technique-info",children:[d.jsx("span",{className:"selected-technique-id",children:m.external_id}),d.jsx("span",{className:"selected-technique-name",children:m.name}),m.type==="pseudo_technique"&&d.jsx("span",{className:"selected-n-code-badge",children:"Investigation Option"})]}),d.jsx("button",{className:"remove-technique-button",onClick:()=>k(m.external_id),title:"Remove this technique",type:"button",children:"Ã—"})]},m.external_id))})]}),d.jsx("div",{className:"technique-controls"}),d.jsx("div",{className:"techniques-grid",children:C.length>0?C.map(m=>d.jsx(zu,{technique:m,isSelected:!!(b&&e.selectedTechniques[b]?.[m.external_id]),subTechniqueSelections:b&&e.selectedTechniques[b]||{},onTechniqueClick:_,onSubTechniqueSelect:j,onMainTechniqueSelect:P,searchQuery:o,expandedDescriptions:p,onToggleDescription:F,conflictStatus:K(m.external_id)},m.external_id)):d.jsx("div",{className:"no-techniques",children:d.jsx("p",{children:o?`No techniques found matching "${o}"`:"No techniques available for this tactic"})})})]}):d.jsx("div",{className:"no-current-tactic",children:d.jsx("p",{children:"No current tactic available. Please check your Phase 1 responses."})})}),d.jsx("div",{className:"phase-controls",children:d.jsxs("div",{className:"controls-content",children:[d.jsx("button",{className:"nav-button previous",onClick:h===0?oe:q,disabled:!1,children:h===0?"â† Back to Phase 1":"â† Previous Tactic"}),d.jsx("div",{className:"phase-indicator",children:y?`Tactic ${h+1} of ${M.length}: ${y.name}`:"Phase 2 of 5: Technique Selection"}),d.jsx("button",{className:"nav-button next",onClick:g,disabled:!y||!ne,children:h===M.length-1?"Complete Phase 2 â†’":"Next Tactic â†’"})]})}),v&&d.jsx(qu,{technique:v,isOpen:!!v,onClose:L,onSelectSubTechnique:j,onSelectMainTechnique:()=>P(v.external_id),searchQuery:o,expandedDescriptions:w,onToggleDescription:z})]})},$u=({software:e,isSelected:t,onToggle:n,searchQuery:r,showDescription:i,onToggleDescription:s})=>{const a=x.useCallback((l,c)=>l,[]);return d.jsxs("div",{className:`software-card ${t?"selected":""} ${e.type} clickable`,onClick:()=>n(e.external_id),children:[d.jsxs("div",{className:"software-header",children:[d.jsx("div",{className:"software-info",children:d.jsxs("h4",{children:[a(e.name,r)," ",d.jsxs("span",{className:"software-id",children:["(",e.external_id,")"]})]})}),d.jsx("div",{className:"software-actions",children:d.jsx("button",{className:`description-toggle-button ${i?"expanded":""}`,onClick:l=>{l.stopPropagation(),s(e.external_id)},title:i?"Hide description":"Show description",type:"button",children:"ðŸ“‹"})})]}),i&&d.jsx("div",{className:"software-description",id:`desc-${e.external_id}`,children:d.jsx(Pt,{components:{a:({href:l,children:c,...o})=>d.jsx("a",{href:l,target:"_blank",rel:"noopener noreferrer",...o,children:c})},children:e.description})}),e.aliases&&e.aliases.length>0&&d.jsxs("div",{className:"software-aliases",children:[d.jsx("span",{className:"aliases-label",children:"Also known as:"}),d.jsx("div",{className:"aliases-list",children:e.aliases.map(l=>d.jsx("span",{className:"alias-tag",children:a(l,r)},l))})]})]})},Uu=({group:e,isSelected:t,onToggle:n,searchQuery:r,showDescription:i,onToggleDescription:s})=>{const a=x.useCallback((c,o)=>c,[]),l=e.is_meta_group;return d.jsxs("div",{className:`group-card ${t?"selected":""} ${l?"meta-group":""} clickable`,onClick:()=>n(e.external_id),children:[d.jsxs("div",{className:"group-header",children:[d.jsx("div",{className:"group-info",children:d.jsxs("h4",{children:[a(e.name,r)," ",d.jsxs("span",{className:"group-id",children:["(",e.external_id,")"]})]})}),d.jsx("div",{className:"group-actions",children:d.jsx("button",{className:`description-toggle-button ${i?"expanded":""}`,onClick:c=>{c.stopPropagation(),s(e.external_id)},title:i?"Hide description":"Show description",type:"button",children:"ðŸ“‹"})})]}),i&&d.jsx("div",{className:"group-description",id:`desc-${e.external_id}`,children:d.jsx(Pt,{components:{a:({href:c,children:o,...u})=>d.jsx("a",{href:c,target:"_blank",rel:"noopener noreferrer",...u,children:o})},children:e.description})}),e.aliases&&e.aliases.length>0&&d.jsxs("div",{className:"group-aliases",children:[d.jsx("span",{className:"aliases-label",children:"Also known as:"}),d.jsx("div",{className:"aliases-list",children:e.aliases.map(c=>d.jsx("span",{className:"alias-tag",children:a(c,r)},c))})]})]})},Hu=()=>{const{state:e,dispatch:t}=Oe(),n=De(),[r,i]=x.useState(null),[s,a]=x.useState(!0),[l,c]=x.useState(null),[o,u]=x.useState(0),[h,f]=x.useState(""),[p,S]=x.useState(new Set),[w,E]=x.useState(new Set),[v,T]=x.useState(new Set),A=["tools","malware","groups"],D=A[o],M={tools:"Tools",malware:"Malware",groups:"Threat Groups"};x.useEffect(()=>{(async()=>{try{a(!0),He.clearCache();const q=await He.loadMitreDataAsync();i(q)}catch(q){console.error("Failed to load MITRE data:",q),c("Failed to load MITRE software data. Please try again.")}finally{a(!1)}})()},[]);const y=x.useMemo(()=>{const O=new Set;return Object.values(e.selectedTechniques).forEach(q=>{Object.entries(q).forEach(([g,K])=>{K&&O.add(g)})}),O},[e.selectedTechniques]),b=x.useMemo(()=>{if(!r)return[];const O=[];return y.forEach(q=>{if(q.startsWith("N"))return;let g=null,K="";if(r.techniques[q]){g=r.techniques[q],K=g.name;const m=(r.softwareByTechnique[q]||[]).filter(B=>{const V=r.software[B];return V&&V.type===(D==="tools"?"tool":"malware")}).length;m>0&&O.push({id:q,name:K,relatedSoftwareCount:m})}}),O.sort((q,g)=>q.name.localeCompare(g.name))},[r,y,D]),C=x.useMemo(()=>{if(!r||D==="groups")return[];const O=new Set;return r.softwareByType[D].forEach(g=>{const K=r.software[g];K?.x_mitre_platforms&&K.x_mitre_platforms.forEach(oe=>O.add(oe))}),Array.from(O).sort()},[r,D]),k=x.useCallback((O,q)=>{const g=O.toLowerCase();return!!(q.name.toLowerCase().includes(g)||q.aliases&&q.aliases.some(K=>K.toLowerCase().includes(g))||q.external_id&&q.external_id.toLowerCase().includes(g))},[]),_=x.useMemo(()=>{if(!r)return[];let O;return D==="tools"||D==="malware"?(O=r.softwareByType[D],h.trim()&&(O=O.filter(q=>{const g=r.software[q];return g&&k(h,g)})),w.size>0&&(O=O.filter(q=>r.software[q]?.x_mitre_platforms?.some(K=>w.has(K))||!1)),v.size>0&&(O=O.filter(q=>(r.techniquesBySoftware[q]||[]).some(K=>v.has(K)))),O.sort((q,g)=>r.software[q]?.name.localeCompare(r.software[g]?.name||"")||0)):(O=Object.keys(r.groups),h.trim()&&(O=O.filter(q=>{const g=r.groups[q];return g&&k(h,g)})),O.sort((q,g)=>{const K=r.groups[q],oe=r.groups[g],m=K?.is_meta_group,B=oe?.is_meta_group;return m&&!B?-1:!m&&B?1:K?.name.localeCompare(oe?.name||"")||0})),O},[r,D,h,w,k,v]),j=x.useCallback(O=>{const q=D==="groups"?"groups":r?.software[O]?.type==="tool"?"tools":"malware";q==="groups"&&Object.keys(e.selectedSoftware.groups).forEach(g=>{e.selectedSoftware.groups[g]&&t({type:"TOGGLE_SOFTWARE",payload:{category:"groups",id:g}})}),t({type:"TOGGLE_SOFTWARE",payload:{category:q,id:O}})},[t,D,r,e.selectedSoftware.groups]);x.useEffect(()=>{xe()},[o]);const P=x.useCallback(()=>{o<A.length-1?u(o+1):(t({type:"SET_PHASE",payload:4}),n("/phase/4"),xe())},[o,A.length,t,n]),L=x.useCallback(()=>{o>0&&u(o-1)},[o]),F=x.useCallback(()=>{t({type:"SET_PHASE",payload:2}),n("/phase/2"),xe()},[t,n]),z=x.useCallback(O=>{S(q=>{const g=new Set(q);return g.has(O)?g.delete(O):g.add(O),g})},[]),Z=x.useCallback(O=>{E(q=>{const g=new Set(q);return g.has(O)?g.delete(O):g.add(O),g})},[]),ne=x.useCallback(O=>{T(q=>{const g=new Set(q);return g.has(O)?g.delete(O):g.add(O),g})},[]);return x.useEffect(()=>{S(new Set),E(new Set),T(new Set),f("")},[D]),s?d.jsx("div",{className:"phase3-software-selection loading",children:d.jsxs("div",{className:"loading-container",children:[d.jsx("div",{className:"spinner"}),d.jsx("p",{className:"loading-text",children:"Loading MITRE software database..."})]})}):l||!r?d.jsx("div",{className:"phase3-software-selection error",children:d.jsxs("div",{className:"error-message",children:[d.jsx("h2",{children:"Error Loading Software Database"}),d.jsx("p",{children:l||"Failed to load MITRE software data"}),d.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]})}):d.jsxs("div",{className:"phase3-software-selection",children:[d.jsx("div",{className:"phase-header",children:d.jsxs("div",{className:"header-content",children:[d.jsx("h1",{children:"Phase 3: Software & Threat Actor Selection"}),d.jsxs("div",{className:"category-progress",children:[d.jsx("div",{className:"progress-bar",children:d.jsx("div",{className:"progress-fill",style:{width:`${(o+1)/A.length*100}%`}})}),d.jsxs("div",{className:"progress-info",children:[M[D]," (",o+1," of ",A.length,")"]})]})]})}),d.jsxs("div",{className:"category-page",children:[d.jsxs("div",{className:"category-header",children:[d.jsx("h2",{children:M[D]}),d.jsx("div",{className:"search-control",children:d.jsx("input",{type:"text",placeholder:`Search ${M[D].toLowerCase()}...`,value:h,onChange:O=>f(O.target.value),className:"search-input"})}),D!=="groups"&&C.length>0&&d.jsxs("div",{className:"platform-filters",children:[d.jsx("h4",{children:"Filter by Platform:"}),d.jsx("div",{className:"platform-toggles",children:C.map(O=>d.jsxs("label",{className:"platform-toggle",children:[d.jsx("input",{type:"checkbox",checked:w.has(O),onChange:()=>Z(O)}),d.jsx("span",{className:"platform-label",children:O}),d.jsxs("span",{className:"platform-count",children:["(",r.softwareByType[D].filter(q=>r.software[q]?.x_mitre_platforms?.includes(O)).length,")"]})]},O))}),w.size>0&&d.jsxs("button",{className:"clear-platforms-btn",onClick:()=>E(new Set),type:"button",children:["Clear Platform Filters (",w.size,")"]})]}),D!=="groups"&&b.length>0&&d.jsxs("div",{className:"technique-filters",children:[d.jsx("h4",{children:"Additional Filters:"}),d.jsx("div",{className:"technique-toggles",children:b.map(({id:O,name:q,relatedSoftwareCount:g})=>d.jsxs("label",{className:"technique-toggle",children:[d.jsx("input",{type:"checkbox",checked:v.has(O),onChange:()=>ne(O)}),d.jsxs("span",{className:"technique-label",children:["Related to ",q]}),d.jsxs("span",{className:"technique-count",children:["(",g,")"]})]},O))})]})]}),d.jsx("div",{className:"software-sections",children:d.jsx("div",{className:"all-software",children:d.jsx("div",{className:"items-grid",children:_.length>0?_.map(O=>{if(D==="groups"){const q=r.groups[O];return q?d.jsx(Uu,{group:q,isSelected:!!e.selectedSoftware.groups[O],onToggle:j,searchQuery:h,showDescription:p.has(O),onToggleDescription:z},O):null}else{const q=r.software[O];if(!q)return null;const g=q.type==="tool"?"tools":"malware";return d.jsx($u,{software:q,isSelected:!!e.selectedSoftware[g][O],onToggle:j,searchQuery:h,showDescription:p.has(O),onToggleDescription:z},O)}}):d.jsx("div",{className:"no-items",children:d.jsx("p",{children:h?`No ${M[D].toLowerCase()} found matching "${h}"`:`No ${M[D].toLowerCase()} available`})})})})})]}),d.jsx("div",{className:"phase-controls",children:d.jsxs("div",{className:"controls-content",children:[d.jsx("button",{className:"nav-button previous",onClick:o===0?F:L,disabled:!1,children:o===0?"â† Back to Phase 2":"â† Previous Category"}),d.jsxs("div",{className:"category-indicator",children:[M[D]," (",o+1," of ",A.length,")"]}),d.jsx("button",{className:"nav-button next",onClick:P,children:o===A.length-1?"Complete Phase 3 â†’":"Next Category â†’"})]})})]})},Vu=({question:e,technique_id:t,tactic_id:n,value:r,onChange:i,isSubQuestion:s=!1})=>d.jsx("div",{className:`question-card ${s?"question-card--sub":""}`,children:d.jsx("div",{className:"question-input",children:d.jsx(Tr,{question:{id:e.id,question:e.question,type:e.type,options:e.options,required:e.required,placeholder:"",help_text:e.explanation},value:r,onChange:i,showHint:!0,className:"question-input-field"})})}),Qu=()=>{const{state:e,dispatch:t}=Oe(),n=De(),[r,i]=x.useState(null),[s,a]=x.useState(null),[l,c]=x.useState(!0),[o,u]=x.useState(null),[h,f]=x.useState({stage:null,recommendedTactics:[]});x.useEffect(()=>{(async()=>{try{const b=await Ti.classifyStage(e.responses);f(b)}catch(b){console.error("Failed to classify stage:",b),f({stage:null,recommendedTactics:[]})}})()},[e.responses]);const p=x.useMemo(()=>h.stage?h.recommendedTactics:[],[h]),S={TA0042:"Resource Development",TA0043:"Reconnaissance",TA0001:"Initial Access",TA0002:"Execution",TA0003:"Persistence",TA0004:"Privilege Escalation",TA0005:"Defense Evasion",TA0006:"Credential Access",TA0007:"Discovery",TA0008:"Lateral Movement",TA0009:"Collection",TA0010:"Exfiltration",TA0011:"Command and Control",TA0040:"Impact"};x.useEffect(()=>{(async()=>{try{c(!0);const b="/src/data/phase4-config.json",C="/ikb-demo/",_=(C.endsWith("/")?C.slice(0,-1):C)+b,j=await fetch(_);if(!j.ok)throw new Error(`Failed to load Phase 4 config: ${j.status}`);const P=await j.json();i(P)}catch(b){console.error("Failed to load Phase 4 config:",b),u("Failed to load evidence collection configuration. Please try again.")}finally{c(!1)}})()},[]),x.useEffect(()=>{(async()=>{try{const b=await He.loadMitreDataAsync();console.log("Phase 4 - MITRE data loaded:",b),console.log("Phase 4 - Available tactics:",Object.keys(b.tactics)),console.log("Phase 4 - Available tactic names:",Object.entries(b.tactics).map(([C,k])=>`${C}: ${k.name}`)),a(b)}catch(b){console.error("Failed to load MITRE data:",b)}})()},[]);const w=x.useMemo(()=>{if(!r)return[];console.log("Phase 4 Debug - Selected techniques:",e.selectedTechniques),console.log("Phase 4 Debug - Available question groups:",r.question_groups.length),r.question_groups.slice(0,5).forEach(C=>{const k=C.show_when?.technique_tactic_combinations;console.log(`Group ${C.id} expects:`,k)});const y=[];Object.keys(e.selectedTechniques).forEach(C=>{Object.keys(e.selectedTechniques[C]).forEach(k=>{e.selectedTechniques[C][k]&&y.push({tacticId:C,techniqueId:k})})}),console.log("Phase 4 Debug - Actually selected techniques:",y);const b=r.question_groups.filter(C=>{const k=C.show_when?.technique_tactic_combinations;if(!k||!Array.isArray(k))return console.log(`Group ${C.id}: No combinations defined`),!1;const _=k.some(j=>{const P=e.selectedTechniques[j.tactic_id]?.[j.technique_id];return console.log(`Checking ${j.technique_id} in ${j.tactic_id}: ${P?"SELECTED":"NOT SELECTED"}`),P});return _&&console.log("âœ… Found relevant group:",C.id,C.technique_id,C.tactic_id),_});return console.log("Phase 4 Debug - Relevant groups found:",b.length),b},[r,e.selectedTechniques]),E=x.useMemo(()=>{const y=[],b=(C,k,_,j,P)=>{C.sub_questions&&C.sub_questions.forEach(L=>{const F=e.evidenceResponses[k],z=L.show_when?.parent_answer,Z=z===F;(z==="other"||F==="other")&&console.log("ðŸ” Debug conditional question:",{questionId:k,subQuestionId:L.id,parentAnswer:F,expectedAnswer:z,shouldShow:Z,parentAnswerType:typeof F,expectedAnswerType:typeof z}),Z&&(y.push({question:L,technique_id:_,tactic_id:j,group_id:P,parent_question_id:k}),b(L,L.id,_,j,P))})};return w.forEach(C=>{C.question_flow.forEach(k=>{y.push({question:k,technique_id:C.technique_id,tactic_id:C.tactic_id,group_id:C.id}),b(k,k.id,C.technique_id,C.tactic_id,C.id)})}),y.sort((C,k)=>{const _=p.indexOf(C.tactic_id),j=p.indexOf(k.tactic_id);return _!==-1&&j!==-1?_-j:_!==-1?-1:j!==-1?1:C.tactic_id.localeCompare(k.tactic_id)}),y},[w,p,e.evidenceResponses]),v=x.useMemo(()=>{const y=[];console.log("Phase 4 - tacticOrder from stage classification:",p),console.log("Phase 4 - All unique tactic IDs in allQuestions:",[...new Set(E.map(k=>k.tactic_id))]),p.forEach(k=>{const _=E.filter(j=>j.tactic_id===k);if(_.length>0){const j=s?.tactics[k],P=j?.name||S[k]||k;console.log(`Phase 4 - Tactic ${k}: data =`,j,`fallback = ${S[k]}, name = ${P}`),y.push({tactic_id:k,tactic_name:P,questions:_})}});const b=E.filter(k=>!p.includes(k.tactic_id));return[...new Set(b.map(k=>k.tactic_id))].sort().forEach(k=>{const _=b.filter(P=>P.tactic_id===k),j=s?.tactics[k]?.name||S[k]||k;y.push({tactic_id:k,tactic_name:j,questions:_})}),y},[E,p,s]),T=x.useCallback((y,b)=>{t({type:"UPDATE_EVIDENCE_RESPONSE",payload:{key:y,value:b}})},[t]),A=x.useCallback(()=>{t({type:"SET_PHASE",payload:5}),n("/phase/5"),xe()},[t,n]),D=x.useCallback(()=>{t({type:"SET_PHASE",payload:3}),n("/phase/3"),xe()},[t,n]);x.useEffect(()=>{!l&&r&&E.length===0&&(console.log("Phase 4: No questions available, auto-skipping to Phase 5"),t({type:"SET_PHASE",payload:5}),n("/phase/5"),xe())},[l,r,E.length,t,n]);const M=x.useMemo(()=>{const y=E.length,b=E.filter(({question:_})=>{const j=e.evidenceResponses[_.id];return j!=null&&j!==""}).length,C=E.filter(({question:_})=>_.required).length,k=E.filter(({question:_})=>{if(!_.required)return!1;const j=e.evidenceResponses[_.id];return j!=null&&j!==""}).length;return{totalQuestions:y,questionsWithResponses:b,requiredQuestions:C,completedRequiredQuestions:k,completionPercentage:y>0?Math.round(b/y*100):0}},[E,e.evidenceResponses]);return l?d.jsx("div",{className:"phase4-evidence-collection loading",children:d.jsxs("div",{className:"loading-container",children:[d.jsx("div",{className:"spinner"}),d.jsx("p",{className:"loading-text",children:"Loading evidence collection templates..."})]})}):o||!r?d.jsx("div",{className:"phase4-evidence-collection error",children:d.jsxs("div",{className:"error-message",children:[d.jsx("h2",{children:"Error Loading Evidence Collection"}),d.jsx("p",{children:o||"Failed to load evidence collection configuration"}),d.jsx("button",{onClick:()=>window.location.reload(),children:"Retry"})]})}):E.length===0?d.jsx("div",{className:"phase4-evidence-collection empty",children:d.jsxs("div",{className:"empty-state",children:[d.jsx("h2",{children:"No Evidence Collection Questions Available"}),d.jsx("div",{className:"empty-details",children:Object.keys(e.selectedTechniques).length===0?d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"No techniques have been selected in Phase 2."}),d.jsx("p",{children:"Please go back to Phase 2 and select some techniques from the MITRE ATT&CK framework to see relevant evidence collection questions."})]}):d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"No evidence collection questions match your selected techniques."}),d.jsxs("p",{children:["The Phase 4 configuration includes questions for ",r?.question_groups.length||0," technique-tactic combinations."]}),d.jsx("p",{children:"Your selected techniques:"}),d.jsx("ul",{className:"selected-techniques-list",children:Object.entries(e.selectedTechniques).map(([y,b])=>Object.entries(b).map(([C,k])=>k&&d.jsxs("li",{children:[C," in ",y]},`${y}-${C}`))).flat()}),d.jsx("p",{children:"Try selecting different techniques in Phase 2, or check the browser console for debugging information."}),d.jsxs("p",{children:[d.jsx("strong",{children:"Recommended techniques with evidence questions:"})," T1566 (Phishing), T1190 (Exploit Public-Facing Application), T1595 (Active Scanning), T1210 (Exploitation of Remote Services), T1068 (Exploitation for Privilege Escalation)."]})]})}),d.jsxs("div",{className:"empty-actions",children:[d.jsx("button",{onClick:()=>{n("/phase/2"),xe()},children:"â† Back to Phase 2: Technique Selection"}),d.jsx("button",{onClick:D,children:"â† Back to Phase 3"})]})]})}):d.jsxs("div",{className:"phase4-evidence-collection",children:[d.jsx("div",{className:"phase-header",children:d.jsx("div",{className:"header-content",children:d.jsx("h1",{children:"Phase 4: Technique Questions"})})}),d.jsx("div",{className:"evidence-content",children:d.jsx("div",{className:"questions-list",children:v.length>0?v.map(({tactic_id:y,tactic_name:b,questions:C})=>d.jsxs("div",{className:"tactic-section",children:[d.jsxs("div",{className:"tactic-header",children:[d.jsxs("h2",{className:"tactic-title",children:[d.jsx("span",{className:"tactic-name",children:b!==y?b:y}),b!==y&&d.jsxs("span",{className:"tactic-id",children:["(",y,")"]})]}),d.jsxs("div",{className:"tactic-progress",children:[C.length," question",C.length!==1?"s":""]})]}),d.jsx("div",{className:"tactic-questions",children:C.map(({question:k,technique_id:_,tactic_id:j,parent_question_id:P})=>d.jsx(Vu,{question:k,technique_id:_,tactic_id:j,value:e.evidenceResponses[k.id]||"",onChange:L=>T(k.id,L),isSubQuestion:!!P},`${k.id}-${_}-${j}`))})]},y)):d.jsx("div",{className:"no-questions",children:d.jsx("p",{children:"No questions available"})})})}),d.jsxs("div",{className:"phase-controls",children:[d.jsxs("div",{className:"controls-content",children:[d.jsx("button",{className:"nav-button previous",onClick:D,children:"â† Back to Phase 3"}),d.jsx("div",{className:"phase-indicator",children:"Phase 4 of 5: Evidence Collection"}),d.jsx("button",{className:"nav-button next",onClick:A,disabled:M.completedRequiredQuestions<M.requiredQuestions,children:"Continue to Phase 5 â†’"})]}),M.completedRequiredQuestions<M.requiredQuestions&&d.jsx("div",{className:"validation-summary",children:d.jsxs("p",{children:["Please complete all ",M.requiredQuestions," required questions before proceeding to the final summary."]})})]})]})},Wu=()=>{const{state:e,dispatch:t}=Oe(),n=De(),[r,i]=x.useState(null),[s,a]=x.useState(null),[l,c]=x.useState(null),o=y=>{if(y.startsWith("/src/data/")){const b="/ikb-demo/";return(b.endsWith("/")?b.slice(0,-1):b)+y}return y};x.useEffect(()=>{(async()=>{try{const b=o("/src/data/phase1-config.json"),C=await fetch(b);if(C.ok){const L=await C.json();i(L)}const k=o("/src/data/phase4-config.json"),_=await fetch(k);if(_.ok){const L=await _.json();a(L)}const j=o("/src/data/mitre-attack-processed.json"),P=await fetch(j);if(P.ok){const L=await P.json();c(L)}}catch(b){console.error("Failed to load configurations:",b)}})()},[]);const u=()=>{t({type:"SET_PHASE",payload:4}),n("/phase/4")},h=()=>{const y={assessment_info:{title:"Incident Knowledge Base Assessment",version:"1.0",completed_at:new Date().toISOString()},incident_context:{responses:e.responses,questionnaire_version:"1.0"},attack_analysis:{selected_techniques:e.selectedTechniques},selected_attack_patterns:{techniques:e.selectedTechniques,tools:e.selectedSoftware.tools,malware:e.selectedSoftware.malware,groups:e.selectedSoftware.groups},question_responses:{responses:e.evidenceResponses,question_groups:[]},metadata:{total_techniques_selected:Object.values(e.selectedTechniques).reduce((_,j)=>_+Object.values(j).filter(Boolean).length,0),tactics_covered:Object.keys(e.selectedTechniques).length,total_tools_selected:Object.values(e.selectedSoftware.tools).filter(Boolean).length,total_malware_selected:Object.values(e.selectedSoftware.malware).filter(Boolean).length,total_groups_selected:Object.values(e.selectedSoftware.groups).filter(Boolean).length}},b=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),C=URL.createObjectURL(b),k=document.createElement("a");k.href=C,k.download=`ikb-assessment-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(C)},f=y=>{if(!r)return y;for(const b of r.pages){const C=b.questions.find(k=>k.id===y);if(C)return C.question}return y},p=y=>{if(!s)return y;for(const b of s.question_groups){const C=b.question_flow.find(j=>j.id===y);if(C)return C.question;const k=j=>{for(const P of j){if(P.id===y)return P.question;if(P.sub_questions){const L=k(P.sub_questions);if(L)return L}}return null},_=k(b.question_flow);if(_)return _}return y},S=y=>l&&l.techniques[y]?.name||y,w=y=>l&&l.software[y]?.name||y,E=y=>l&&l.groups[y]?.name||y,v=(y,b)=>{if(!r)return String(b);for(const C of r.pages){const k=C.questions.find(_=>_.id===y);if(k&&k.options)return Array.isArray(b)?b.map(_=>k.options?.find(P=>P.value===_)?.label||_).join(", "):k.options.find(j=>j.value===b)?.label||String(b)}return String(b)},T=(y,b)=>{if(!s)return String(b);for(const C of s.question_groups){const k=j=>{for(const P of j){if(P.id===y&&P.options)return P.options;if(P.sub_questions){const L=k(P.sub_questions);if(L)return L}}return null},_=k(C.question_flow);if(_)return Array.isArray(b)?b.map(j=>_.find(L=>L.value===j)?.label||j).join(", "):_.find(P=>P.value===b)?.label||String(b)}return String(b)},A=y=>Array.isArray(y)?y.map(b=>typeof b=="string"?b:typeof b=="object"&&b!==null?b.id?b.id:b.cve_id?b.cve_id:b.value?b.value:Object.keys(b).length>0?JSON.stringify(b):"Unknown CVE":String(b)).join(", "):"Invalid CVE data",D=y=>{if(!y||typeof y!="object")return String(y||"Not provided");if(y.start_date||y.end_date){const b=y.start_date?new Date(y.start_date).toLocaleDateString():"Unknown start",C=y.end_date?new Date(y.end_date).toLocaleDateString():"Unknown end";return`${b} - ${C}`}return y.date?new Date(y.date).toLocaleDateString():y.precision?`Precision: ${y.precision}`:JSON.stringify(y)},M=(y,b,C=!1)=>b==null||b===""?"Not provided":Array.isArray(b)&&b.length>0&&(y.includes("cve")||typeof b[0]=="object"&&b[0]?.id)?A(b):typeof b=="object"&&b!==null&&(b.start_date||b.end_date||b.date||b.precision)?D(b):Array.isArray(b)&&b.length>0&&typeof b[0]=="object"&&b[0]?.asset?b.map(k=>`${k.asset} (${k.classification||"Unknown"})`).join(", "):Array.isArray(b)?C?T(y,b):v(y,b):typeof b=="object"&&b!==null?JSON.stringify(b,null,2):C?T(y,b):v(y,b);return d.jsxs("div",{className:"card",children:[d.jsxs("div",{style:{marginTop:"0px"},children:[d.jsx("h3",{className:"phase-section-heading",children:"Incident Context (Phase 1)"}),Object.keys(e.responses).length>0?d.jsx("div",{style:{background:"#f8f9fa",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:Object.entries(e.responses).map(([y,b])=>d.jsxs("div",{style:{marginBottom:"10px",borderBottom:"1px solid #dee2e6",paddingBottom:"8px"},children:[d.jsxs("strong",{children:[f(y),":"]}),d.jsx("div",{style:{marginTop:"4px",color:"#495057"},children:M(y,b,!1)})]},y))}):d.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:"No incident context provided"})]}),d.jsxs("div",{style:{marginTop:"30px"},children:[d.jsx("h3",{className:"phase-section-heading",children:"Attack Analysis (Phases 2 & 3)"}),d.jsxs("div",{style:{background:"#f8f9fa",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:[d.jsx("h4",{children:"Selected Techniques:"}),Object.keys(e.selectedTechniques).length>0?Object.entries(e.selectedTechniques).map(([y,b])=>{const C=Object.entries(b).filter(([k,_])=>_);return C.length===0?null:d.jsxs("div",{style:{marginBottom:"15px"},children:[d.jsxs("strong",{children:[y,":"]}),d.jsx("ul",{style:{marginTop:"5px",paddingLeft:"20px"},children:C.map(([k])=>d.jsxs("li",{children:[k," - ",S(k)]},k))})]},y)}):d.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:"No techniques selected"}),d.jsx("h4",{style:{marginTop:"20px"},children:"Selected Software:"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[d.jsxs("div",{children:[d.jsx("strong",{children:"Tools:"}),d.jsx("ul",{style:{marginTop:"5px",paddingLeft:"20px"},children:Object.entries(e.selectedSoftware.tools).filter(([y,b])=>b).map(([y])=>d.jsx("li",{children:w(y)},y))}),Object.values(e.selectedSoftware.tools).filter(Boolean).length===0&&d.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:"None selected"})]}),d.jsxs("div",{children:[d.jsx("strong",{children:"Malware:"}),d.jsx("ul",{style:{marginTop:"5px",paddingLeft:"20px"},children:Object.entries(e.selectedSoftware.malware).filter(([y,b])=>b).map(([y])=>d.jsx("li",{children:w(y)},y))}),Object.values(e.selectedSoftware.malware).filter(Boolean).length===0&&d.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:"None selected"})]}),d.jsxs("div",{children:[d.jsx("strong",{children:"Groups:"}),d.jsx("ul",{style:{marginTop:"5px",paddingLeft:"20px"},children:Object.entries(e.selectedSoftware.groups).filter(([y,b])=>b).map(([y])=>d.jsx("li",{children:E(y)},y))}),Object.values(e.selectedSoftware.groups).filter(Boolean).length===0&&d.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:"None selected"})]})]})]})]}),d.jsxs("div",{style:{marginTop:"30px"},children:[d.jsx("h3",{className:"phase-section-heading",children:"Detailed Analysis (Phase 4)"}),Object.keys(e.evidenceResponses).length>0?d.jsx("div",{style:{background:"#f8f9fa",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:Object.entries(e.evidenceResponses).map(([y,b])=>d.jsxs("div",{style:{marginBottom:"15px",borderBottom:"1px solid #dee2e6",paddingBottom:"10px"},children:[d.jsxs("strong",{children:[p(y),":"]}),d.jsx("div",{style:{marginTop:"4px",color:"#495057"},children:M(y,b,!0)})]},y))}):d.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:"No detailed analysis responses provided"})]}),d.jsxs("div",{style:{marginTop:"30px"},children:[d.jsx("h3",{className:"phase-section-heading",children:"Assessment Summary"}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px",marginBottom:"20px"},children:[d.jsxs("div",{style:{background:"#e3f2fd",padding:"15px",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#1976d2"},children:Object.keys(e.responses).length}),d.jsx("div",{style:{fontSize:"14px",color:"#424242"},children:"Context Responses"})]}),d.jsxs("div",{style:{background:"#f3e5f5",padding:"15px",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#7b1fa2"},children:Object.values(e.selectedTechniques).reduce((y,b)=>y+Object.values(b).filter(Boolean).length,0)}),d.jsx("div",{style:{fontSize:"14px",color:"#424242"},children:"Techniques"})]}),d.jsxs("div",{style:{background:"#e8f5e8",padding:"15px",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#388e3c"},children:Object.values(e.selectedSoftware.tools).filter(Boolean).length+Object.values(e.selectedSoftware.malware).filter(Boolean).length+Object.values(e.selectedSoftware.groups).filter(Boolean).length}),d.jsx("div",{style:{fontSize:"14px",color:"#424242"},children:"Software Items"})]}),d.jsxs("div",{style:{background:"#fff3e0",padding:"15px",borderRadius:"8px",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#f57c00"},children:Object.keys(e.evidenceResponses).length}),d.jsx("div",{style:{fontSize:"14px",color:"#424242"},children:"Analysis Responses"})]})]})]}),d.jsx("div",{className:"phase-controls",children:d.jsxs("div",{className:"controls-content",children:[d.jsx("button",{className:"nav-button previous",onClick:u,children:"â† Back to Phase 4"}),d.jsx("div",{className:"phase-indicator",children:"Phase 5 of 5: Assessment Report"}),d.jsx("button",{className:"nav-button next export",onClick:h,children:"ðŸ“„ Export Assessment"})]})})]})},Gu=()=>d.jsx(da,{children:d.jsx(Ks,{basename:"/ikb-demo/",children:d.jsx(Ns,{children:d.jsxs(je,{path:"/",element:d.jsx(fa,{}),children:[d.jsx(je,{index:!0,element:d.jsx(Mn,{to:"/phase/1",replace:!0})}),d.jsx(je,{path:"phase/1",element:d.jsx(nt,{requiredPhase:1,children:d.jsx(xa,{})})}),d.jsx(je,{path:"phase/2",element:d.jsx(nt,{requiredPhase:2,children:d.jsx(Bu,{})})}),d.jsx(je,{path:"phase/3",element:d.jsx(nt,{requiredPhase:3,children:d.jsx(Hu,{})})}),d.jsx(je,{path:"phase/4",element:d.jsx(nt,{requiredPhase:4,children:d.jsx(Qu,{})})}),d.jsx(je,{path:"phase/5",element:d.jsx(nt,{requiredPhase:5,children:d.jsx(Wu,{})})}),d.jsx(je,{path:"*",element:d.jsx(Mn,{to:"/phase/1",replace:!0})})]})})})});Li.createRoot(document.getElementById("root")).render(d.jsx(x.StrictMode,{children:d.jsx(Gu,{})}));
